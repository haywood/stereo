!function(e){function t(t){for(var n,o,s=t[0],u=t[1],c=t[2],f=0,h=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);h.length;)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var u=r[s];0!==i[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={0:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/stereo/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([96,1]),r()}({14:function(e,t,r){r.d(t,"a",(function(){return o}));var n=r(11),i=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(e,t,r,n){this.n=e,this.d=t,this.position=r,this.color=n}}a(o,"fromBuffer",e=>{var t=new Float32Array(e),r=t[o.nOffset],n=t[o.positionOffset(t)],i=o.position(t),a=o.color(t);return new o(r,n,i,a)}),a(o,"bufferFor",(e,t,r)=>{var n=new SharedArrayBuffer(4*(3+e*(t+r+3))),i=new Float32Array(n);return i[o.nOffset]=e,i[o.inputOffset]=t,i[o.positionOffset(i)]=r,n}),a(o,"input",e=>{var t=o.inputOffset+1;return e.subarray(t,t+o.inputLength(e))}),a(o,"position",e=>{var t=o.positionOffset(e)+1;return e.subarray(t,t+o.positionLength(e))}),a(o,"color",e=>{var t=o.colorOffset(e);return e.subarray(t)}),a(o,"nOffset",0),a(o,"inputOffset",o.nOffset+1),a(o,"inputLength",e=>{return e[o.nOffset]*e[o.inputOffset]}),a(o,"positionOffset",e=>o.inputOffset+o.inputLength(e)+1),a(o,"positionLength",e=>{return e[o.nOffset]*e[o.positionOffset(e)]}),a(o,"colorOffset",e=>o.positionOffset(e)+o.positionLength(e)+1),a(o,"get",(e,t,r)=>{var n=t*r;return e.subarray(n,n+r)}),a(o,"set",(e,t,r,n)=>{i()(t.length<=n);var a=r*n;return e.set(t,a)})},17:function(e,t,r){r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var n,i,a,o=r(51),s={pipe:(n={},i={"[0,2]":"sin"},a=(e=>{for(var t=[],r=0;r<4;r++)for(var n=r+1;n<4;n++){if(!(t.length<e))return t;t.push([r,n])}return t})(3).map(e=>{var t=JSON.stringify(e),r=n[t]||"cos",a=i[t]||"tan";return"R(theta, ".concat(e[0],", ").concat(e[1],", ").concat(r,", ").concat(a,")")}).join("->"),"10000->sphere(".concat(4,", 1)->").concat(a,"->stereo(3)")),theta:"pi * t * dsong / 20",h:"abs(sin(theta)) * i / n",l:"esong",animate:!0,sound:!1},u={},c={},l={pipe:!0,theta:!0,h:!0,l:!0,animate:!1,sound:!1},f=new URLSearchParams(window.location.search);for(var h in"0"!==f.get("restore")&&(()=>{for(var[e,t]of Object.entries(l))if(t){var r=localStorage.getItem("inputs.".concat(e));r&&(s[e]=r)}})(),s)u[h]=new o.a,c[h]=u[h].asObservable();var d=new Proxy(s,{set(e,t,r){var n=e[t],i=Reflect.set(e,t,r);return"0"!==f.get("persist")&&(()=>{for(var[e,t]of Object.entries(d))l[e]&&localStorage.setItem("inputs.".concat(e),t.toString())})(),u[t].next({newValue:r,event:window.event,oldValue:n}),i}})},19:function(e,t,r){r.d(t,"a",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return JSON.stringify(e,null,t)}},37:function(e,t,r){r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var n=60,i=2*(n/1e3)},48:function(e,t,r){(function(e){r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return w}));var n=r(32),i=r(18),a=r(74),o=r(2),s=r(14);function u(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){u(a,n,i,o,s,"next",e)}function s(e){u(a,n,i,o,s,"throw",e)}o(void 0)}))}}var l,f,h=Object(i.getLogger)("PipelinePool");h.setLevel("info");var d=0,p=function(){var t=c((function*(t){h.info("starting worker pool"),l=Object(n.Pool)(()=>Object(n.spawn)(new n.Worker(e)),t),d=t,f=new Map;for(var r=[],i=0;i<t;i++)r.push(l.queue(c((function*(){}))));yield Promise.all(r),l.events().subscribe(e=>{e.error&&h.error("received error event from worker pool",e)})}));return function(e){return t.apply(this,arguments)}}(),v=(e,t,r)=>y("initialization")(c((function*(){return m(t,function(){var t=c((function*(t){return l.queue(n=>n.initialize(e,t,r))}));return function(e){return t.apply(this,arguments)}}())}))),b=(e,t,r)=>y("iteration")(c((function*(){return m(t,function(){var t=c((function*(t){return l.queue(n=>n.iterate(e,t,r))}));return function(e){return t.apply(this,arguments)}}())}))),g=function(){var e=c((function*(e,t,r,n){var i=(e=>JSON.stringify({pipe:e.pipe,theta:e.theta,h:e.h,l:e.l}))(e);if(!f.has(i)){var a=s.a.bufferFor(t,r,n);yield v(e,t,a),f.set(i,a)}return f.get(i)}));return function(t,r,n,i){return e.apply(this,arguments)}}(),m=function(){var e=c((function*(e,t){for(var r=Object(o.fb)(e/d),n=[],i=0;i<e;i+=r){var a={offset:i,size:Math.min(e-i,r)};n.push(t(a))}yield Promise.all(n)}));return function(t,r){return e.apply(this,arguments)}}(),y=e=>(function(){var t=c((function*(t){var r=Date.now(),n=yield t(),i=Date.now()-r;return h.debug("".concat(e," took ").concat(i,"ms")),n}));return function(e){return t.apply(this,arguments)}})(),w=function(){var e=c((function*(e){var{n:t,init:r,iter:n}=a.a.compile(e),i=yield g(e,t,r.d,n.d);return yield b(e,t,i),i.slice(0)}));return function(t){return e.apply(this,arguments)}}()}).call(this,r(80))},70:function(e,t,r){function n(e,t,r,i){this.message=e,this.expected=t,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}return"Expected "+function(e){var t,n,i,a=new Array(e.length);for(t=0;t<e.length;t++)a[t]=(i=e[t],r[i.type](i));if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:n,parse:function(e,t){t=void 0!==t?t:{};var r,i={},a={pipe:de,arith:be},o=de,s=function(e,t){return{n:parseInt(e),chain:t}},u=function(e,t){return[e,...t]},c=function(e){return[e]},l=function(e,t){return{fn:e,args:t}},f=function(e){return[e]},h=function(e,t,r){return{op:t,operands:[e,r]}},d=function(e){return e},p=function(e){return{value:e}},v=function(e){return{id:e}},b=function(e){return parseFloat(e)},g=function(e){return parseInt(e)},m=/^[a-zA-Z]/,y=ue([["a","z"],["A","Z"]],!1,!1),w=/^[a-zA-Z0-9]/,O=ue([["a","z"],["A","Z"],["0","9"]],!1,!1),A=function(e){return e},j=/^[+\-]/,x=ue(["+","-"],!1,!1),P=/^[0-9]/,N=ue([["0","9"]],!1,!1),F=/^[eE]/,E=ue(["e","E"],!1,!1),S=".",q=se(".",!1),C="+",M=se("+",!1),k="-",z=se("-",!1),L="*",D=se("*",!1),T="/",R=se("/",!1),B="**",_=se("**",!1),V="^",I=se("^",!1),J=function(e){return e},H="(",U=se("(",!1),Z=")",W=se(")",!1),G=",",K=se(",",!1),Q="->",X=se("->",!1),Y="=>",$=se("=>",!1),ee=/^[ \t\n\r]/,te=ue([" ","\t","\n","\r"],!1,!1),re=0,ne=[{line:1,column:1}],ie=0,ae=[],oe=0;if("startRule"in t){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=a[t.startRule]}function se(e,t){return{type:"literal",text:e,ignoreCase:t}}function ue(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function ce(t){var r,n=ne[t];if(n)return n;for(r=t-1;!ne[r];)r--;for(n={line:(n=ne[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ne[t]=n,n}function le(e,t){var r=ce(e),n=ce(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function fe(e){re<ie||(re>ie&&(ie=re,ae=[]),ae.push(e))}function he(e,t,r){return new n(n.buildMessage(e,t),e,t,r)}function de(){var e,t,r;return e=re,(t=Oe())!==i&&Pe()!==i&&(r=function e(){var t,r,n;t=re,(r=pe())!==i&&Pe()!==i&&(n=e())!==i?(t,r=u(r,n),t=r):(re=t,t=i);t===i&&(t=re,(r=pe())!==i&&(t,r=c(r)),t=r);return t}())!==i?(e,e=t=s(t,r)):(re=e,e=i),e}function pe(){var t,r,n;return t=re,(r=ye())!==i&&je()!==i&&(n=function t(){var r,n,a;r=re,(n=ve())!==i&&function(){var t,r,n,a;t=re,(r=Ne())!==i?(44===e.charCodeAt(re)?(n=G,re++):(n=i,0===oe&&fe(K)),n!==i&&(a=Ne())!==i?t=r=[r,n,a]:(re=t,t=i)):(re=t,t=i);return t}()!==i&&(a=t())!==i?(r,n=u(n,a),r=n):(re=r,r=i);r===i&&(r=re,(n=ve())!==i&&(r,n=f(n)),r=n);return r}())!==i&&xe()!==i?(t,t=r=l(r,n)):(re=t,t=i),t}function ve(){var e;return(e=me())===i&&(e=be()),e}function be(){var t,r,n,a;return t=re,(r=ge())!==i&&(n=function(){var t,r,n,a;t=re,(r=Ne())!==i?(n=re,43===e.charCodeAt(re)?(a=C,re++):(a=i,0===oe&&fe(M)),a===i&&(45===e.charCodeAt(re)?(a=k,re++):(a=i,0===oe&&fe(z)),a===i&&(42===e.charCodeAt(re)?(a=L,re++):(a=i,0===oe&&fe(D)),a===i&&(47===e.charCodeAt(re)?(a=T,re++):(a=i,0===oe&&fe(R)),a===i&&(e.substr(re,2)===B?(a=B,re+=2):(a=i,0===oe&&fe(_)),a===i&&(94===e.charCodeAt(re)?(a=V,re++):(a=i,0===oe&&fe(I))))))),(n=a!==i?e.substring(n,re):a)!==i&&(a=Ne())!==i?(t,r=J(n),t=r):(re=t,t=i)):(re=t,t=i);return t}())!==i&&(a=be())!==i?(t,t=r=h(r,n,a)):(re=t,t=i),t===i&&(t=ge())===i&&(t=re,(r=je())!==i&&(n=be())!==i&&(a=xe())!==i?(t,t=r=d(n)):(re=t,t=i)),t}function ge(){var t,r;return t=re,(r=function(){var t,r,n;t=re,(r=Ne())!==i&&(n=function(){var t,r,n,a,o,s,u;t=re,r=re,j.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(x));n===i&&(n=null);n!==i?(P.test(e.charAt(re))?(a=e.charAt(re),re++):(a=i,0===oe&&fe(N)),a!==i&&(o=Ae())!==i?(F.test(e.charAt(re))?(s=e.charAt(re),re++):(s=i,0===oe&&fe(E)),s!==i&&(u=we())!==i?r=n=[n,a,o,s,u]:(re=r,r=i)):(re=r,r=i)):(re=r,r=i);t=r!==i?e.substring(t,re):r;t===i&&(t=re,r=re,(n=we())===i&&(n=null),n!==i&&(a=Ae())!==i?r=n=[n,a]:(re=r,r=i),t=r!==i?e.substring(t,re):r);return t}())!==i&&Ne()!==i?(t,r=b(n),t=r):(re=t,t=i);t===i&&(t=re,(r=Ne())!==i&&(n=we())!==i&&Ne()!==i?(t,r=g(n),t=r):(re=t,t=i));return t}())!==i&&(t,r=p(r)),(t=r)===i&&(t=me()),t}function me(){var e,t;return e=re,(t=ye())!==i&&(e,t=v(t)),e=t}function ye(){var t,r,n,a,o,s;if(t=re,Ne()!==i){if(r=re,n=re,m.test(e.charAt(re))?(a=e.charAt(re),re++):(a=i,0===oe&&fe(y)),a!==i){for(o=[],w.test(e.charAt(re))?(s=e.charAt(re),re++):(s=i,0===oe&&fe(O));s!==i;)o.push(s),w.test(e.charAt(re))?(s=e.charAt(re),re++):(s=i,0===oe&&fe(O));o!==i?n=a=[a,o]:(re=n,n=i)}else re=n,n=i;(r=n!==i?e.substring(r,re):n)!==i&&(n=Ne())!==i?(t,t=A(r)):(re=t,t=i)}else re=t,t=i;return t}function we(){var t,r,n,a;return t=re,r=re,j.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(x)),n===i&&(n=null),n!==i&&(a=Oe())!==i?r=n=[n,a]:(re=r,r=i),t=r!==i?e.substring(t,re):r}function Oe(){var t,r,n;if(t=re,r=[],P.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(N)),n!==i)for(;n!==i;)r.push(n),P.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(N));else r=i;return t=r!==i?e.substring(t,re):r}function Ae(){var t,r,n,a;return t=re,r=re,46===e.charCodeAt(re)?(n=S,re++):(n=i,0===oe&&fe(q)),n!==i&&(a=Oe())!==i?r=n=[n,a]:(re=r,r=i),t=r!==i?e.substring(t,re):r}function je(){var t,r,n,a;return t=re,(r=Ne())!==i?(40===e.charCodeAt(re)?(n=H,re++):(n=i,0===oe&&fe(U)),n!==i&&(a=Ne())!==i?t=r=[r,n,a]:(re=t,t=i)):(re=t,t=i),t}function xe(){var t,r,n,a;return t=re,(r=Ne())!==i?(41===e.charCodeAt(re)?(n=Z,re++):(n=i,0===oe&&fe(W)),n!==i&&(a=Ne())!==i?t=r=[r,n,a]:(re=t,t=i)):(re=t,t=i),t}function Pe(){var t,r,n,a;return t=re,(r=Ne())!==i?(n=re,e.substr(re,2)===Q?(a=Q,re+=2):(a=i,0===oe&&fe(X)),a===i&&(a=function(){var t,r,n;t=re,r=[],ee.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(te));if(n!==i)for(;n!==i;)r.push(n),ee.test(e.charAt(re))?(n=e.charAt(re),re++):(n=i,0===oe&&fe(te));else r=i;t=r!==i?e.substring(t,re):r;return t}())===i&&(e.substr(re,2)===Y?(a=Y,re+=2):(a=i,0===oe&&fe($))),(n=a!==i?e.substring(n,re):a)!==i&&(a=Ne())!==i?t=r=[r,n,a]:(re=t,t=i)):(re=t,t=i),t}function Ne(){var t,r;for(t=[],ee.test(e.charAt(re))?(r=e.charAt(re),re++):(r=i,0===oe&&fe(te));r!==i;)t.push(r),ee.test(e.charAt(re))?(r=e.charAt(re),re++):(r=i,0===oe&&fe(te));return t}if((r=o())!==i&&re===e.length)return r;throw r!==i&&re<e.length&&fe({type:"end"}),he(ae,ie<e.length?e.charAt(ie):null,ie<e.length?le(ie,ie+1):le(ie,ie))}}},72:function(e,t,r){(function(e){r.d(t,"a",(function(){return b}));var n=r(97),i=r(98),a=r(18),o=r(17),s=r(32),u=r(37),c=r(73);function l(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){l(a,n,i,o,s,"next",e)}function s(e){l(a,n,i,o,s,"throw",e)}o(void 0)}))}}var h=Object(a.getLogger)("Energy"),d={esong:.5,dsong:1},p=new n.a(d),v=function(){var t=f((function*(t){h.info("initializing audio graph");var r=yield Object(s.spawn)(new s.Worker(e)),n=new c.a(t);Object(i.a)(1/u.a).subscribe(f((function*(){if(o.b.sound)try{p.next(yield r.analyze(n.read()))}catch(e){p.error(e)}})))}));return function(e){return t.apply(this,arguments)}}(),b=p.asObservable(),g=o.a.sound.subscribe(function(){var e=f((function*(e){var{newValue:t,event:r}=e;if(t&&r){var n=yield navigator.mediaDevices.getUserMedia({audio:!0});yield v(n),g.unsubscribe(),g=null}}));return function(t){return e.apply(this,arguments)}}());o.a.sound.subscribe(function(){var e=f((function*(e){var{newValue:t}=e;t||p.next(d)}));return function(t){return e.apply(this,arguments)}}())}).call(this,r(95))},73:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}));class i{constructor(e){n(this,"node",void 0),n(this,"data",void 0),n(this,"bytes",void 0),n(this,"read",()=>{this.node.getByteFrequencyData(this.bytes),this.data.set(this.bytes);for(var e=0;e<this.data.length;e++)this.data[e]/=255;return this.data});var t=new AudioContext;this.node=new AnalyserNode(t,{fftSize:2048}),this.bytes=new Uint8Array(this.node.frequencyBinCount),this.data=new Float32Array(this.node.frequencyBinCount),new MediaStreamAudioSourceNode(t,{mediaStream:e}).connect(this.node)}}},74:function(e,t,r){var n=r(99),i=r(18),a=r(19),o=r(11),s=r.n(o);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=Math.cos,l=Math.sin,f=(Math.tan,Math.tanh,Math.exp),h=e=>Array.from(new Array(e).keys());class d{constructor(e){var t=this;this.fns=e,u(this,"x",void 0),u(this,"y",void 0),u(this,"sample",(function*(e,t,r){var{fns:n,d:i}=this,[a,...o]=n;if(0==n.length)return[];for(var s of a.sample(e,t,r))this.x.set(s),o.length?d.apply(o,this.x,this.y):this.y.set(s),yield this.y.subarray(0,i)})),u(this,"fn",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(t.d),{fns:n,domain:i,d:a}=t;return s.a.equal(e.length,i),s.a.equal(r.length,a),t.x.set(e),d.apply(n,t.x,t.y),r.set(t.y.subarray(0,a)),r})),s()(e.length,"fns cannot be empty");var r=Math.max(this.domainMax,this.dMax);this.x=new Float32Array(r),this.y=new Float32Array(r)}get first(){return this.fns[0]}get last(){return this.fns[this.fns.length-1]}get domain(){return this.first.domain}get d(){return this.last.d}get domainMax(){return this.fns.reduce((e,t)=>Math.max(t.domain,e),0)}get dMax(){return this.fns.reduce((e,t)=>Math.max(t.d,e),0)}}u(d,"apply",(e,t,r)=>{for(var n of(s.a.equal(t.length,r.length),e))n.fn(t.subarray(0,n.domain),r.subarray(0,n.d)),t.set(r)}),u(d,"Builder",class{constructor(){u(this,"fns",[]),u(this,"add",e=>{var{fns:t,last:r}=this;if(r&&e.domain!==r.d)throw new Error("Cannot add ".concat(e," to composite, because its domain is not ").concat(r.d));return t.push(e),this}),u(this,"build",()=>new d(this.fns))}get d(){return this.last.d}get last(){return this.fns[this.fns.length-1]}});var p=r(2);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b{constructor(e,t,r){var n=this;this.d=e,this.a=t,this.b=r,v(this,"domain",void 0),v(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(n.d),{a:r,b:i,d:a}=n;s.a.equal(e.length,a),s.a.equal(t.length,a);for(var o=0;o<a;o++)t[o]=r[o]+e[o]*(i[o]-r[o]);return t})),v(this,"sample",(function*(e,t,r){var{d:n,fn:i}=this;e=b.nPerLevel(n,e);for(var a=[[]],o=0;a.length&&o<r;){var s=a.pop();s.length<n?a.push(...u(s)):o++>=t&&(yield i(s))}function*u(t){for(var r=0;r<e;r++)yield[...t,r/e]}})),s.a.equal(t.length,e),s.a.equal(r.length,e),this.domain=e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}v(b,"nPerLevel",(e,t)=>Object(p.kc)(Object(p.vd)(t,e))),v(b,"n",(e,t)=>b.nPerLevel(e,t)**e);class m{constructor(e,t){this.d=e,this.l=t,g(this,"interval",void 0),g(this,"fn",(e,t)=>this.interval.fn(e,t)),g(this,"sample",(e,t,r)=>this.interval.sample(e,t,r)),this.interval=new b(e,new Array(e).fill(-t/2),new Array(e).fill(t/2))}get domain(){return this.d}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class w{constructor(e,t,r,n){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l;this.d=e,this.theta=t,this.d0=r,this.d1=n,this.f0=a,this.f1=o,y(this,"r0",void 0),y(this,"r1",void 0),y(this,"sample",(function*(e,t,r){var n=new m(this.domain,2);for(var i of n.sample(e,t,r))yield this.fn(i)})),y(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(i.d),{d:r,d0:n,d1:a,r0:o,r1:u}=i;s.a.equal(e.length,r),s.a.equal(t.length,r),t.set(e);var c=e[n],l=e[a];return t[n]=c*o-l*u,t[a]=c*u+l*o,t})),this.r0=a(t),this.r1=o(t)}get domain(){return this.d}}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class A{constructor(e,t){var r=this;this.d=e,O(this,"root",void 0),O(this,"sample",(function*(e,t,r){var n=new m(this.domain,p.Se);for(var i of n.sample(e,t,r))yield this.fn(i)})),O(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(r.d),{d:n,root:i}=r;s.a.equal(e.length,n-1),s.a.equal(t.length,n);var a=new d(h(n-1).map(t=>new w(n,e[t],0,t+1)));return a.fn(i,t),t})),this.root=new Float32Array(e),this.root[0]=t}get domain(){return this.d-1}}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class x{constructor(e,t,r){var n=this;this.d=e,this.a=t,this.k=r,j(this,"sphere",void 0),j(this,"sample",(function*(e,t,r){var n=new m(this.domain,2*p.Se);for(var i of n.sample(e,t,r))yield this.fn(i)})),j(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(n.d),{a:r,k:i,domain:a,d:o}=n;s.a.equal(e.length,o-1),s.a.equal(t.length,o),n.sphere.fn(e,t);for(var u=0,c=0;c<a;c++)u+=i[c]*e[c];for(var l=f(u),h=0;h<o;h++)t[h]=t[h]*r[h]*l;return t})),this.sphere=new A(e,1)}get domain(){return this.d-1}}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class N{constructor(e,t,r){var n=this;this.d=e,this.r=t,this.t=r,P(this,"cross",void 0),P(this,"sample",(function*(e,t,r){var n=new m(this.domain,p.Se);for(var i of n.sample(e,t,r))yield this.fn(i)})),P(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(n.d),{cross:r,d:i,r:a}=n;s.a.equal(e.length,i-1,"torus expects an input of ".concat(i-1,"; got ").concat(e.length));var o=new w(i,e[i-2],0,i-1);return r.fn(e.subarray(0,i-2),t.subarray(0,i-1)),t[0]+=a,o.fn(t,t),t})),s()(e>2,"torus is only defined for d > 2; got ".concat(e)),this.cross=new A(e-1,r)}get domain(){return this.d-1}}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class E{constructor(e,t,r){var n=this;this.d=e,this.r=t,this.t=r,F(this,"sphere",void 0),F(this,"circle",void 0),F(this,"sample",(function*(e,t,r){var n=new m(this.domain,p.Se);for(var i of n.sample(e,t,r))yield this.fn(i)})),F(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(n.d),{domain:r,d:i,sphere:a,circle:o}=n;s.a.equal(e.length,r),s.a.equal(t.length,i),a.fn(e,t);var u=o.fn(e.subarray(i-2));return t[0]+=u[0],t[i-1]+=u[1],t})),this.sphere=new A(e,r),this.circle=new A(2,t)}get domain(){return this.d-1}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class q{constructor(e,t){var r=this;this.from=e,this.to=t,S(this,"fromTemp",void 0),S(this,"toTemp",void 0),S(this,"sample",(function*(e,t,r){var n=new m(this.domain,2);for(var i of n.sample(e,t,r))yield this.fn(i)})),S(this,"fn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(r.to),{from:n,to:i,fromTemp:a,toTemp:o}=r;if(s.a.equal(e.length,n),s.a.equal(t.length,i),n===i)return t.set(e),t;for(a.set(e);n<i;)q.up(a.subarray(0,n),o.subarray(0,++n)),a.set(o);for(;n>i;)q.down(a.subarray(0,n),o.subarray(0,--n)),a.set(o);return t.set(o.subarray(0,i)),t})),this.fromTemp=new Float32Array(Math.max(e,t)),this.toTemp=new Float32Array(Math.max(e,t))}get domain(){return this.from}get d(){return this.to}}S(q,"up",(e,t)=>{s.a.equal(t.length,e.length+1);var r=C(e),n=r+1;t[0]=(r-1)/n;for(var i=1;i<=e.length;i++)t[i]=2*e[i-1]/n}),S(q,"down",(e,t)=>{s.a.equal(t.length,e.length-1);for(var r=0;r<t.length;r++)t[r]=e[r+1]/(1-e[0])});var C=e=>{for(var t=0,r=0;r<e.length;r++)t+=e[r]*e[r];return t};function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class k{constructor(e){var t=this;this.d=e,M(this,"domain",void 0),M(this,"fn",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(t.d),{d:n}=t;return s.a.equal(e.length,n),s.a.equal(r.length,n),r.set(e),r})),M(this,"sample",(function*(e,t,r){throw new Error("identity function does not support sampling")})),this.domain=e}}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L{constructor(e){this.scope=e,z(this,"resolve",e=>this.resolvePipeNode(e)),z(this,"resolvePipeNode",e=>{var t=D("chain",e),r=[],n=t.shift(),i=n.args.shift().value,a=this.resolveFirstFunNode(i,n),o=b.n(a.fn.domain,T("n",e));r.push(a);for(var s=0;s<t.length;s++){var u=t[s],c=this.resolveFunNode(r[s].fn,u);r.push(c)}var[l,f]=this.buildComposites(r);return{n:o,chain:r,init:l,iter:f}}),z(this,"buildComposites",e=>{for(var t=new d.Builder;e.length&&!e[0].isTemporal;)t.add(e.shift().fn);var r=t.build();for(t=(new d.Builder).add(new k(r.d));e.length;)t.add(e.shift().fn);return[r,t.build()]}),z(this,"resolveFirstFunNode",(e,t)=>{var r=D("fn",t),n=D("args",t);return{fn:I[r](e,...n.map(this.resolveFunArgNode)),isTemporal:n.some(B)}}),z(this,"resolveFunNode",(e,t)=>{var r=D("fn",t),n=D("args",t),i=J[r](e.d);return{fn:I[r](i,...n.map(this.resolveFunArgNode)),isTemporal:n.some(B)}}),z(this,"resolveFunArgNode",e=>e.id?this.resolveVarNode(e):this.resolveArithNode(e)),z(this,"resolveArithNode",e=>{if(null!=e.op){var t=_[e.op],[r,n]=D("operands",e).map(this.resolveArithNode);return t(r,n)}return this.resolveNumberNode(e)}),z(this,"resolveVarNode",e=>{var{value:t}=e;return"function"==typeof t?t:this.resolveNumberNode(e)}),z(this,"resolveNumberNode",e=>{var{value:t}=e;if("number"==typeof t)return t;s.a.fail("don't know how to handle number node ".concat(Object(a.a)(e)))})}}var D=(e,t)=>{var r=t[e];return R(null!=r,e,"to be defined",t),r},T=(e,t)=>{var r=t[e];return R("number"==typeof r,e,"a number",t),r},R=(e,t,r,n)=>{s()(e,"Expected ".concat(t," to be ").concat(r," in ").concat(Object(a.a)(n)))},B=e=>"t"===e.id||(e.args?e.args.some(B):!!e.operands&&e.operands.some(B)),_={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"**":(e,t)=>e**t,"^":(e,t)=>e**t},V=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.cos,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.sin;return new w(e,t,r,n,i,a)},I={cube:(e,t)=>new m(e,t),sphere:(e,t)=>new A(e,t),spiral:(e,t,r)=>new x(e,new Array(e).fill(t),new Array(e-1).fill(r)),torus:(e,t,r)=>new N(e,t,r),fucked_up_torus:(e,t,r)=>new E(e,t,r),rotate:V,R:V,stereo:(e,t)=>new q(e,t)},J={cube:e=>e,sphere:e=>e+1,spiral:e=>e+1,torus:e=>e+1,fucked_up_torus:e=>e+1,rotate:e=>e,R:e=>e,stereo:e=>e};function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class U{constructor(e,t){this.scope=e,this.substitutions=t,H(this,"simplify",e=>this.simplifyPipeNode(e)),H(this,"simplifyPipeNode",e=>{return{n:W("n",e),chain:Z("chain",e).map(this.simplifyFunNode)}}),H(this,"simplifyFunNode",e=>{return{fn:Z("fn",e),args:Z("args",e).map(this.simplifyFunArgNode)}}),H(this,"simplifyFunArgNode",e=>e.id?this.simplifyVarNode(e):this.simplifyArithNode(e)),H(this,"simplifyArithNode",e=>{if(null!=e.op){var t=Z("operands",e);return{op:e.op,operands:t.map(this.simplifyArithNode)}}return this.simplifyNumberNode(e)}),H(this,"simplifyVarNode",e=>{var t=e.id;return t in this.substitutions?this.simplifyArithNode(this.substitutions[t]):t in Math&&"function"==typeof Math[t]?{id:t,value:Math[t]}:{id:t,value:n.b(t,this.scope)}}),H(this,"simplifyNumberNode",e=>{var{id:t,value:r}=e;if(null!=r)return e;if(t in this.substitutions)return this.simplifyArithNode(this.substitutions[t]);if(t){var i=n.b(t,this.scope);return s.a.equal(typeof i,"number","Expected evaluation of ".concat(Object(a.a)(t)," to produce a number")),{id:t,value:i}}return e})}}var Z=(e,t)=>{var r=t[e];return G(null!=r,e,"to be defined",t),r},W=(e,t)=>{var r=t[e];return G("number"==typeof r,e,"a number",t),r},G=(e,t,r,n)=>{s()(e,"Expected ".concat(t," to be ").concat(r," in ").concat(Object(a.a)(n)))},K=r(70);function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=Object(i.getLogger)("Parser");X.setDefaultLevel("info");var Y=(e,t)=>{try{var r=Object(K.parse)(e,t);return X.debug("parsed ".concat(e," into node ").concat(Object(a.a)(r))),r}catch(t){throw X.error("error parsing ".concat(e," at ").concat(Object(a.a)(t.location),": ").concat(t.message)),t}};class ${}Q($,"parsePipe",e=>Y(e)),Q($,"parseArith",e=>Y(e,{startRule:"arith"}));var ee=Object(i.getLogger)("Compiler");ee.setDefaultLevel("info");class te{constructor(e){var t,r,n;this.scope=e,n=e=>{var t=$.parsePipe(e.pipe);ee.debug("parsed params into ast ".concat(Object(a.a)(t)));var r={theta:$.parseArith(e.theta)},n=new U(this.scope,r);return new L(this.scope).resolve(n.simplify(t))},(r="compile")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}}var re=r(14),ne=r(23);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=Object(i.getLogger)("Evaluator");class ue{constructor(e,t,r,n){this.scope=e,this.hl=r,oe(this,"n",void 0),oe(this,"init",void 0),oe(this,"iter",void 0),oe(this,"offset",void 0),oe(this,"limit",void 0),oe(this,"initialize",e=>{var t=new Float32Array(e),{n:r,init:n,offset:i,limit:a}=this,o=re.a.input(t),s=i;for(var u of n.sample(r,i,a))re.a.set(o,u,s++,n.d)}),oe(this,"iterate",e=>{var t=new Float32Array(e),{init:r,iter:n,scope:i,n:o,offset:u,limit:c}=this,l=re.a.input(t),f=re.a.position(t),h=Date.now();s.a.equal(t[re.a.nOffset],o,"n(data) != n(evaluator)"),s.a.equal(t[re.a.inputOffset],r.d,"d0(data) != d0(evaluator)"),s.a.equal(t[re.a.positionOffset(t)],n.d,"d(data) != d(evaluator)"),se.debug("iterating using ".concat(Object(a.a)(i),", ").concat(Object(a.a)(n)));for(var d=u;d<c;d++)n.fn(re.a.get(l,d,r.d),re.a.get(f,d,n.d));this.computeColors(t),se.debug("iteration complete in ".concat(Date.now()-h,"ms"))}),oe(this,"computeColors",e=>{se.debug("computing colors");for(var{d:t,scope:r,hl:n,offset:i,limit:a}=this,o=re.a.position(e),s=re.a.color(e),u=i;u<a;u++){var c=ae({},r,{p:re.a.get(o,u,t),i:u}),l=Object(p.de)(n.h.evaluate(c),0),f=Object(p.de)(n.l.evaluate(c),0),h=new ne.c("hsl(".concat(l,", 100%, ").concat(f,"%)"));re.a.set(s,[h.r,h.g,h.b],u,3)}});var{n:i,init:o,iter:u}=t,c=n.offset,l=n.size,f=c+l;s()(c>=0,"offset must be non-negative; got ".concat(c)),s()(f<=i,"offset + size must be <= n; got ".concat(c," + ").concat(l," = ").concat(f," > ").concat(i)),this.n=i,this.init=o,this.iter=u,this.offset=c,this.limit=f}get d(){return this.iter.d}}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return le})),Object(i.getLogger)("Pipe").setLevel("info");class le{}ce(le,"compile",e=>le.compileNormal(le.normalized(e))),ce(le,"evaluatorFor",(e,t)=>le.evaluatorForNormal(le.normalized(e),t)),ce(le,"evaluatorForNormal",(e,t)=>{var r=le.compileNormal(e),n=le.finalScope(e,r),i=le.compileHL(e);return new ue(n,r,i,t)}),ce(le,"compileNormal",e=>{var{esong:t,dsong:r,t:n}=e;return new te({t:n,esong:t,dsong:r}).compile(e)}),ce(le,"normalized",e=>({pipe:e.pipe,theta:e.theta||"t",h:e.h||"1",l:e.l||"0.5",t:e.t||0,esong:e.esong||0,dsong:e.dsong||0})),ce(le,"finalScope",(e,t)=>{var{esong:r,dsong:i,t:a}=e,o={t:a,esong:r,dsong:i,n:t.n};return o.theta=n.b(e.theta,o),o}),ce(le,"compileHL",e=>({h:n.a("360 * (".concat(e.h,")")),l:n.a("100 * (".concat(e.l,")"))}))},80:function(e,t,r){e.exports=r.p+"0.eac94a45e5b89e748d3b.worker.js"},95:function(e,t,r){e.exports=r.p+"1.60d8ef7bef586153f486.worker.js"},96:function(e,t,r){r.r(t);var n=r(23),i=r(11),a=r.n(i);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){o(this,"renderer",void 0),o(this,"scene",void 0),o(this,"camera",void 0),o(this,"points",void 0),o(this,"z",5),o(this,"setSize",()=>{var e=window.innerWidth,t=window.innerHeight,r=e/t;this.renderer.setSize(e,t),this.camera=new n.d(100,r,.01,1e3),this.camera.position.z=this.z}),o(this,"render",()=>{this.renderer.render(this.scene,this.camera)}),o(this,"updatePoints",e=>{var{d:t,position:r,color:i}=e,{points:o}=this,s=o.geometry;a.a.equal(r.length%t,0),a.a.equal(i.length%3,0);for(var u=0;u<r.length;u++){var c=r[u];!isNaN(c)&&isFinite(c)||(r[u]=2**32-1,isNaN(c)||(r[u]*=Math.sign(c)),console.warn("found value ".concat(c," at index ").concat(u,"; setting to ").concat(r[u]," for rendering")))}s.setAttribute("position",new n.a(r,t)),s.setAttribute("color",new n.a(i,3));var l=5;if(t>2){s.computeBoundingSphere();var f=s.boundingSphere;l=Math.min(5,f.center.z+f.radius+1)}this.camera.position.z=this.z=l,requestAnimationFrame(this.render)}),this.renderer=new n.i,this.setSize(),window.onresize=()=>{this.setSize(),requestAnimationFrame(this.render)},this.points=new n.e(new n.b,new n.f({vertexColors:n.h,size:.001})),this.scene=new n.g,this.scene.add(this.points)}get domElement(){return this.renderer.domElement}}var u,c=r(51),l=r(14),f=r(48),h=r(72),d=r(98),p=r(17),v=r(37),b=new c.a,g=b,m=0;h.a.subscribe(e=>u=e,e=>b.error(e));Object(d.a)(1e3/v.b).subscribe(()=>p.b.animate&&(()=>{var{esong:e,dsong:t}=u;g.next({pipe:p.b.pipe,theta:p.b.theta,h:p.b.h,l:p.b.l,t:m,esong:e,dsong:t}),m+=1/v.b})(),e=>b.error(e));var y=r(18),w=r(19);function O(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){O(a,n,i,o,s,"next",e)}function s(e){O(a,n,i,o,s,"throw",e)}o(void 0)}))}}var j=Object(y.getLogger)("Data");j.setDefaultLevel("info");var x=new c.a,P=x.asObservable(),N=function(){var e=A((function*(){console.info("starting web worker data source"),yield Object(f.b)(navigator.hardwareConcurrency);return{getData:e=>Object(f.a)(e).then(l.a.fromBuffer)}}));return function(){return e.apply(this,arguments)}}();function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}A((function*(){var e,{getData:t}=yield N(),r=0;g.subscribe(function(){var n=A((function*(n){if(!e){j.debug("requesting data with params",n),Date.now()-r>=1e3&&(j.info("sending request for data with params ".concat(Object(w.a)(n))),r=Date.now()),e=t(n);try{x.next(yield e)}catch(e){x.error(e)}finally{e=null}}}));return function(e){return n.apply(this,arguments)}}(),e=>x.error(e))}))();class E{constructor(){for(var e in F(this,"domElement",document.createElement("form")),this.domElement.style.position="absolute",this.domElement.style.bottom="0",this.domElement.style.right="0",this.domElement.style.padding="8px",this.domElement.style.color="white",this.domElement.style.display="flex",this.domElement.style.flexDirection="column",this.domElement.style.alignItems="flex-end",p.b)if(e in S){var t="boolean"==typeof p.b[e]?"checkbox":"text",r=new q(e,t);this.domElement.appendChild(r.domElement)}}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(e=>this.domElement.appendChild(e.domElement))}}var S={pipe:"Pipe Spec",theta:"Theta",h:"Hue",l:"Lightness",animate:"Animate",sound:"♫"};class q{constructor(e,t){this.name=e,this.type=t,F(this,"domElement",document.createElement("span"));var r=document.createElement("input"),n=p.b[e];r.name=e,r.type=t,"checkbox"===t?r.checked=n:r.value=n,r.size=50,r.onchange=()=>{p.b[e]="checkbox"===t?r.checked:r.value};var i=document.createElement("label");i.innerText=S[e],i.style.paddingRight="8px","checkbox"===t&&(i.style.cursor="pointer"),this.domElement.appendChild(i).appendChild(r),p.a[e].subscribe(e=>{var{event:n,newValue:i}=e;n||("checkbox"===t?r.checked=i:r.value=i.toString())})}}Object(y.setDefaultLevel)("info"),document.onreadystatechange=()=>{if("complete"===document.readyState){var e=new s,t=new E;document.body.appendChild(e.domElement),document.body.appendChild(t.domElement),P.subscribe(e.updatePoints,e=>alert("".concat(e.message,"\n").concat(e.stack)))}}}});