parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JZPE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expose=a,exports.proxy=g,exports.transfer=m,exports.windowEndpoint=h,exports.wrap=c,exports.transferHandlers=exports.releaseProxy=exports.proxyMarker=exports.createEndpoint=void 0;const e=Symbol("Comlink.proxy");exports.proxyMarker=e;const t=Symbol("Comlink.endpoint");exports.createEndpoint=t;const n=Symbol("Comlink.releaseProxy");exports.releaseProxy=n;const r=new WeakSet,s=new Map([["proxy",{canHandle:t=>t&&t[e],serialize(e){const{port1:t,port2:n}=new MessageChannel;return a(e,t),[n,[n]]},deserialize:e=>(e.start(),c(e))}],["throw",{canHandle:e=>r.has(e),serialize(e){const t=e instanceof Error;let n=e;return t&&(n={isError:t,message:e.message,stack:e.stack}),[n,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error,e);throw e}}]]);function a(e,t=self){t.addEventListener("message",function n(s){if(!s||!s.data)return;const{id:o,type:c,path:p}=Object.assign({path:[]},s.data),u=(s.data.argumentList||[]).map(x);let d;try{const t=p.slice(0,-1).reduce((e,t)=>e[t],e),n=p.reduce((e,t)=>e[t],e);switch(c){case 0:d=n;break;case 1:t[p.slice(-1)[0]]=x(s.data.value),d=!0;break;case 2:d=n.apply(t,u);break;case 3:d=g(new n(...u));break;case 4:{const{port1:t,port2:n}=new MessageChannel;a(e,n),d=m(t,[t])}break;case 5:d=void 0}}catch(l){d=l,r.add(l)}Promise.resolve(d).catch(e=>(r.add(e),e)).then(e=>{const[r,s]=y(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),5===c&&(t.removeEventListener("message",n),i(t))})}),t.start&&t.start()}function o(e){return"MessagePort"===e.constructor.name}function i(e){o(e)&&e.close()}function c(e,t){return u(e,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function u(e,r=[],s=function(){}){let a=!1;const o=new Proxy(s,{get(t,s){if(p(a),s===n)return()=>b(e,{type:5,path:r.map(e=>e.toString())}).then(()=>{i(e),a=!0});if("then"===s){if(0===r.length)return{then:()=>o};const t=b(e,{type:0,path:r.map(e=>e.toString())}).then(x);return t.then.bind(t)}return u(e,[...r,s])},set(t,n,s){p(a);const[o,i]=y(s);return b(e,{type:1,path:[...r,n].map(e=>e.toString()),value:o},i).then(x)},apply(n,s,o){p(a);const i=r[r.length-1];if(i===t)return b(e,{type:4}).then(x);if("bind"===i)return u(e,r.slice(0,-1));const[c,d]=l(o);return b(e,{type:2,path:r.map(e=>e.toString()),argumentList:c},d).then(x)},construct(t,n){p(a);const[s,o]=l(n);return b(e,{type:3,path:r.map(e=>e.toString()),argumentList:s},o).then(x)}});return o}function d(e){return Array.prototype.concat.apply([],e)}function l(e){const t=e.map(y);return[t.map(e=>e[0]),d(t.map(e=>e[1]))]}exports.transferHandlers=s;const f=new WeakMap;function m(e,t){return f.set(e,t),e}function g(t){return Object.assign(t,{[e]:!0})}function h(e,t=self,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function y(e){for(const[t,n]of s)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:3,name:t,value:r},s]}return[{type:0,value:e},f.get(e)||[]]}function x(e){switch(e.type){case 3:return s.get(e.name).deserialize(e.value);case 0:return e.value}}function b(e,t,n){return new Promise(r=>{const s=v();e.addEventListener("message",function t(n){n.data&&n.data.id&&n.data.id===s&&(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function v(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}
},{}],"J4Nk":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"cLsb":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"UWZO":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"DzKM":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":"cLsb","inherits":"UWZO","process":"pBGv"}],"VCAb":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=require("object-assign");function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=require("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(e){return!n(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=module.exports=q,l=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(l);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function E(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return g(E(t.actual),128)+" "+t.operator+" "+g(E(t.expected),128)}function y(t,e,r,n,i){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function q(t,e){t||y(t,!0,e,"==",s.ok)}function d(t,e,o,u){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),b(t,e,o,u))}return o?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null==t||null==e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=m(t),a=m(e);if(o&&!a||!o&&a)return!1;if(o)return d(t=u.call(t),e=u.call(e),r);var c,f,s=A(t),l=A(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(!d(t[c=s[f]],e[c],r,n))return!1;return!0}function v(t,e,r){d(t,e,!0)&&y(t,e,r,"notDeepStrictEqual",v)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t){var e;try{t()}catch(r){e=r}return e}function w(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=S(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&y(o,r,"Missing expected exception"+n);var u="string"==typeof n,a=!t&&o&&!r;if((!t&&i.isError(o)&&u&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),t&&o&&r&&!x(o,r)||!t&&o)throw o}function O(t,e){t||y(t,!0,e,"==",O)}s.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(s.AssertionError,Error),s.fail=y,s.ok=q,s.equal=function(t,e,r){t!=e&&y(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){d(t,e,!1)||y(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){d(t,e,!0)||y(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){d(t,e,!1)&&y(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=v,s.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){w(!0,t,e,r)},s.doesNotThrow=function(t,e,r){w(!1,t,e,r)},s.ifError=function(t){if(t)throw t},s.strict=e(O,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var A=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};
},{"object-assign":"J4Nk","util/":"DzKM"}],"eKDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inf=void 0;const e=Math.pow(2,32)-1;exports.inf=e;
},{}],"YDUe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompositeFn=void 0;var t=e(require("assert")),s=require("../constants");function e(t){return t&&t.__esModule?t:{default:t}}class n{constructor(s){this.fns=s,this.sample=function*(t,s,e){const{fns:i,d:r}=this,[a,...h]=i;if(0==i.length)return[];for(const o of a.sample(t,s,e))this.x.set(o),h.length?n.apply(h,this.x,this.y):this.y.set(o),yield this.y.subarray(0,r)},this.fn=((s,e=new Float32Array(this.d))=>{const{fns:i,domain:r,d:a}=this;return t.default.equal(s.length,r),t.default.equal(e.length,a),this.x.set(s),n.apply(i,this.x,this.y),e.set(this.y.subarray(0,a)),e}),(0,t.default)(s.length,"fns cannot be empty");const e=Math.max(this.domainMax,this.dMax);this.x=new Float32Array(e),this.y=new Float32Array(e)}get first(){return this.fns[0]}get last(){return this.fns[this.fns.length-1]}get domain(){return this.first.domain}get d(){return this.last.d}get domainMax(){return this.fns.reduce((t,s)=>Math.max(s.domain,t),0)}get dMax(){return this.fns.reduce((t,s)=>Math.max(s.d,t),0)}}exports.CompositeFn=n,n.apply=((e,n,i)=>{t.default.equal(n.length,i.length);for(const t of e){t.fn(n.subarray(0,t.domain),i.subarray(0,t.d));for(let t=0;t<i.length;t++)isFinite(i[t])||(i[t]=Math.sign(i[t])*s.inf),isNaN(i[t])&&(i[t]=0);n.set(i)}}),n.Builder=class{constructor(){this.fns=[],this.add=(t=>{const{fns:s,last:e}=this;if(e&&t.domain!==e.d)throw new Error(`Cannot add ${t} to composite, because its domain is not ${e.d}`);return s.push(t),this}),this.build=(()=>new n(this.fns))}get d(){return this.last.d}get last(){return this.fns[this.fns.length-1]}};
},{"assert":"VCAb","../constants":"eKDL"}],"YvuI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("assert"));function e(t){return t&&t.__esModule?t:{default:t}}class a{constructor(e,a,l){this.d=e,this.a=a,this.b=l,this.fn=((e,a=new Float32Array(this.d))=>{const{domain:l,d:o,a:r,b:n}=this;t.default.equal(e.length,l),t.default.equal(a.length,o);for(let t=0;t<o;t++)a[t]=r[t]+e[t]*(n[t]-r[t]);return a}),this.sample=function*(t,e,a){const{d:l,fn:o}=this,r=Math.round(Math.pow(t,1/l)),n=new Float32Array(l);for(let s=e;s<a;s++){for(let t=0;t<l;t++){const e=l-t-1,a=Math.round(s/Math.pow(r,e));n[t]=a%r/(r-1)}yield o(n)}},t.default.equal(a.length,e),t.default.equal(l.length,e),this.domain=e}}exports.default=a,a.nPerLevel=((t,e)=>Math.round(Math.pow(e,1/t)));
},{"assert":"VCAb"}],"tXoz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./interval"));function t(e){return e&&e.__esModule?e:{default:e}}class r{constructor(t,r){this.d=t,this.l=r,this.fn=((e,t)=>this.interval.fn(e,t)),this.interval=new e.default(t,new Array(t).fill(-r/2),new Array(t).fill(r/2)),this.sample=this.interval.sample}get domain(){return this.d}}exports.default=r;
},{"./interval":"YvuI"}],"kRR8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("assert")),e=s(require("./lattice"));function s(t){return t&&t.__esModule?t:{default:t}}class r{constructor(s,r){this.d=s,this.l=r,this.fn=((e,s=new Float32Array(this.d))=>{const{domain:r,d:a,l:o}=this;t.default.equal(e.length,r),t.default.equal(s.length,a);for(let t=0;t<a;t++)s[t]=o*(e[t]-.5);return s}),this.sample=function*(t,e,s){const{d:r}=this,a=1/r/2,o=Math.round(t*a),n=Math.round(e*a),l=Math.round((s-e)*a);let u=0;for(let i=0;i<r;i++)for(const e of[1,-1]){const s=n+Math.min(l,t-u);yield*this.sampleFace(i,e,o,n,s),u+=s-n}},this.sampleFace=function*(t,s,r,a,o){const{d:n,l:l}=this,u=new e.default(n-1,l),i=l/2;for(const e of u.sample(r,a,o)){const r=new Float32Array(n);r.set(e.subarray(0,t)),r.set(e.subarray(t),t+1),r[t]=s*i,yield r}}}get domain(){return this.d}}exports.default=r;
},{"assert":"VCAb","./lattice":"tXoz"}],"Z0iX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Polar=void 0;var e=t(require("assert"));function t(e){return e&&e.__esModule?e:{default:e}}class r{static from(t,r,l=new Float32Array(r.length+1)){e.default.equal(l.length,r.length+1),l[0]=t;for(let e=1;e<l.length;e++){const t=Math.sin(r[e-1]),o=Math.cos(r[e-1]);l[e]=l[0]*t,l[0]*=o}return l}}exports.Polar=r;
},{"assert":"VCAb"}],"FDuc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("assert")),t=s(require("./lattice")),r=require("./polar");function s(e){return e&&e.__esModule?e:{default:e}}class a{constructor(s,a){this.d=s,this.r=a,this.sample=function*(e,r,s){const a=new t.default(this.domain,2*Math.PI);for(const t of a.sample(e,r,s))yield this.fn(t)},this.fn=((t,s=new Float32Array(this.d))=>{const{d:a,r:o}=this;return e.default.equal(t.length,a-1),e.default.equal(s.length,a),r.Polar.from(o,t,s)})}get domain(){return this.d-1}}exports.default=a;
},{"assert":"VCAb","./lattice":"tXoz","./polar":"Z0iX"}],"J5BN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("assert")),t=r(require("./lattice")),s=r(require("./sphere"));function r(e){return e&&e.__esModule?e:{default:e}}class i{constructor(r,i,n){this.d=r,this.r=i,this.t=n,this.sample=function*(e,s,r){const i=new t.default(this.domain,2*Math.PI);for(const t of i.sample(e,s,r))yield this.fn(t)},this.fn=((t,s=new Float32Array(this.d))=>{const{domain:r,d:i,sphere:n,circle:a}=this;e.default.equal(t.length,r),e.default.equal(s.length,i),n.fn(t,s);const u=a.fn(t.subarray(i-2));return s[0]+=u[0],s[i-1]+=u[1],s}),this.sphere=new s.default(r,n),this.circle=new s.default(2,i)}get domain(){return this.d-1}}exports.default=i;
},{"assert":"VCAb","./lattice":"tXoz","./sphere":"FDuc"}],"wjQH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quaternion=void 0;var t=r(require("assert")),e=r(require("./interval"));function r(t){return t&&t.__esModule?t:{default:t}}class s{constructor(r,s,i,n,a){this.d=r,this.r=s,this.i=i,this.j=n,this.k=a,this.sample=function*(t,r,s){const{d:i,fn:n}=this,a=new Array(i).fill(0),o=new Array(i).fill(1),l=new e.default(i,a,o);for(const e of l.sample(t,r,s))yield n(e)},this.fn=((e,r=new Float32Array(this.d))=>{const{d:s,domain:i,q:n,r:a,i:o,j:l,k:u}=this;return t.default.equal(e.length,i,`Quaternion: expected x to be of dimension ${s}, but was ${e.length}`),n.fill(0),n.set(e),n[0]=n[0]*a-n[1]*o-n[2]*l-n[3]*u,n[1]=n[0]*o+n[1]*a+n[2]*u-n[3]*l,n[2]=n[0]*l-n[1]*u+n[2]*a+n[3]*o,n[3]=n[0]*u+n[1]*l-n[2]*o+n[3]*a,r.set(n.subarray(0,s)),r}),this.q=new Float32Array(Math.max(r,4))}get domain(){return this.d}}exports.Quaternion=s;
},{"assert":"VCAb","./interval":"YvuI"}],"qBgx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("assert")),e=s(require("./lattice"));function s(t){return t&&t.__esModule?t:{default:t}}class d{constructor(s,d,r,i,a=Math.cos,o=Math.sin){this.d=s,this.theta=d,this.d0=r,this.d1=i,this.f0=a,this.f1=o,this.sample=function*(t,s,d){const r=new e.default(this.domain,2);for(const e of r.sample(t,s,d))yield this.fn(e)},this.fn=((e,s=new Float32Array(this.d))=>{const{d:d,d0:r,d1:i,r0:a,r1:o}=this;t.default.equal(e.length,d),t.default.equal(s.length,d),s.set(e);const n=e[r],u=e[i];return s[r]=n*a-u*o,s[i]=n*o+u*a,s}),(0,t.default)(0<=r&&r<s,`Rotator: Expected 0 <= d0 = ${r} < d = ${s}`),(0,t.default)(0<=i&&i<s,`Rotator: Expected 0 <= d1 = ${i} < d = ${s}`),this.r0=a(d),this.r1=o(d)}get domain(){return this.d}}exports.default=d;
},{"assert":"VCAb","./lattice":"tXoz"}],"NTvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.median=exports.sum=exports.variance=exports.std=exports.norm=exports.mad=exports.mean=exports.min=exports.max=exports.dot=exports.argmax=void 0;var t=require("./constants");const e=t=>t,r=(e,r=(t=>Number(t)))=>e.length?e.reduce((t,e,s)=>{const o=r(e);return o>t.x?{x:o,arg:s}:t},{x:-t.inf,arg:-1}).arg:0;exports.argmax=r;const s=(t,e)=>d(t,(t,r)=>t+e[r]);exports.dot=s;const o=(t,s=e)=>t[r(t,s)];exports.max=o;const n=(t,r=e)=>t.length?t.reduce((t,e)=>Math.min(t,r(e))):0;exports.min=n;const x=(t,r=e)=>d(t,r)/t.length;exports.mean=x;const a=t=>{const e=x(t);return x(t,t=>Math.abs(t-e))};exports.mad=a;const p=t=>Math.sqrt(d(t,t=>t*t));exports.norm=p;const c=t=>Math.sqrt(m(t));exports.std=c;const m=t=>{const e=x(t);return x(t,t=>Math.pow(t-e,2))};exports.variance=m;const d=(t,e=((t,e)=>t))=>t.reduce((t,r,s)=>t+e(r,s),0);exports.sum=d;const u=t=>{return t.slice().sort((t,e)=>t-e)[Math.round(t.length/2)]};exports.median=u;
},{"./constants":"eKDL"}],"Hqvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("assert")),t=require("../reducable"),r=a(require("./interval")),i=require("./polar");function a(e){return e&&e.__esModule?e:{default:e}}class s{constructor(a,s,l){this.d=a,this.theta=s,this.r=l,this.sample=function*(e,t,r){for(const i of this.interval.sample(e,t,r))yield this.fn(i)},this.fn=((r,a=new Float32Array(this.d))=>{const{domain:s,d:l,r:n}=this;return e.default.equal(r.length,s),e.default.equal(a.length,l),i.Polar.from(n*(0,t.norm)(r),r,a)}),this.interval=new r.default(this.domain,new Array(this.domain).fill(0),new Array(this.domain).fill(s))}get domain(){return this.d-1}}exports.default=s;
},{"assert":"VCAb","../reducable":"NTvi","./interval":"YvuI","./polar":"Z0iX"}],"LUcK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("assert")),e=r(require("./lattice"));function r(t){return t&&t.__esModule?t:{default:t}}class a{constructor(r,o){this.from=r,this.to=o,this.sample=function*(t,r,a){const o=new e.default(this.domain,2);for(const e of o.sample(t,r,a))yield this.fn(e)},this.fn=((e,r=new Float32Array(this.to))=>{let{from:o,to:s,fromTemp:l,toTemp:n}=this;if(t.default.equal(e.length,o),t.default.equal(r.length,s),o===s)return r.set(e),r;for(l.set(e);o<s;)a.up(l.subarray(0,o),n.subarray(0,++o)),l.set(n);for(;o>s;)a.down(l.subarray(0,o),n.subarray(0,--o)),l.set(n);return r.set(n.subarray(0,s)),r}),this.fromTemp=new Float32Array(Math.max(r,o)),this.toTemp=new Float32Array(Math.max(r,o))}get domain(){return this.from}get d(){return this.to}}exports.default=a,a.up=((e,r)=>{t.default.equal(r.length,e.length+1);const a=o(e),s=a+1;r[0]=(a-1)/s;for(let t=1;t<=e.length;t++)r[t]=2*e[t-1]/s}),a.down=((e,r)=>{t.default.equal(r.length,e.length-1);for(let t=0;t<r.length;t++)r[t]=e[t+1]/(1-e[0])});const o=t=>{let e=0;for(let r=0;r<t.length;r++)e+=t[r]*t[r];return e};
},{"assert":"VCAb","./lattice":"tXoz"}],"N6zX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("assert")),t=a(require("./lattice")),r=a(require("./rotator")),s=a(require("./sphere"));function a(e){return e&&e.__esModule?e:{default:e}}class n{constructor(a,n){this.d=a,this.r=n,this.sample=function*(e,r,s){const a=new t.default(this.domain,2*Math.PI);for(const t of a.sample(e,r,s))yield this.fn(t)},this.fn=((e,t=new Float32Array(this.d))=>{const{d:a,domain:n,r:i}=this;new s.default(2,i[0]).fn(e.subarray(0,1),t.subarray(0,2));for(let s=1;s<n;s++){t[0]+=i[s],new r.default(a,e[s],s-1,s+1).fn(t,t)}return t}),(0,e.default)(a>2,`torus: expected d = ${a} > 2`),(0,e.default)(n.length==this.domain,`torus: expected r.length = ${n.length} == ${this.domain}`)}get domain(){return this.d-1}}exports.default=n;
},{"assert":"VCAb","./lattice":"tXoz","./rotator":"qBgx","./sphere":"FDuc"}],"SQvK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pp=void 0;const e=(e,t=2)=>JSON.stringify(e,null,t);exports.pp=e;
},{}],"Ek7W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Resolver=void 0;var e=require("../fn"),s=h(require("../fn/cube")),t=h(require("../fn/fucked_up_torus")),r=h(require("../fn/lattice")),i=require("../fn/quaternion"),o=h(require("../fn/rotator")),a=h(require("../fn/sphere")),n=h(require("../fn/spiral")),u=h(require("../fn/stereo")),c=h(require("../fn/torus")),l=require("../pp");function h(e){return e&&e.__esModule?e:{default:e}}function p(e,s,t){if(!e)throw{message:t(),scope:s}}class d{constructor(s){this.scope=s,this.resolvePipe=(s=>{const[t,...r]=s.steps,i=this.resolve(s.n,"number");this.expect(i>0,"n","be positive",`was ${i}`);const o=(new e.CompositeFn.Builder).add(this.resolveStep(s.d0,t));for(let e=0;e<r.length;e++){const s=r[e],t=o.d,i=b[s.type](t);o.add(this.resolveStep(i,s))}return{n:i,fn:o.build()}}),this.resolveStep=((e,{type:s,args:t})=>{const r=v[s];return this.expect(r,s,"be defined","was not"),r(e,...t.map(e=>this.resolve(e)))}),this.resolveFn=(({name:e,args:s})=>{const t=Math[e],r=typeof t;return this.expect("function"===r,e,"resolve to a function",`was ${r}`),t(...s.map(e=>this.resolve(e)))}),this.resolveAccess=(({id:e,index:s})=>{const t=this.scope[e];return this.assert(t,()=>`failed to resolve access target ${e}`),"id"===s.kind&&s.id in t?t[s.id]:t[this.resolve(s)]}),this.resolveId=(e=>{let s;if(e in this.scope)s=this.scope[e];else if(e in Math)s=Math[e];else{const t=e.toUpperCase();t in Math&&(s=Math[t])}return this.assert(s,()=>`failed to resolve id ${e}`),s}),this.resolveArith=(({op:e,operands:s})=>{const[t,r]=s.map(e=>this.resolve(e,"number"));return f[e](t,r)}),this.isNodeDynamic=(e=>{switch(e.kind){case"fn":return e.args.some(this.isNodeDynamic);case"id":return"number"==typeof this.resolve(e);case"arith":return e.operands.some(this.isNodeDynamic);default:return!1}})}resolve(e,s){let t;switch(e.kind){case"pipe":t=this.resolvePipe(e);break;case"arith":t=this.resolveArith(e);break;case"number":t=e.value;break;case"fn":t=this.resolveFn(e);break;case"access":t=this.resolveAccess(e);break;case"id":t=this.resolveId(e.id);break;case"paren":t=this.resolve(e.scalar)}if(s){const r=typeof t;this.expect(r===s,e,`be a ${s}`,`was ${r}`)}return"number"===s&&this.expect(!isNaN(t),e,"be a number","was NaN"),t}assert(e,s){p(e,this.scope,s)}expect(e,s,t,r){this.assert(e,()=>`Expected ${(0,l.pp)(s,0)} to ${t}, but ${r}`)}}exports.Resolver=d;const f={"+":(e,s)=>e+s,"-":(e,s)=>null==s?-e:e-s,"*":(e,s)=>e*s,"/":(e,s)=>e/s,"**":(e,s)=>Math.pow(e,s),"^":(e,s)=>Math.pow(e,s)},v={cube:(e,t)=>new s.default(e,t),lattice:(e,s)=>new r.default(e,s),sphere:(e,s)=>new a.default(e,s),spiral:(e,s,t)=>new n.default(e,s,t),torus:(e,...s)=>new c.default(e,new Float32Array(s)),fucked_up_torus:(e,s,r)=>new t.default(e,s,r),rotate:(e,s,t,r,i=Math.cos,a=Math.sin)=>new o.default(e,s,t,r,i,a),stereo:(e,s)=>new u.default(e,s),q:(e,s,t,r,o)=>new i.Quaternion(e,s,t,r,o)},b={cube:e=>e,lattice:e=>e,sphere:e=>e+1,spiral:e=>e+1,torus:e=>e+1,fucked_up_torus:e=>e+1,rotate:e=>e,r:e=>e,stereo:e=>e,q:e=>e};
},{"../fn":"YDUe","../fn/cube":"kRR8","../fn/fucked_up_torus":"J5BN","../fn/lattice":"tXoz","../fn/quaternion":"wjQH","../fn/rotator":"qBgx","../fn/sphere":"FDuc","../fn/spiral":"Hqvi","../fn/stereo":"LUcK","../fn/torus":"N6zX","../pp":"SQvK"}],"ydDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Evaluator=exports.EvaluationError=void 0;var e=s(require("assert")),t=require("./resolver");function s(e){return e&&e.__esModule?e:{default:e}}const{abs:o,min:r,sign:i}=Math;class n extends Error{constructor(e,t){var s;super(null===(s=t)||void 0===s?void 0:s.message),this.context=e,this.cause=t}get name(){return"EvaluationError"}}exports.EvaluationError=n;class a{constructor(s,n,a,u){this.scope=s,this.hsv=a,this.iterate=(()=>{const{n:e,offset:t,size:s}=this,o=this.computePosition(),r=this.computeColor(o);return{n:e,d:this.d,position:o,color:r,offset:t,size:s}}),this.computePosition=(()=>{const{fn:e,n:t,d:s,offset:o,size:r}=this,i=new Float32Array(s*r);let n=0;for(const a of e.sample(t,o,o+r))i.set(a,s*n++);return i}),this.computeColor=(e=>{const{d:t,hsv:s,size:n}=this,a=new Float32Array(3*n),{extent:u}=this.scope;for(let c=0;c<n;c++){const n=e.subarray(c*t,(c+1)*t);this.scope.p=n.map((e,t)=>{const s=u[t];return s?i(e)*r(1,o(e)/s):0});const l=h(360*this.resolveNumber("h",s.h),this.resolveNumber("s",s.s),this.resolveNumber("v",s.v));a.set(l,3*c)}return a}),this.resolver=new t.Resolver(s);const{n:c,fn:l}=this.resolvePipe(n),v=u.offset,f=u.size,m=v+f;(0,e.default)(v>=0,`offset must be non-negative; got ${v}`),(0,e.default)(m<=c,`offset + size must be <= n; got ${v} + ${f} = ${m} > ${c}`),this.n=c,this.fn=l,this.offset=v,this.size=m-v}get d(){return this.fn.d}resolvePipe(e){try{return this.resolver.resolve(e)}catch({message:t,scope:s}){throw{context:"pipe",message:t,scope:s}}}resolveNumber(e,t){try{return this.resolver.resolve(t,"number")}catch({message:s,scope:o}){throw{context:e,message:s,scope:o}}}}function h(e,t,s){e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(1,t));const r=e/60,i=(s=Math.max(0,Math.min(1,s)))*t,n=i*(1-o(r%2-1)),a=s-i;let h;return(h=r<=1?[i,n,0]:r<=2?[n,i,0]:r<=3?[0,i,n]:r<=4?[0,n,i]:r<=5?[n,0,i]:r<=6?[i,0,n]:[0,0,0]).forEach((e,t)=>h[t]=e+a),h}exports.Evaluator=a;
},{"assert":"VCAb","./resolver":"Ek7W"}],"eR6i":[function(require,module,exports) {
"use strict";var e=require("comlink"),r=require("./evaluator");const t={iterate:(e,t)=>{return new r.Evaluator(e.scope,e.pipe,e.hsv,t).iterate()}};(0,e.expose)(t);
},{"comlink":"JZPE","./evaluator":"ydDH"}]},{},["eR6i"], null)
//# sourceMappingURL=worker.e52801e4.js.map