{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/node-libs-browser/node_modules/assert/assert.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./node_modules/loglevel/lib/loglevel.js","webpack:///./src/pp.ts","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/threads/dist/index.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./src/web/renderer/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./src/pipe/pool.ts","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/threads/dist/symbols.js","webpack:///./node_modules/threads/dist/transferable.js","webpack:///./src/data.ts","webpack:///./src/constants.ts","webpack:///./src/fn/interval.ts","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/threads/node_modules/debug/src/browser.js","webpack:///./node_modules/threads/dist/common.js","webpack:///./node_modules/observable-fns/dist.esm/_scheduler.js","webpack:///./node_modules/observable-fns/dist.esm/_symbols.js","webpack:///./node_modules/observable-fns/dist.esm/observable.js","webpack:///./node_modules/observable-fns/dist.esm/unsubscribe.js","webpack:///./node_modules/observable-fns/dist.esm/filter.js","webpack:///./node_modules/observable-fns/dist.esm/flatMap.js","webpack:///./node_modules/observable-fns/dist.esm/_util.js","webpack:///./node_modules/observable-fns/dist.esm/interval.js","webpack:///./node_modules/observable-fns/dist.esm/map.js","webpack:///./node_modules/observable-fns/dist.esm/merge.js","webpack:///./node_modules/observable-fns/dist.esm/subject.js","webpack:///./node_modules/observable-fns/dist.esm/multicast.js","webpack:///./node_modules/observable-fns/dist.esm/scan.js","webpack:///./node_modules/observable-fns/dist.esm/index.js","webpack:///./src/pipe/grammar.pegjs","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/threads/dist/master/implementation.browser.js","webpack:///./node_modules/threads/dist/observable-promise.js","webpack:///./node_modules/threads/dist/master/thread.js","webpack:///./node_modules/threads/dist/types/messages.js","webpack:///./node_modules/symbol-observable/es/ponyfill.js","webpack:///./node_modules/multirange/multirange.js","webpack:///./src/web/audio/power.worklet.ts","webpack:///./src/fn/index.ts","webpack:///./src/fn/cube.ts","webpack:///./src/fn/rotator.ts","webpack:///./src/fn/sphere.ts","webpack:///./src/fn/fucked_up_torus.ts","webpack:///./src/fn/identity.ts","webpack:///./src/fn/spiral.ts","webpack:///./src/fn/stereo.ts","webpack:///./src/fn/torus.ts","webpack:///./src/pipe/resolver.ts","webpack:///./node_modules/multirange/multirange.css?f485","webpack:///./node_modules/multirange/multirange.css","webpack:///./src/web/global.scss?06f6","webpack:///./src/web/global.scss","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./src/pipe/worker.ts","webpack:///./node_modules/threads/dist/master/index.js","webpack:///./node_modules/threads/dist/master/get-bundle-url.browser.js","webpack:///./node_modules/threads/dist/master/pool.js","webpack:///./node_modules/threads/node_modules/debug/src/common.js","webpack:///./node_modules/threads/node_modules/ms/index.js","webpack:///./node_modules/threads/dist/master/spawn.js","webpack:///./node_modules/threads/dist/promise.js","webpack:///./node_modules/threads/dist/types/master.js","webpack:///./node_modules/threads/dist/master/invocation-proxy.js","webpack:///./node_modules/threads/dist/worker/index.js","webpack:///./node_modules/is-observable/index.js","webpack:///./node_modules/symbol-observable/es/index.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/threads/dist/worker/implementation.browser.js","webpack:///./src/web/overlay/overlay.scss?78d5","webpack:///./src/web/overlay/overlay.scss","webpack:///./src/web/renderer/worker.ts","webpack:///./src/web/debug.ts","webpack:///./src/web/error.ts","webpack:///./node_modules/rxjs/_esm5/internal/OuterSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/InnerSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/iterator.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeTo.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArrayLike.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/combineLatest.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack:///./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/async.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/interval.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isNumeric.js","webpack:///./src/pipe/simplifier.ts","webpack:///./node_modules/rxjs/_esm5/internal/BehaviorSubject.js","webpack:///./src/pipe/ast.ts","webpack:///./src/pipe/parser.ts","webpack:///./src/web/overlay/index.ts","webpack:///./src/web/inputs/constants.ts","webpack:///./src/web/inputs/input.ts","webpack:///./src/web/inputs/text.ts","webpack:///./src/web/inputs/toggle.ts","webpack:///./src/web/inputs/index.ts","webpack:///./src/pipe/compiler.ts","webpack:///./src/web/inputs/range.ts","webpack:///./src/web/inputs/action.ts","webpack:///./src/web/audio/constants.ts","webpack:///./src/web/audio/spectrum.ts","webpack:///./src/web/audio/graph.ts","webpack:///./src/web/audio/index.ts","webpack:///./src/web/constants.ts","webpack:///./src/web/params/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack:///./src/web/data.ts","webpack:///./src/web/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","objectAssign","compare","a","b","x","length","y","len","Math","min","isBuffer","global","Buffer","_isBuffer","util","hasOwn","pSlice","Array","slice","functionsHaveNames","pToString","obj","toString","isView","arrbuf","ArrayBuffer","DataView","buffer","assert","ok","regex","getName","func","isFunction","match","truncate","inspect","something","rawname","fail","actual","expected","message","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","isDate","getTime","isRegExp","source","multiline","lastIndex","ignoreCase","Float32Array","Float64Array","Uint8Array","actualIndex","indexOf","push","actualVisitedObjects","isPrimitive","getPrototypeOf","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","objEquiv","expectedException","test","e","Error","isPrototypeOf","_throws","shouldThrow","block","TypeError","error","_tryBlock","userProvidedMessage","isUnexpectedException","isError","options","this","generatedMessage","self","getMessage","captureStackTrace","err","stack","out","fn_name","idx","next_line","substring","inherits","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","keys","extendStatics","setPrototypeOf","__proto__","__extends","__","constructor","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","undefined","Subscriber","_super","destinationOrNext","complete","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","destination","add","SafeSubscriber","next","subscriber","_next","_error","_complete","unsubscribe","closed","_unsubscribeAndRecycle","_parentOrParents","_parentSubscriber","observerOrNext","context","_context","useDeprecatedSynchronousErrorHandling","__tryOrSetError","__tryOrUnsub","wrappedComplete","fn","parent","_unsubscribe","UnsubscriptionError","UnsubscriptionErrorImpl","errors","map","join","Subscription","_subscriptions","empty","remove","index","flattenUnsubscriptionErrors","isArray","sub","isObject","concat","teardown","subscription","EMPTY","tmp","subscriptions","subscriptionIndex","splice","reduce","errs","noop","pipeFromArray","fns","input","prev","Observable","subscribe","_isScalar","_subscribe","lift","observable","sink","nextOrObserver","rxSubscriber","toSubscriber","_trySubscribe","observer","_a","closed_1","canReportError","console","warn","forEach","promiseCtor","getPromiseCtor","resolve","reject","pipe","operations","_i","toPromise","root","definition","undefinedType","isIE","window","navigator","userAgent","logMethods","bindMethod","methodName","method","Function","apply","traceForIE","log","trace","replaceLoggingMethods","level","loggerName","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","realMethod","Logger","defaultLevel","factory","currentLevel","storageKey","getPersistedLevel","storedLevel","localStorage","ignore","cookie","document","location","encodeURIComponent","exec","levels","getLevel","setLevel","persist","toUpperCase","SILENT","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","pp","JSON","stringify","hostReportError","setTimeout","__export","index_1","expose","transferable_1","Transfer","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","subject","Subject","extentStream","asObservable","renderThread","spawn","Worker","initRenderer","canvas","extent","init","innerWidth","innerHeight","render","updateRenderer","data","update","onresize","resize","random","pool","poolSize","hardwareConcurrency","startPool","info","Pool","Map","promises","queue","all","initialize","params","timing","forkJoin","chunk","w","iterate","getOrInitialize","hv","getKey","has","resolver","Resolver","scope","staticFn","dynamicFn","Data","bufferFor","set","op","size","round","offset","label","start","Date","now","elapsed","runPipeline","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","nextTick","args","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","$errors","$events","$terminate","$transferable","$worker","symbols_1","isTransferDescriptor","thing","payload","transferables","send","position","color","nOffset","positionOffset","d0","SharedArrayBuffer","inputOffset","arr","subarray","inputLength","positionLength","colorOffset","stride","inf","Interval","limit","nPerLevel","points","pop","successors","domain","pow","memo","isOldIE","Boolean","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","modulesToDom","list","part","css","media","sourceMap","addStyle","insertStyleElement","style","createElement","attributes","nonce","setAttribute","insert","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","firstChild","singleton","singletonCounter","styleIndex","parentNode","removeStyleElement","newObj","base","newList","j","useSourceMap","item","content","cssMapping","sourceMapping","base64","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","formatArgs","useColors","namespace","humanize","diff","lastC","replace","save","namespaces","storage","setItem","removeItem","load","getItem","DEBUG","type","__nwjs","toLowerCase","documentElement","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","localstorage","colors","formatters","v","rehydrateError","assign","serializeError","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","result","done","then","AsyncSerialScheduler","_baseObserver","_pendingPromises","Set","catch","task","prevPromisesCompletion","values","promise","delete","hasSymbols","hasSymbol","getSymbol","asyncIterator","for","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","ctor","enqueue","cleanupSubscription","cleanup","_cleanup","closeSubscription","_observer","_queue","_state","notifySubscription","onNotify","flushSubscription","subscriptionObserver","SubscriptionObserver","_subscription","_subscriber","onError","onComplete","first","mappers","intermediate","mapper","tapObserver","propagatedValue","seed","C","hasSeed","hasValue","acc","startNext","from","outer","normalizedValue","inner","innerValue","completeIfDone","observableMethod","isObservable","iteratorMethod","items","symbol","configurable","scheduler","schedule","__asyncValues","__values","iterator","verb","settle","e_1","mapped","isAsyncIterator","mapped_1_1","mapped_1","element","e_1_1","return","output","interval","period","counter","handle","setInterval","clearInterval","observables","completed","unsubscribeAll","super","_observers","coldObservable","sourceSubscription","subscriberCount","accumulator","accumulated","prevAcc","peg$SyntaxError","found","child","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","escapedParts","parts","classEscape","inverted","any","end","other","description","hex","ch","charCodeAt","descriptions","describeExpected","describeFound","SyntaxError","parse","peg$result","peg$FAILED","peg$startRuleFunctions","peg$parsepipe","scalar","peg$parsescalar","peg$startRuleFunction","peg$c0","steps","kind","peg$c1","peg$otherExpectation","peg$c2","peg$computeLocation","peg$savedPos","peg$currPos","peg$buildStructuredError","peg$c3","tail","peg$c4","peg$c5","peg$c6","peg$c7","peg$literalExpectation","peg$c8","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","peg$c28","peg$c29","peg$c30","peg$c31","arg","peg$c32","peg$c33","operands","peg$c34","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","id","peg$c41","parens","peg$c42","peg$c43","peg$c44","peg$c45","f","parseFloat","peg$c46","peg$c47","peg$c48","peg$c49","peg$classExpectation","peg$c50","peg$c51","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c66","peg$c67","peg$c68","peg$c69","peg$c70","peg$c71","peg$c72","peg$c73","peg$c74","peg$c75","peg$c76","peg$c77","peg$c78","peg$c79","peg$c80","peg$c81","peg$c82","peg$c83","peg$c84","peg$c85","peg$c86","peg$c87","peg$c88","peg$c89","peg$c90","peg$c91","peg$c92","peg$c93","peg$c94","peg$c95","peg$c96","peg$c97","peg$c98","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","peg$buildSimpleError","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","s0","s2","s4","s6","peg$parse_","peg$parsepint","peg$parseconnector","peg$parsesteps","s1","s3","peg$parsestep","peg$parseuint","substr","peg$parsefn_args","peg$parsecube","peg$parsesphere","peg$parsespiral","peg$parsetorus","peg$parsefucked_up_torus","charAt","peg$parserotate","peg$parsestereo","peg$parseterm","peg$parseoperator","s5","peg$parsemantissa","peg$parseint","peg$parsefloat","peg$parsenumber","peg$parseidentifier","peg$parselbrack","peg$parserbrack","peg$parseid","peg$parselparen","peg$parserparen","peg$parsefn_args_list","peg$parsecomma","peg$parse__","max","SubjectSubscription","observers","subscriberIndex","SubjectSubscriber","hasError","thrownError","copy","AnonymousSubject","g","get_bundle_url_browser_1","defaultPoolSize","isAbsoluteURL","createSourceBlobURL","code","blob","Blob","URL","createObjectURL","default","selectWorkerImplementation","url","_baseURL","getBundleURL","observable_fns_1","doNothing","returnInput","runDeferred","ObservablePromise","initHasRun","fulfillmentCallbacks","rejectionCallbacks","firstValue","rejection","firstValueSet","state","originalObserver","onFulfilled","onCompletion","onRejected","onNext","onFulfilledRaw","onRejectedRaw","onRejectedCalled","rejectionCallback","anotherError","finally","onCompleted","makeHot","async","someObserver","Thread","thread","events","terminate","MasterMessageType","WorkerMessageType","symbolObservablePonyfill","supportsMultiple","HTMLInputElement","descriptor","getOwnPropertyDescriptor","multirange","classList","contains","getAttribute","split","ghost","cloneNode","nextSibling","defineProperties","valueLow","originalValue","valueHigh","oninput","addEventListener","setProperty","querySelectorAll","CompositeFn","rest","sample","domainMax","dMax","last","isFinite","sign","Cube","fill","Rotator","theta","d1","f0","cos","f1","sin","cube","r0","r1","Sphere","PI","phi","FuckedUpTorus","sphere","circle","q","Identity","Spiral","k","exp","Stereo","to","fromTemp","toTemp","up","down","temp","n2","norm2","divisor","Torus","cross","rotator","links","link","resolveStep","buildComposites","builder","Builder","isDynamic","shift","build","ranges","funs","some","isNodeDynamic","idu","ops","node","hint","resolvePipe","resolveFn","resolveAccess","resolveId","resolveArith","isNaN","spiral","torus","fucked_up_torus","rotate","stereo","api","exported","locals","___CSS_LOADER_API_IMPORT___","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","test1","String","getOwnPropertyNames","test2","fromCharCode","test3","letter","shouldUseNative","symbols","getOwnPropertyDescriptors","descriptors","formatRegExp","format","isString","objects","str","Number","_","isNull","deprecate","msg","noDeprecation","warned","throwDeprecation","traceDeprecation","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","arrayToHash","formatError","braces","toUTCString","formatProperty","formatArray","cur","numLinesEst","reduceToSingleString","desc","ar","re","objectToString","pad","debuglog","NODE_DEBUG","pid","isNullOrUndefined","isSymbol","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","writable","promiseResolve","promiseReject","custom","callbackify","callbackified","maybeCb","rej","readUInt8","superCtor","super_","TempCtor","__importDefault","mod","implementation_1","pool_1","spawn_1","thread_1","bundleURL","getBaseURL","matches","debug_1","observable_promise_1","nextPoolID","PoolEventType","PoolConstructor","spawnWorker","optionsOrSize","trim","concurrency","isClosing","nextTaskID","taskQueue","initErrors","workers","count","createArray","runningTasks","spawnWorkers","eventSubject","eventObservable","worker","initialized","scheduleWork","availableWorker","maxConcurrency","find","findIdlingWorker","nextTask","taskQueueDrained","workerID","runPromise","ms","taskStart","taskID","returnValue","taskCompleted","taskFailed","runPoolTask","someRunPromise","allowResolvingImmediately","getCurrentlyRunningTasks","flattened","flatMap","poolEventPromise","event","race","taskFunction","resultPromiseThen","someTask","taskCanceled","resultPromise","eventSubscription","terminated","taskQueued","force","remainingQueue","EventType","selectColor","createDebug","abs","prevTime","enabled","curr","coerce","unshift","formatter","destroy","extend","instances","delimiter","newDebug","toNamespace","regexp","disable","names","skips","enable","instance","h","plural","msAbs","isPlural","long","fmtLong","fmtShort","common_1","promise_1","master_1","invocation_proxy_1","debugMessages","debugSpawn","debugThreadUtils","isInitMessage","isUncaughtErrorMessage","initMessageTimeout","THREADS_WORKER_INIT_TIMEOUT","setPrivateThreadProps","raw","workerEvents","workerErrors","WorkerEventType","internalError","errorEvent","exposed","timeoutInMs","errorMessage","timeoutHandle","withTimeout","messageHandler","removeEventListener","receiveInitMessage","termination","createPromiseWithResolver","createTerminator","workerTermination","messageEvent","workerEvent","rejectionHandler","terminationEvent","createEventObservable","createProxyFunction","createProxyModule","methods","resolvedTo","alreadyResolved","messages_1","nextJobUID","dedupe","isJobErrorMessage","isJobResultMessage","isJobStartMessage","running","rawArgs","uid","prepareArguments","runMessage","postMessage","jobUID","asyncType","resultType","createObservablePromiseForJob","methodNames","proxy","is_observable_1","transferable_2","exposeCalled","isMasterJobRunMessage","isZenObservable","deconstructTransfer","postJobErrorMessage","rawError","postMessageToMaster","postJobResultMessage","resultValue","resultMessage","postUncaughtErrorMessage","uncaughtError","runFunction","syncResult","startMessage","postJobStartMessage","isWorkerRuntime","subscribeToMasterMessages","messageData","initMessage","postFunctionInitMessage","postModuleInitMessage","symbolObservable","originalModule","webpackPolyfill","children","transferList","onMessage","_debug","OuterSubscriber","notifyNext","outerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","InnerSubscriber","subscribeToArray","getSymbolIterator","subscribeTo","obs","isPromise","iterable","subscribeToResult","outerSubscriber","fromArray","scheduleArray","NONE","CombineLatestOperator","resultSelector","CombineLatestSubscriber","active","toRespond","unused","oldVal","_tryResultSelector","AsyncAction","work","pending","delay","recycleAsyncId","requestAsyncId","flush","execute","_execute","errored","errorValue","actions","Action","Scheduler","SchedulerAction","AsyncScheduler","delegate","scheduled","action","dispatch","Simplifier","substitutions","simplifyStepNode","simplifyFnNode","simplifyAccessNode","simplifyIdNode","simplifyArithNode","simplifyScalar","BehaviorSubject","_value","getValue","print","printPipe","printStep","expr","printArith","printNumber","printFn","printAccess","printId","Parser","overlayElement","getElementById","persistenceEnabled","URLSearchParams","search","Input","defaultText","persistent","disabled","newValue","el","_setup","newSubject","oldValue","updateHash","TextInput","onchange","setSize","stream","lines","rows","cols","ToggleInput","bool","onclick","display","minDbs","compiler","ast","parsePipe","parseScalar","compile","compilePipe","compileScalar","inputs","animate","mic","AudioContext","audioWorklet","fullscreen","fullscreenEnabled","allowedDbs","minEl","maxEl","innerText","ev","toBlob","download","href","click","revokeObjectURL","AUDIO_PLACEHOLDER","power","chroma","tempo","onset","binCount","octaveCount","Spectrum","dbMin","dbMax","floor","octave","AudioGraph","close","AudioWorkletNode","numberOfInputs","channelCountMode","channelCount","port","onmessage","onprocessorerror","connect","parameters","setValueAtTime","currentTime","BiquadFilterNode","frequency","Q","mediaStream","addModule","processorUrl","MediaStreamAudioSourceNode","graph","audioStream","mediaDevices","getUserMedia","audio","fftSize","paramsStream","simplify","maybeEmit","combineLatest","dataStream","webWorkerSource","getData","fromBuffer","inFlight","logged","overlay","hasHover","activeElement","domElement","opacity","setup","body","requestFullscreen","fullscreenElement","exitFullscreen","selector","onkeydown","repeat","setupInputs","setupKeyboardShortcuts","onmouseover","onmouseout","lastMouseMove","maybeSetCursorInactive","hasAttention","hide","onmousemove","show","onreadystatechange","readyState","transferControlToOffscreen","alert"],"mappings":"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","file":"index.955e959fad190e6c8dac.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/stereo/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 68);\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","export const pp = (a: any, p = 2) => JSON.stringify(a, null, p);\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./master/index\"));\nvar index_1 = require(\"./worker/index\");\nexports.expose = index_1.expose;\nvar transferable_1 = require(\"./transferable\");\nexports.Transfer = transferable_1.Transfer;\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","import { Subject } from 'rxjs';\nimport { ModuleThread, Transfer, Worker, spawn } from 'threads';\n\nimport { Data } from '../../data';\nimport { RenderThread } from './worker';\n\nconst subject = new Subject<[number, number, number]>();\nexport const extentStream = subject.asObservable();\n\nconst renderThread: Promise<ModuleThread<RenderThread>> = spawn<RenderThread>(\n  new Worker('./worker', { name: 'renderer' })\n);\n\nexport const initRenderer = async (canvas: OffscreenCanvas) => {\n  const extent = await (await renderThread).init(\n    Transfer(canvas as any), // cast to any because Transferable typedef is broken\n    window.innerWidth,\n    window.innerHeight\n  );\n  subject.next(extent);\n};\n\nexport const render = async () => (await renderThread).render();\n\nexport const updateRenderer = async (data: Data) => {\n  const extent = await (await renderThread).update(data);\n  subject.next(extent);\n};\n\nwindow.onresize = async () => {\n  const extent = await (await renderThread).resize(\n    window.innerWidth,\n    window.innerHeight\n  );\n  subject.next(extent);\n};\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","import { getLogger } from 'loglevel';\nimport { ModuleThread, Pool, Worker, spawn } from 'threads';\n\nimport { Data } from '../data';\nimport { Resolver } from './resolver';\nimport { Chunk, Params, PipelineWorker } from './types';\n\nconst logger = getLogger('PipelinePool');\nlet pool: Pool<ModuleThread<PipelineWorker>>;\nlet data: Map<string, SharedArrayBuffer>;\nlogger.setLevel('info');\n\nexport const poolSize = navigator.hardwareConcurrency;\n\nexport const startPool = async () => {\n  logger.info('starting worker pool');\n  let i = 0;\n  pool = Pool(\n    () => spawn(new Worker('./worker', { name: `pipe${i++}` })),\n    poolSize\n  );\n  data = new Map();\n  let promises = [];\n  for (let i = 0; i < poolSize; i++) {\n    // pre-load scripts so the first task doesn't take forever\n    promises.push(pool.queue(async () => {}));\n  }\n  await Promise.all(promises);\n};\n\nexport const stopPool = async (): Promise<void> => {\n  logger.info('waiting for pending tasks to complete before terminating pool');\n  try {\n    await pool.terminate(true);\n  } catch (err) {\n    logger.error(err);\n  } finally {\n    pool = null;\n  }\n};\n\nconst initialize = (\n  params: Params,\n  n: number,\n  buffer: SharedArrayBuffer\n): Promise<void> => {\n  return timing('initialization')(async () => {\n    return forkJoin(n, async chunk => {\n      return pool.queue(w => w.initialize(params, chunk, buffer));\n    });\n  });\n};\n\nconst iterate = (params: Params, buffer: SharedArrayBuffer) => {\n  return timing('iteration')(async () => {\n    return forkJoin(params.pipe.n, async chunk => {\n      return pool.queue(w => w.iterate(params, chunk, buffer));\n    });\n  });\n};\n\nconst getKey = (params: Params) =>\n  JSON.stringify({\n    pipe: params.pipe,\n    hv: params.hv\n  });\n\nconst getOrInitialize = async (params: Params): Promise<SharedArrayBuffer> => {\n  const key = getKey(params);\n  if (!data.has(key)) {\n    const resolver = new Resolver(params.scope);\n    const { n, staticFn, dynamicFn } = resolver.resolve(params.pipe);\n    const buffer = Data.bufferFor(n, staticFn.d, dynamicFn.d);\n    await initialize(params, n, buffer);\n    data.set(key, buffer);\n  }\n  return data.get(key);\n};\n\nconst forkJoin = async (n: number, op: (chunk: Chunk) => Promise<void>) => {\n  const size = Math.round(n / poolSize);\n  let promises = [];\n  for (let offset = 0; offset < n; offset += size) {\n    const chunk = { offset, size: Math.min(n - offset, size) };\n    promises.push(op(chunk));\n  }\n  await Promise.all(promises);\n};\n\nconst timing = (label: string) => async <T>(op: () => Promise<T>) => {\n  const start = Date.now();\n  const t = await op();\n  const elapsed = Date.now() - start;\n  logger.debug(`${label} took ${elapsed}ms`);\n  return t;\n};\n\nexport const runPipeline = async (\n  params: Params\n): Promise<SharedArrayBuffer> => {\n  const buffer = await getOrInitialize(params);\n  await iterate(params, buffer);\n\n  return buffer.slice(0);\n};\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$errors = Symbol(\"thread.errors\");\nexports.$events = Symbol(\"thread.events\");\nexports.$terminate = Symbol(\"thread.terminate\");\nexports.$transferable = Symbol(\"thread.transferable\");\nexports.$worker = Symbol(\"thread.worker\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst symbols_1 = require(\"./symbols\");\nfunction isTransferable(thing) {\n    if (!thing || typeof thing !== \"object\")\n        return false;\n    // Don't check too thoroughly, since the list of transferable things in JS might grow over time\n    return true;\n}\nfunction isTransferDescriptor(thing) {\n    return thing && typeof thing === \"object\" && thing[symbols_1.$transferable];\n}\nexports.isTransferDescriptor = isTransferDescriptor;\n/**\n * Mark transferable objects within an arbitrary object or array as\n * being a transferable object. They will then not be serialized\n * and deserialized on messaging with the main thread, but ownership\n * of them will be tranferred to the receiving thread.\n *\n * Only array buffers, message ports and few more special types of\n * objects can be transferred, but it's much faster than serializing and\n * deserializing them.\n *\n * Note:\n * The transferable object cannot be accessed by this thread again\n * unless the receiving thread transfers it back again!\n *\n * @param transferable Array buffer, message port or similar.\n * @see <https://developers.google.com/web/updates/2011/12/Transferable-Objects-Lightning-Fast>\n */\nfunction Transfer(payload, transferables) {\n    if (!transferables) {\n        if (!isTransferable(payload))\n            throw Error();\n        transferables = [payload];\n    }\n    return {\n        [symbols_1.$transferable]: true,\n        send: payload,\n        transferables\n    };\n}\nexports.Transfer = Transfer;\n","import assert from 'assert';\n\nexport type Vector = Float32Array;\n\nexport class Data {\n  constructor(\n    readonly n: number,\n    readonly d: number,\n    readonly position: Float32Array,\n    readonly color: Float32Array\n  ) {}\n\n  static fromBuffer = (buffer: ArrayBuffer) => {\n    const data = new Float32Array(buffer);\n    const n = data[Data.nOffset];\n    const d = data[Data.positionOffset(data)];\n    const position = Data.position(data);\n    const color = Data.color(data);\n    return new Data(n, d, position, color);\n  };\n\n  static bufferFor = (n: number, d0: number, d: number): SharedArrayBuffer => {\n    const bytesPerNum = 4;\n    const count = 3 + n * (d0 + d + 3);\n    const byteLength = bytesPerNum * count;\n    const buffer = new SharedArrayBuffer(byteLength);\n    const data = new Float32Array(buffer);\n    data[Data.nOffset] = n;\n    data[Data.inputOffset] = d0;\n    data[Data.positionOffset(data)] = d;\n    return buffer;\n  };\n\n  static input = (arr: Float32Array) => {\n    const offset = Data.inputOffset + 1;\n    return arr.subarray(offset, offset + Data.inputLength(arr));\n  };\n\n  static position = (arr: Float32Array) => {\n    const offset = Data.positionOffset(arr) + 1;\n    return arr.subarray(offset, offset + Data.positionLength(arr));\n  };\n\n  static color = (arr: Float32Array) => {\n    const offset = Data.colorOffset(arr);\n    return arr.subarray(offset);\n  };\n\n  static nOffset = 0;\n\n  static inputOffset = Data.nOffset + 1;\n  private static inputLength = (arr: Float32Array) => {\n    const n = arr[Data.nOffset];\n    const d0 = arr[Data.inputOffset];\n    return n * d0;\n  };\n\n  static positionOffset = (arr: Float32Array) =>\n    Data.inputOffset + Data.inputLength(arr) + 1;\n  private static positionLength = (arr: Float32Array) => {\n    const n = arr[Data.nOffset];\n    const d = arr[Data.positionOffset(arr)];\n    return n * d;\n  };\n\n  static colorOffset = (arr: Float32Array) =>\n    Data.positionOffset(arr) + Data.positionLength(arr) + 1;\n\n  static get = (arr: Vector, i: number, stride: number) => {\n    const offset = i * stride;\n    return arr.subarray(offset, offset + stride);\n  };\n\n  static set = (\n    arr: Vector,\n    value: ArrayLike<number>,\n    i: number,\n    stride: number\n  ) => {\n    assert(value.length <= stride);\n    const offset = i * stride;\n    return arr.set(value, offset);\n  };\n}\n","export const inf = 2 ** 32 - 1;\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport { Fn } from '.';\n\nexport default class Interval implements Fn {\n  readonly domain: number;\n\n  constructor(readonly d: number, readonly a: number[], readonly b: number[]) {\n    assert.equal(a.length, d);\n    assert.equal(b.length, d);\n    this.domain = d;\n  }\n\n  static nPerLevel = (d: number, n: number) => {\n    return Math.round(Math.pow(n, 1 / d));\n  };\n\n  /**\n   * @param x A vector of length this.domain contained in the interval [0, 1].\n   * @returns A mapping of the vector into this interval.\n   */\n  fn = (x: Float32Array, y: Vector = new Float32Array(this.d)) => {\n    const { a, b, d } = this;\n    assert.equal(x.length, d);\n    assert.equal(y.length, d);\n    for (let i = 0; i < d; i++) {\n      y[i] = a[i] + x[i] * (b[i] - a[i]);\n    }\n    return y;\n  };\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const { d, fn } = this;\n    n = Interval.nPerLevel(d, n);\n    const points: number[][] = [[]];\n    let i = 0;\n\n    while (points.length && i < limit) {\n      const p = points.pop()!;\n      if (p.length < d) {\n        points.push(...successors(p));\n      } else if (i++ >= offset) {\n        yield fn(p);\n      }\n    }\n\n    function* successors(p: number[]): Generator<number[]> {\n      for (let i = 0; i < n; i++) {\n        yield [...p, i / n];\n      }\n    }\n  };\n}\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = {};\n\nfunction modulesToDom(moduleId, list, options) {\n  for (var i = 0; i < list.length; i++) {\n    var part = {\n      css: list[i][1],\n      media: list[i][2],\n      sourceMap: list[i][3]\n    };\n\n    if (stylesInDom[moduleId][i]) {\n      stylesInDom[moduleId][i](part);\n    } else {\n      stylesInDom[moduleId].push(addStyle(part, options));\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (moduleId, list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  moduleId = options.base ? moduleId + options.base : moduleId;\n  list = list || [];\n\n  if (!stylesInDom[moduleId]) {\n    stylesInDom[moduleId] = [];\n  }\n\n  modulesToDom(moduleId, list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    if (!stylesInDom[moduleId]) {\n      stylesInDom[moduleId] = [];\n    }\n\n    modulesToDom(moduleId, newList, options);\n\n    for (var j = newList.length; j < stylesInDom[moduleId].length; j++) {\n      stylesInDom[moduleId][j]();\n    }\n\n    stylesInDom[moduleId].length = newList.length;\n\n    if (stylesInDom[moduleId].length === 0) {\n      delete stylesInDom[moduleId];\n    }\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    for (var i = 0; i < modules.length; i++) {\n      var item = [].concat(modules[i]);\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\nfunction log(...args) {\n\t// This hackery is required for IE8/9, where\n\t// the `console.log` function doesn't have 'apply'\n\treturn typeof console === 'object' &&\n\t\tconsole.log &&\n\t\tconsole.log(...args);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction rehydrateError(error) {\n    return Object.assign(Error(error.message), {\n        name: error.name,\n        stack: error.stack\n    });\n}\nexports.rehydrateError = rehydrateError;\nfunction serializeError(error) {\n    return {\n        message: error.message,\n        name: error.name,\n        stack: error.stack\n    };\n}\nexports.serializeError = serializeError;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class AsyncSerialScheduler {\n    constructor(observer) {\n        this._baseObserver = observer;\n        this._pendingPromises = new Set();\n    }\n    complete() {\n        Promise.all(this._pendingPromises)\n            .then(() => this._baseObserver.complete())\n            .catch(error => this._baseObserver.error(error));\n    }\n    error(error) {\n        this._baseObserver.error(error);\n    }\n    schedule(task) {\n        const prevPromisesCompletion = Promise.all(this._pendingPromises);\n        const values = [];\n        const next = (value) => values.push(value);\n        const promise = Promise.resolve()\n            .then(() => __awaiter(this, void 0, void 0, function* () {\n            yield prevPromisesCompletion;\n            yield task(next);\n            this._pendingPromises.delete(promise);\n            for (const value of values) {\n                this._baseObserver.next(value);\n            }\n        }))\n            .catch(error => {\n            this._pendingPromises.delete(promise);\n            this._baseObserver.error(error);\n        });\n        this._pendingPromises.add(promise);\n    }\n}\n","export const hasSymbols = () => typeof Symbol === \"function\";\nexport const hasSymbol = (name) => hasSymbols() && Boolean(Symbol[name]);\nexport const getSymbol = (name) => hasSymbol(name) ? Symbol[name] : \"@@\" + name;\nexport function registerObservableSymbol() {\n    if (hasSymbols() && !hasSymbol(\"observable\")) {\n        Symbol.observable = Symbol(\"observable\");\n    }\n}\nif (!hasSymbol(\"asyncIterator\")) {\n    Symbol.asyncIterator = Symbol.asyncIterator || Symbol.for(\"Symbol.asyncIterator\");\n}\n","/**\n * Based on <https://raw.githubusercontent.com/zenparsing/zen-observable/master/src/Observable.js>\n * At commit: f63849a8c60af5d514efc8e9d6138d8273c49ad6\n */\nimport { getSymbol, hasSymbol, hasSymbols } from \"./_symbols\";\nconst SymbolIterator = getSymbol(\"iterator\");\nconst SymbolObservable = getSymbol(\"observable\");\nconst SymbolSpecies = getSymbol(\"species\");\n// === Abstract Operations ===\nfunction getMethod(obj, key) {\n    const value = obj[key];\n    if (value == null) {\n        return undefined;\n    }\n    if (typeof value !== \"function\") {\n        throw new TypeError(value + \" is not a function\");\n    }\n    return value;\n}\nfunction getSpecies(obj) {\n    let ctor = obj.constructor;\n    if (ctor !== undefined) {\n        ctor = ctor[SymbolSpecies];\n        if (ctor === null) {\n            ctor = undefined;\n        }\n    }\n    return ctor !== undefined ? ctor : Observable;\n}\nfunction isObservable(x) {\n    return x instanceof Observable; // SPEC: Brand check\n}\nfunction hostReportError(error) {\n    if (hostReportError.log) {\n        hostReportError.log(error);\n    }\n    else {\n        setTimeout(() => { throw error; }, 0);\n    }\n}\nfunction enqueue(fn) {\n    Promise.resolve().then(() => {\n        try {\n            fn();\n        }\n        catch (e) {\n            hostReportError(e);\n        }\n    });\n}\nfunction cleanupSubscription(subscription) {\n    const cleanup = subscription._cleanup;\n    if (cleanup === undefined) {\n        return;\n    }\n    subscription._cleanup = undefined;\n    if (!cleanup) {\n        return;\n    }\n    try {\n        if (typeof cleanup === \"function\") {\n            cleanup();\n        }\n        else {\n            const unsubscribe = getMethod(cleanup, \"unsubscribe\");\n            if (unsubscribe) {\n                unsubscribe.call(cleanup);\n            }\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n}\nfunction closeSubscription(subscription) {\n    subscription._observer = undefined;\n    subscription._queue = undefined;\n    subscription._state = \"closed\";\n}\nfunction flushSubscription(subscription) {\n    const queue = subscription._queue;\n    if (!queue) {\n        return;\n    }\n    subscription._queue = undefined;\n    subscription._state = \"ready\";\n    for (const item of queue) {\n        notifySubscription(subscription, item.type, item.value);\n        if (subscription._state === \"closed\") {\n            break;\n        }\n    }\n}\nfunction notifySubscription(subscription, type, value) {\n    subscription._state = \"running\";\n    const observer = subscription._observer;\n    try {\n        const m = observer ? getMethod(observer, type) : undefined;\n        switch (type) {\n            case \"next\":\n                if (m)\n                    m.call(observer, value);\n                break;\n            case \"error\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer, value);\n                else\n                    throw value;\n                break;\n            case \"complete\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer);\n                break;\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n    if (subscription._state === \"closed\") {\n        cleanupSubscription(subscription);\n    }\n    else if (subscription._state === \"running\") {\n        subscription._state = \"ready\";\n    }\n}\nfunction onNotify(subscription, type, value) {\n    if (subscription._state === \"closed\") {\n        return;\n    }\n    if (subscription._state === \"buffering\") {\n        subscription._queue = subscription._queue || [];\n        subscription._queue.push({ type, value });\n        return;\n    }\n    if (subscription._state !== \"ready\") {\n        subscription._state = \"buffering\";\n        subscription._queue = [{ type, value }];\n        enqueue(() => flushSubscription(subscription));\n        return;\n    }\n    notifySubscription(subscription, type, value);\n}\nexport class Subscription {\n    constructor(observer, subscriber) {\n        // ASSERT: observer is an object\n        // ASSERT: subscriber is callable\n        this._cleanup = undefined;\n        this._observer = observer;\n        this._queue = undefined;\n        this._state = \"initializing\";\n        const subscriptionObserver = new SubscriptionObserver(this);\n        try {\n            this._cleanup = subscriber.call(undefined, subscriptionObserver);\n        }\n        catch (e) {\n            subscriptionObserver.error(e);\n        }\n        if (this._state === \"initializing\") {\n            this._state = \"ready\";\n        }\n    }\n    get closed() {\n        return this._state === \"closed\";\n    }\n    unsubscribe() {\n        if (this._state !== \"closed\") {\n            closeSubscription(this);\n            cleanupSubscription(this);\n        }\n    }\n}\nexport class SubscriptionObserver {\n    constructor(subscription) { this._subscription = subscription; }\n    get closed() { return this._subscription._state === \"closed\"; }\n    next(value) { onNotify(this._subscription, \"next\", value); }\n    error(value) { onNotify(this._subscription, \"error\", value); }\n    complete() { onNotify(this._subscription, \"complete\"); }\n}\n/**\n * The basic Observable class. This primitive is used to wrap asynchronous\n * data streams in a common standardized data type that is interoperable\n * between libraries and can be composed to represent more complex processes.\n */\nexport class Observable {\n    constructor(subscriber) {\n        if (!(this instanceof Observable)) {\n            throw new TypeError(\"Observable cannot be called as a function\");\n        }\n        if (typeof subscriber !== \"function\") {\n            throw new TypeError(\"Observable initializer must be a function\");\n        }\n        this._subscriber = subscriber;\n    }\n    subscribe(nextOrObserver, onError, onComplete) {\n        if (typeof nextOrObserver !== \"object\" || nextOrObserver === null) {\n            nextOrObserver = {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            };\n        }\n        return new Subscription(nextOrObserver, this._subscriber);\n    }\n    pipe(first, ...mappers) {\n        // tslint:disable-next-line no-this-assignment\n        let intermediate = this;\n        for (const mapper of [first, ...mappers]) {\n            intermediate = mapper(intermediate);\n        }\n        return intermediate;\n    }\n    tap(nextOrObserver, onError, onComplete) {\n        const tapObserver = typeof nextOrObserver !== \"object\" || nextOrObserver === null\n            ? {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            }\n            : nextOrObserver;\n        return new Observable(observer => {\n            return this.subscribe({\n                next(value) {\n                    tapObserver.next && tapObserver.next(value);\n                    observer.next(value);\n                },\n                error(error) {\n                    tapObserver.error && tapObserver.error(error);\n                    observer.error(error);\n                },\n                complete() {\n                    tapObserver.complete && tapObserver.complete();\n                    observer.complete();\n                },\n                start(subscription) {\n                    tapObserver.start && tapObserver.start(subscription);\n                }\n            });\n        });\n    }\n    forEach(fn) {\n        return new Promise((resolve, reject) => {\n            if (typeof fn !== \"function\") {\n                reject(new TypeError(fn + \" is not a function\"));\n                return;\n            }\n            function done() {\n                subscription.unsubscribe();\n                resolve();\n            }\n            const subscription = this.subscribe({\n                next(value) {\n                    try {\n                        fn(value, done);\n                    }\n                    catch (e) {\n                        reject(e);\n                        subscription.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n        });\n    }\n    map(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                let propagatedValue = value;\n                try {\n                    propagatedValue = fn(value);\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(propagatedValue);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    filter(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                try {\n                    if (!fn(value))\n                        return;\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(value);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    reduce(fn, seed) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        const hasSeed = arguments.length > 1;\n        let hasValue = false;\n        let acc = seed;\n        return new C(observer => this.subscribe({\n            next(value) {\n                const first = !hasValue;\n                hasValue = true;\n                if (!first || hasSeed) {\n                    try {\n                        acc = fn(acc, value);\n                    }\n                    catch (e) {\n                        return observer.error(e);\n                    }\n                }\n                else {\n                    acc = value;\n                }\n            },\n            error(e) { observer.error(e); },\n            complete() {\n                if (!hasValue && !hasSeed) {\n                    return observer.error(new TypeError(\"Cannot reduce an empty sequence\"));\n                }\n                observer.next(acc);\n                observer.complete();\n            },\n        }));\n    }\n    concat(...sources) {\n        const C = getSpecies(this);\n        return new C(observer => {\n            let subscription;\n            let index = 0;\n            function startNext(next) {\n                subscription = next.subscribe({\n                    next(v) { observer.next(v); },\n                    error(e) { observer.error(e); },\n                    complete() {\n                        if (index === sources.length) {\n                            subscription = undefined;\n                            observer.complete();\n                        }\n                        else {\n                            startNext(C.from(sources[index++]));\n                        }\n                    },\n                });\n            }\n            startNext(this);\n            return () => {\n                if (subscription) {\n                    subscription.unsubscribe();\n                    subscription = undefined;\n                }\n            };\n        });\n    }\n    flatMap(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => {\n            const subscriptions = [];\n            const outer = this.subscribe({\n                next(value) {\n                    let normalizedValue;\n                    if (fn) {\n                        try {\n                            normalizedValue = fn(value);\n                        }\n                        catch (e) {\n                            return observer.error(e);\n                        }\n                    }\n                    else {\n                        normalizedValue = value;\n                    }\n                    const inner = C.from(normalizedValue).subscribe({\n                        next(innerValue) { observer.next(innerValue); },\n                        error(e) { observer.error(e); },\n                        complete() {\n                            const i = subscriptions.indexOf(inner);\n                            if (i >= 0)\n                                subscriptions.splice(i, 1);\n                            completeIfDone();\n                        },\n                    });\n                    subscriptions.push(inner);\n                },\n                error(e) { observer.error(e); },\n                complete() { completeIfDone(); },\n            });\n            function completeIfDone() {\n                if (outer.closed && subscriptions.length === 0) {\n                    observer.complete();\n                }\n            }\n            return () => {\n                subscriptions.forEach(s => s.unsubscribe());\n                outer.unsubscribe();\n            };\n        });\n    }\n    [SymbolObservable]() { return this; }\n    static from(x) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        if (x == null) {\n            throw new TypeError(x + \" is not an object\");\n        }\n        const observableMethod = getMethod(x, SymbolObservable);\n        if (observableMethod) {\n            const observable = observableMethod.call(x);\n            if (Object(observable) !== observable) {\n                throw new TypeError(observable + \" is not an object\");\n            }\n            if (isObservable(observable) && observable.constructor === C) {\n                return observable;\n            }\n            return new C(observer => observable.subscribe(observer));\n        }\n        if (hasSymbol(\"iterator\")) {\n            const iteratorMethod = getMethod(x, SymbolIterator);\n            if (iteratorMethod) {\n                return new C(observer => {\n                    enqueue(() => {\n                        if (observer.closed)\n                            return;\n                        for (const item of iteratorMethod.call(x)) {\n                            observer.next(item);\n                            if (observer.closed)\n                                return;\n                        }\n                        observer.complete();\n                    });\n                });\n            }\n        }\n        if (Array.isArray(x)) {\n            return new C(observer => {\n                enqueue(() => {\n                    if (observer.closed)\n                        return;\n                    for (const item of x) {\n                        observer.next(item);\n                        if (observer.closed)\n                            return;\n                    }\n                    observer.complete();\n                });\n            });\n        }\n        throw new TypeError(x + \" is not observable\");\n    }\n    static of(...items) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        return new C(observer => {\n            enqueue(() => {\n                if (observer.closed)\n                    return;\n                for (const item of items) {\n                    observer.next(item);\n                    if (observer.closed)\n                        return;\n                }\n                observer.complete();\n            });\n        });\n    }\n    static get [SymbolSpecies]() { return this; }\n}\nif (hasSymbols()) {\n    Object.defineProperty(Observable, Symbol(\"extensions\"), {\n        value: {\n            symbol: SymbolObservable,\n            hostReportError,\n        },\n        configurable: true,\n    });\n}\nexport default Observable;\n","/**\n * Unsubscribe from a subscription returned by something that looks like an observable,\n * but is not necessarily our observable implementation.\n */\nfunction unsubscribe(subscription) {\n    if (typeof subscription === \"function\") {\n        subscription();\n    }\n    else if (subscription && typeof subscription.unsubscribe === \"function\") {\n        subscription.unsubscribe();\n    }\n}\nexport default unsubscribe;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Filters the values emitted by another observable.\n * To be applied to an input observable using `pipe()`.\n */\nfunction filter(test) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        if (yield test(input)) {\n                            next(input);\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default filter;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport { isAsyncIterator, isIterator } from \"./_util\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable. In contrast to `map()`\n * the `mapper` function returns an array of values that will be emitted\n * separately.\n * Use `flatMap()` to map input values to zero, one or multiple output\n * values. To be applied to an input observable using `pipe()`.\n */\nfunction flatMap(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        var e_1, _a;\n                        const mapped = yield mapper(input);\n                        if (isIterator(mapped) || isAsyncIterator(mapped)) {\n                            try {\n                                for (var mapped_1 = __asyncValues(mapped), mapped_1_1; mapped_1_1 = yield mapped_1.next(), !mapped_1_1.done;) {\n                                    const element = mapped_1_1.value;\n                                    next(element);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (mapped_1_1 && !mapped_1_1.done && (_a = mapped_1.return)) yield _a.call(mapped_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                        }\n                        else {\n                            mapped.map(output => next(output));\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default flatMap;\n","/// <reference lib=\"es2018\" />\nimport { hasSymbol } from \"./_symbols\";\nexport function isAsyncIterator(thing) {\n    return thing && hasSymbol(\"asyncIterator\") && thing[Symbol.asyncIterator];\n}\nexport function isIterator(thing) {\n    return thing && hasSymbol(\"iterator\") && thing[Symbol.iterator];\n}\n","import { Observable } from \"./observable\";\n/**\n * Creates an observable that yields a new value every `period` milliseconds.\n * The first value emitted is 0, then 1, 2, etc. The first value is not emitted\n * immediately, but after the first interval.\n */\nexport default function interval(period) {\n    return new Observable(observer => {\n        let counter = 0;\n        const handle = setInterval(() => {\n            observer.next(counter++);\n        }, period);\n        return () => clearInterval(handle);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable to different values.\n * To be applied to an input observable using `pipe()`.\n */\nfunction map(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const mapped = yield mapper(input);\n                        next(mapped);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default map;\n","import { Observable } from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction merge(...observables) {\n    if (observables.length === 0) {\n        return Observable.from([]);\n    }\n    return new Observable(observer => {\n        let completed = 0;\n        const subscriptions = observables.map(input => {\n            return input.subscribe({\n                error(error) {\n                    observer.error(error);\n                    unsubscribeAll();\n                },\n                next(value) {\n                    observer.next(value);\n                },\n                complete() {\n                    if (++completed === observables.length) {\n                        observer.complete();\n                        unsubscribeAll();\n                    }\n                }\n            });\n        });\n        const unsubscribeAll = () => {\n            subscriptions.forEach(subscription => unsubscribe(subscription));\n        };\n        return unsubscribeAll;\n    });\n}\nexport default merge;\n","import Observable from \"./observable\";\n// TODO: This observer iteration approach looks inelegant and expensive\n// Idea: Come up with super class for Subscription that contains the\n//       notify*, ... methods and use it here\n/**\n * A subject is a \"hot\" observable (see `multicast`) that has its observer\n * methods (`.next(value)`, `.error(error)`, `.complete()`) exposed.\n *\n * Be careful, though! With great power comes great responsibility. Only use\n * the `Subject` when you really need to trigger updates \"from the outside\" and\n * try to keep the code that can access it to a minimum. Return\n * `Observable.from(mySubject)` to not allow other code to mutate.\n */\nclass MulticastSubject extends Observable {\n    constructor() {\n        super(observer => {\n            this._observers.add(observer);\n            return () => this._observers.delete(observer);\n        });\n        this._observers = new Set();\n    }\n    next(value) {\n        for (const observer of this._observers) {\n            observer.next(value);\n        }\n    }\n    error(error) {\n        for (const observer of this._observers) {\n            observer.error(error);\n        }\n    }\n    complete() {\n        for (const observer of this._observers) {\n            observer.complete();\n        }\n    }\n}\nexport default MulticastSubject;\n","import Observable from \"./observable\";\nimport Subject from \"./subject\";\nimport unsubscribe from \"./unsubscribe\";\n// TODO: Subject already creates additional observables \"under the hood\",\n//       now we introduce even more. A true native MulticastObservable\n//       would be preferable.\n/**\n * Takes a \"cold\" observable and returns a wrapping \"hot\" observable that\n * proxies the input observable's values and errors.\n *\n * An observable is called \"cold\" when its initialization function is run\n * for each new subscriber. This is how observable-fns's `Observable`\n * implementation works.\n *\n * A hot observable is an observable where new subscribers subscribe to\n * the upcoming values of an already-initialiazed observable.\n *\n * The multicast observable will lazily subscribe to the source observable\n * once it has its first own subscriber and will unsubscribe from the\n * source observable when its last own subscriber unsubscribed.\n */\nfunction multicast(coldObservable) {\n    const subject = new Subject();\n    let sourceSubscription;\n    let subscriberCount = 0;\n    return new Observable(observer => {\n        // Init source subscription lazily\n        if (!sourceSubscription) {\n            sourceSubscription = coldObservable.subscribe(subject);\n        }\n        // Pipe all events from `subject` into this observable\n        const subscription = subject.subscribe(observer);\n        subscriberCount++;\n        return () => {\n            subscriberCount--;\n            subscription.unsubscribe();\n            // Close source subscription once last subscriber has unsubscribed\n            if (subscriberCount === 0) {\n                unsubscribe(sourceSubscription);\n                sourceSubscription = undefined;\n            }\n        };\n    });\n}\nexport default multicast;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction scan(accumulator, seed) {\n    return (observable) => {\n        return new Observable(observer => {\n            let accumulated;\n            let index = 0;\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(value) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const prevAcc = index === 0\n                            ? (typeof seed === \"undefined\" ? value : seed)\n                            : accumulated;\n                        accumulated = yield accumulator(prevAcc, value, index++);\n                        next(accumulated);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default scan;\n","export { default as filter } from \"./filter\";\nexport { default as flatMap } from \"./flatMap\";\nexport { default as interval } from \"./interval\";\nexport { default as map } from \"./map\";\nexport { default as merge } from \"./merge\";\nexport { default as multicast } from \"./multicast\";\nexport { default as Observable } from \"./observable\";\nexport { default as scan } from \"./scan\";\nexport { default as Subject } from \"./subject\";\nexport { default as unsubscribe } from \"./unsubscribe\";\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { pipe: peg$parsepipe, scalar: peg$parsescalar },\n      peg$startRuleFunction  = peg$parsepipe,\n\n      peg$c0 = function(n, d0, steps) {\n        return {kind: 'pipe', n, d0, steps};\n      },\n      peg$c1 = peg$otherExpectation(\"positive integer\"),\n      peg$c2 = function(x) {\n        x = parseInt(x);\n        if (x <= 0) {\n          expected(`a positive integer`);\n        }\n        return x;\n      },\n      peg$c3 = function(head, tail) { return [head, ...tail]; },\n      peg$c4 = function(step) { return [step]; },\n      peg$c5 = peg$otherExpectation(\"cube\"),\n      peg$c6 = \"cube\",\n      peg$c7 = peg$literalExpectation(\"cube\", true),\n      peg$c8 = function(type, args) {\n        return step(type, args, 1);\n      },\n      peg$c9 = peg$otherExpectation(\"sphere\"),\n      peg$c10 = \"sphere\",\n      peg$c11 = peg$literalExpectation(\"sphere\", true),\n      peg$c12 = peg$otherExpectation(\"spiral\"),\n      peg$c13 = \"spiral\",\n      peg$c14 = peg$literalExpectation(\"spiral\", true),\n      peg$c15 = function(type, args) {\n        return step(type, args, 2);\n      },\n      peg$c16 = peg$otherExpectation(\"torus\"),\n      peg$c17 = \"torus\",\n      peg$c18 = peg$literalExpectation(\"torus\", true),\n      peg$c19 = peg$otherExpectation(\"fucked_up_torus\"),\n      peg$c20 = \"fucked_up_torus\",\n      peg$c21 = peg$literalExpectation(\"fucked_up_torus\", true),\n      peg$c22 = peg$otherExpectation(\"rotate\"),\n      peg$c23 = \"r\",\n      peg$c24 = peg$literalExpectation(\"r\", true),\n      peg$c25 = function(args) {\n          return step('rotate', args, 3, 5);\n        },\n      peg$c26 = \"rotate\",\n      peg$c27 = peg$literalExpectation(\"rotate\", true),\n      peg$c28 = peg$otherExpectation(\"stereo\"),\n      peg$c29 = \"stereo\",\n      peg$c30 = peg$literalExpectation(\"stereo\", true),\n      peg$c31 = function(arg) { return [arg]; },\n      peg$c32 = peg$otherExpectation(\"scalar\"),\n      peg$c33 = function(s, op, a) {\n           return {kind: 'arith', op, operands: [s, a]};\n        },\n      peg$c34 = \"-\",\n      peg$c35 = peg$literalExpectation(\"-\", false),\n      peg$c36 = function(t) { return {kind: 'arith', op: '-', operands: [t]}},\n      peg$c37 = peg$otherExpectation(\"term\"),\n      peg$c38 = function(value) { return {kind: 'number', value}; },\n      peg$c39 = function(name, args) {\n          return {kind: 'fn', name: name.toLowerCase(), args};\n        },\n      peg$c40 = function(id, index) { return {kind: 'access', id, index}; },\n      peg$c41 = function(a) { return {...a, parens: true}; },\n      peg$c42 = function(id) { return {kind: 'id', id: id.toLowerCase()}; },\n      peg$c43 = function(args) { return args },\n      peg$c44 = peg$otherExpectation(\"number\"),\n      peg$c45 = function(f) { return parseFloat(f); },\n      peg$c46 = function(i) { return parseInt(i); },\n      peg$c47 = peg$otherExpectation(\"identifier\"),\n      peg$c48 = /^[a-zA-Z]/,\n      peg$c49 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\n      peg$c50 = /^[a-zA-Z0-9]/,\n      peg$c51 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"]], false, false),\n      peg$c52 = function(id) { return id; },\n      peg$c53 = peg$otherExpectation(\"float\"),\n      peg$c54 = /^[+\\-]/,\n      peg$c55 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c56 = /^[0-9]/,\n      peg$c57 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c58 = /^[eE]/,\n      peg$c59 = peg$classExpectation([\"e\", \"E\"], false, false),\n      peg$c60 = peg$otherExpectation(\"integer\"),\n      peg$c61 = peg$otherExpectation(\"unsigned integer\"),\n      peg$c62 = \".\",\n      peg$c63 = peg$literalExpectation(\".\", false),\n      peg$c64 = peg$otherExpectation(\"arithmetic operator\"),\n      peg$c65 = \"+\",\n      peg$c66 = peg$literalExpectation(\"+\", false),\n      peg$c67 = \"*\",\n      peg$c68 = peg$literalExpectation(\"*\", false),\n      peg$c69 = \"/\",\n      peg$c70 = peg$literalExpectation(\"/\", false),\n      peg$c71 = \"**\",\n      peg$c72 = peg$literalExpectation(\"**\", false),\n      peg$c73 = \"^\",\n      peg$c74 = peg$literalExpectation(\"^\", false),\n      peg$c75 = function(op) { return op; },\n      peg$c76 = peg$otherExpectation(\"lparen\"),\n      peg$c77 = \"(\",\n      peg$c78 = peg$literalExpectation(\"(\", false),\n      peg$c79 = peg$otherExpectation(\"rparen\"),\n      peg$c80 = \")\",\n      peg$c81 = peg$literalExpectation(\")\", false),\n      peg$c82 = peg$otherExpectation(\"lbrack\"),\n      peg$c83 = \"[\",\n      peg$c84 = peg$literalExpectation(\"[\", false),\n      peg$c85 = peg$otherExpectation(\"rbrack\"),\n      peg$c86 = \"]\",\n      peg$c87 = peg$literalExpectation(\"]\", false),\n      peg$c88 = peg$otherExpectation(\"comma\"),\n      peg$c89 = \",\",\n      peg$c90 = peg$literalExpectation(\",\", false),\n      peg$c91 = peg$otherExpectation(\"connector\"),\n      peg$c92 = \"->\",\n      peg$c93 = peg$literalExpectation(\"->\", false),\n      peg$c94 = \"=>\",\n      peg$c95 = peg$literalExpectation(\"=>\", false),\n      peg$c96 = peg$otherExpectation(\"whitespace\"),\n      peg$c97 = /^[ \\t\\n\\r]/,\n      peg$c98 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsepipe() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsepint();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseconnector();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsepint();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseconnector();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsesteps();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parse_();\n                if (s7 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c0(s2, s4, s6);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsepint() {\n    var s0, s1;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parseuint();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c2(s1);\n    }\n    s0 = s1;\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c1); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsesteps() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsestep();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseconnector();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesteps();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c3(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsestep();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c4(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsestep() {\n    var s0;\n\n    s0 = peg$parsecube();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsesphere();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsespiral();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsetorus();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsefucked_up_torus();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parserotate();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsestereo();\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecube() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 4).toLowerCase() === peg$c6) {\n      s2 = input.substr(peg$currPos, 4);\n      peg$currPos += 4;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c7); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c8(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c5); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsesphere() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 6).toLowerCase() === peg$c10) {\n      s2 = input.substr(peg$currPos, 6);\n      peg$currPos += 6;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c11); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c8(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c9); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsespiral() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 6).toLowerCase() === peg$c13) {\n      s2 = input.substr(peg$currPos, 6);\n      peg$currPos += 6;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c14); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c15(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c12); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsetorus() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 5).toLowerCase() === peg$c17) {\n      s2 = input.substr(peg$currPos, 5);\n      peg$currPos += 5;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c18); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c15(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c16); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefucked_up_torus() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 15).toLowerCase() === peg$c20) {\n      s2 = input.substr(peg$currPos, 15);\n      peg$currPos += 15;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c21); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c15(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c19); }\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 1).toLowerCase() === peg$c23) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c25(s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 6).toLowerCase() === peg$c26) {\n        s1 = input.substr(peg$currPos, 6);\n        peg$currPos += 6;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c27); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsefn_args();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c25(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c22); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsestereo() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 6).toLowerCase() === peg$c29) {\n      s2 = input.substr(peg$currPos, 6);\n      peg$currPos += 6;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c30); }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c8(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c28); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsestep_args() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsescalar();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsestep_args();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c3(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsescalar();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c31(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescalar() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parseterm();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseoperator();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsescalar();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c33(s1, s2, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseterm();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s1 = peg$c34;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c35); }\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parseterm();\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c36(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c32); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseterm() {\n    var s0, s1, s2, s3, s4;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c38(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseidentifier();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsefn_args();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c39(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseidentifier();\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parselbrack();\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parsescalar();\n            if (s3 !== peg$FAILED) {\n              s4 = peg$parserbrack();\n              if (s4 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c40(s1, s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseid();\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parselparen();\n            if (s1 !== peg$FAILED) {\n              s2 = peg$parsescalar();\n              if (s2 !== peg$FAILED) {\n                s3 = peg$parserparen();\n                if (s3 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c41(s2);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          }\n        }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c37); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseid() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parseidentifier();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c42(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefn_args() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parselparen();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefn_args_list();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parserparen();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c43(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefn_args_list() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsescalar();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsefn_args_list();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c3(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsescalar();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c31(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefloat();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c45(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseint();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parse_();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c46(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c44); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseidentifier() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = peg$currPos;\n      if (peg$c48.test(input.charAt(peg$currPos))) {\n        s4 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c49); }\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = [];\n        if (peg$c50.test(input.charAt(peg$currPos))) {\n          s6 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c51); }\n        }\n        while (s6 !== peg$FAILED) {\n          s5.push(s6);\n          if (peg$c50.test(input.charAt(peg$currPos))) {\n            s6 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c51); }\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = input.substring(s2, peg$currPos);\n      } else {\n        s2 = s3;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c52(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c47); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefloat() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (peg$c54.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c55); }\n    }\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      if (peg$c56.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c57); }\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsemantissa();\n        if (s4 !== peg$FAILED) {\n          if (peg$c58.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c59); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseint();\n            if (s6 !== peg$FAILED) {\n              s2 = [s2, s3, s4, s5, s6];\n              s1 = s2;\n            } else {\n              peg$currPos = s1;\n              s1 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s1;\n            s1 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parseint();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsemantissa();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c53); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseint() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (peg$c54.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c55); }\n    }\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseuint();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c60); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseuint() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c56.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c57); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c56.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c57); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c61); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsemantissa() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c62;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c63); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseuint();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parseoperator() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 43) {\n        s3 = peg$c65;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n      }\n      if (s3 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 45) {\n          s3 = peg$c34;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c35); }\n        }\n        if (s3 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 42) {\n            s3 = peg$c67;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c68); }\n          }\n          if (s3 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 47) {\n              s3 = peg$c69;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c70); }\n            }\n            if (s3 === peg$FAILED) {\n              if (input.substr(peg$currPos, 2) === peg$c71) {\n                s3 = peg$c71;\n                peg$currPos += 2;\n              } else {\n                s3 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c72); }\n              }\n              if (s3 === peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 94) {\n                  s3 = peg$c73;\n                  peg$currPos++;\n                } else {\n                  s3 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c74); }\n                }\n              }\n            }\n          }\n        }\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = input.substring(s2, peg$currPos);\n      } else {\n        s2 = s3;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c75(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c64); }\n    }\n\n    return s0;\n  }\n\n  function peg$parselparen() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s2 = peg$c77;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c78); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c76); }\n    }\n\n    return s0;\n  }\n\n  function peg$parserparen() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 41) {\n        s2 = peg$c80;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c81); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c79); }\n    }\n\n    return s0;\n  }\n\n  function peg$parselbrack() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s2 = peg$c83;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c84); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c82); }\n    }\n\n    return s0;\n  }\n\n  function peg$parserbrack() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 93) {\n        s2 = peg$c86;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c87); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c85); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 44) {\n        s2 = peg$c89;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c90); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c88); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseconnector() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c92) {\n        s3 = peg$c92;\n        peg$currPos += 2;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c93); }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = peg$parse__();\n        if (s3 === peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c94) {\n            s3 = peg$c94;\n            peg$currPos += 2;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c95); }\n          }\n        }\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = input.substring(s2, peg$currPos);\n      } else {\n        s2 = s3;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n\n    return s0;\n  }\n\n  function peg$parse_() {\n    var s0, s1;\n\n    peg$silentFails++;\n    s0 = [];\n    if (peg$c97.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c98); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (peg$c97.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c98); }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c96); }\n    }\n\n    return s0;\n  }\n\n  function peg$parse__() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c97.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c98); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c97.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c98); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c96); }\n    }\n\n    return s0;\n  }\n\n\n    function step(type, args, min, max = min) {\n      if (args.length < min) {\n        error(`expected ${type} to have at least ${min} argument${min == 1 ? '' : 's'}, but found ${args.length} instead`);\n      } else if (args.length > max) {\n        error(`expected ${type} to have at most ${max} argument${max == 1 ? '' : 's'}, but found ${args.length} instead`);\n      }\n      return {kind: 'step', type, args}\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\n// tslint:disable max-classes-per-file\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst get_bundle_url_browser_1 = require(\"./get-bundle-url.browser\");\nconst defaultPoolSize = navigator.hardwareConcurrency || 4;\nconst isAbsoluteURL = (value) => /^(file|https?:)?\\/\\//i.test(value);\nfunction createSourceBlobURL(code) {\n    const blob = new Blob([code], { type: \"application/javascript\" });\n    return URL.createObjectURL(blob);\n}\nfunction selectWorkerImplementation() {\n    if (typeof Worker === \"undefined\") {\n        // Might happen on Safari, for instance\n        // The idea is to only fail if the constructor is actually used\n        return class NoWebWorker {\n            constructor() {\n                throw Error(\"No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.\");\n            }\n        };\n    }\n    return class WebWorker extends Worker {\n        constructor(url, options) {\n            if (typeof url === \"string\" && options && options._baseURL) {\n                url = new URL(url, options._baseURL);\n            }\n            else if (typeof url === \"string\" && !isAbsoluteURL(url) && get_bundle_url_browser_1.getBundleURL().match(/^file:\\/\\//i)) {\n                url = new URL(url, get_bundle_url_browser_1.getBundleURL().replace(/\\/[^\\/]+$/, \"/\"));\n                url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n            }\n            if (typeof url === \"string\" && isAbsoluteURL(url)) {\n                // Create source code blob loading JS file via `importScripts()`\n                // to circumvent worker CORS restrictions\n                url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n            }\n            super(url, options);\n        }\n    };\n}\nexports.default = {\n    defaultPoolSize,\n    selectWorkerImplementation\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst observable_fns_1 = require(\"observable-fns\");\nconst doNothing = () => undefined;\nconst returnInput = (input) => input;\nconst runDeferred = (fn) => Promise.resolve().then(fn);\nfunction fail(error) {\n    throw error;\n}\n/**\n * Creates a hybrid, combining the APIs of an Observable and a Promise.\n *\n * It is used to proxy async process states when we are initially not sure\n * if that async process will yield values once (-> Promise) or multiple\n * times (-> Observable).\n *\n * Note that the observable promise inherits some of zen-observable's characteristics:\n * The `init` function will be called *once for every time anyone subscribes to it*.\n *\n * If this is undesired, derive a hot observable from it using `makeHot()` and\n * subscribe to that.\n */\nfunction ObservablePromise(init) {\n    let initHasRun = false;\n    const fulfillmentCallbacks = [];\n    const rejectionCallbacks = [];\n    let firstValue;\n    let firstValueSet = false;\n    let rejection;\n    let state = \"pending\";\n    const onNext = (value) => {\n        if (!firstValueSet) {\n            firstValue = value;\n            firstValueSet = true;\n        }\n    };\n    const onError = (error) => {\n        state = \"rejected\";\n        rejection = error;\n        for (const onRejected of rejectionCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onRejected(error));\n        }\n    };\n    const onCompletion = () => {\n        state = \"fulfilled\";\n        for (const onFulfilled of fulfillmentCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onFulfilled(firstValue));\n        }\n    };\n    const observable = new observable_fns_1.Observable(originalObserver => {\n        const observer = Object.assign(Object.assign({}, originalObserver), { complete() {\n                originalObserver.complete();\n                onCompletion();\n            },\n            error(error) {\n                originalObserver.error(error);\n                onError(error);\n            },\n            next(value) {\n                originalObserver.next(value);\n                onNext(value);\n            } });\n        const resolve = (value) => {\n            if (value !== undefined) {\n                observer.next(value);\n            }\n            observer.complete();\n        };\n        const reject = observer.error.bind(observer);\n        try {\n            initHasRun = true;\n            return init(resolve, reject, observer);\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n    function then(onFulfilledRaw, onRejectedRaw) {\n        const onFulfilled = onFulfilledRaw || returnInput;\n        const onRejected = onRejectedRaw || fail;\n        let onRejectedCalled = false;\n        return new Promise((resolve, reject) => {\n            const rejectionCallback = (error) => {\n                if (onRejectedCalled)\n                    return;\n                onRejectedCalled = true;\n                try {\n                    resolve(onRejected(error));\n                }\n                catch (anotherError) {\n                    reject(anotherError);\n                }\n            };\n            const fulfillmentCallback = (value) => {\n                try {\n                    resolve(onFulfilled(value));\n                }\n                catch (error) {\n                    rejectionCallback(error);\n                }\n            };\n            if (!initHasRun) {\n                observable.subscribe({ error: rejectionCallback });\n            }\n            if (state === \"fulfilled\") {\n                return resolve(onFulfilled(firstValue));\n            }\n            if (state === \"rejected\") {\n                onRejectedCalled = true;\n                return resolve(onRejected(rejection));\n            }\n            fulfillmentCallbacks.push(fulfillmentCallback);\n            rejectionCallbacks.push(rejectionCallback);\n        });\n    }\n    const catchFn = (onRejected) => {\n        return then(undefined, onRejected);\n    };\n    const finallyFn = (onCompleted) => {\n        onCompleted = onCompleted || doNothing;\n        return then((value) => {\n            onCompleted();\n            return value;\n        }, () => onCompleted());\n    };\n    // tslint:disable-next-line prefer-object-spread\n    return Object.assign(observable, {\n        [Symbol.toStringTag]: \"[object ObservablePromise]\",\n        then: then,\n        catch: catchFn,\n        finally: finallyFn\n    });\n}\nexports.ObservablePromise = ObservablePromise;\n/**\n * Turns a cold observable into a hot observable.\n *\n * Returns a new observable promise that does exactly the same, but acts as a subscription aggregator,\n * so that N subscriptions to it only result in one subscription to the input observable promise.\n *\n * That one subscription on the input observable promise is setup immediately.\n */\nfunction makeHot(async) {\n    let observers = [];\n    async.subscribe({\n        complete() {\n            observers.forEach(observer => observer.complete());\n        },\n        error(error) {\n            observers.forEach(observer => observer.error(error));\n        },\n        next(value) {\n            observers.forEach(observer => observer.next(value));\n        }\n    });\n    const aggregator = ObservablePromise((resolve, reject, observer) => {\n        observers.push(observer);\n        const unsubscribe = () => {\n            observers = observers.filter(someObserver => someObserver !== observer);\n        };\n        return unsubscribe;\n    });\n    return aggregator;\n}\nexports.makeHot = makeHot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst symbols_1 = require(\"../symbols\");\nfunction fail(message) {\n    throw Error(message);\n}\n/** Thread utility functions. Use them to manage or inspect a `spawn()`-ed thread. */\nexports.Thread = {\n    /** Return an observable that can be used to subscribe to all errors happening in the thread. */\n    errors(thread) {\n        return thread[symbols_1.$errors] || fail(\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Return an observable that can be used to subscribe to internal events happening in the thread. Useful for debugging. */\n    events(thread) {\n        return thread[symbols_1.$events] || fail(\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Terminate a thread. Remember to terminate every thread when you are done using it. */\n    terminate(thread) {\n        return thread[symbols_1.$terminate]();\n    }\n};\n","\"use strict\";\n/////////////////////////////\n// Messages sent by master:\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MasterMessageType;\n(function (MasterMessageType) {\n    MasterMessageType[\"run\"] = \"run\";\n})(MasterMessageType = exports.MasterMessageType || (exports.MasterMessageType = {}));\n////////////////////////////\n// Messages sent by worker:\nvar WorkerMessageType;\n(function (WorkerMessageType) {\n    WorkerMessageType[\"error\"] = \"error\";\n    WorkerMessageType[\"init\"] = \"init\";\n    WorkerMessageType[\"result\"] = \"result\";\n    WorkerMessageType[\"running\"] = \"running\";\n    WorkerMessageType[\"uncaughtError\"] = \"uncaughtError\";\n})(WorkerMessageType = exports.WorkerMessageType || (exports.WorkerMessageType = {}));\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","(function() {\n\"use strict\";\n\nvar supportsMultiple = self.HTMLInputElement && \"valueLow\" in HTMLInputElement.prototype;\n\nvar descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, \"value\");\n\nvar multirange = function(input) {\n\tif (supportsMultiple || input.classList.contains(\"multirange\")) {\n\t\treturn;\n\t}\n\n\tvar value = input.getAttribute(\"value\");\n\tvar values = value === null ? [] : value.split(\",\");\n\tvar min = +(input.min || 0);\n\tvar max = +(input.max || 100);\n\tvar ghost = input.cloneNode();\n\n\tinput.classList.add(\"multirange\", \"original\");\n\tghost.classList.add(\"multirange\", \"ghost\");\n\n\tinput.value = values[0] || min + (max - min) / 2;\n\tghost.value = values[1] || min + (max - min) / 2;\n\n\tinput.parentNode.insertBefore(ghost, input.nextSibling);\n\n\tObject.defineProperty(input, \"originalValue\", descriptor.get ? descriptor : {\n\t\t// Fuck you Safari >:(\n\t\tget: function() { return this.value; },\n\t\tset: function(v) { this.value = v; }\n\t});\n\n\tObject.defineProperties(input, {\n\t\tvalueLow: {\n\t\t\tget: function() { return Math.min(this.originalValue, ghost.value); },\n\t\t\tset: function(v) { this.originalValue = v; },\n\t\t\tenumerable: true\n\t\t},\n\t\tvalueHigh: {\n\t\t\tget: function() { return Math.max(this.originalValue, ghost.value); },\n\t\t\tset: function(v) { ghost.value = v; },\n\t\t\tenumerable: true\n\t\t}\n\t});\n\n\tif (descriptor.get) {\n\t\t// Again, fuck you Safari\n\t\tObject.defineProperty(input, \"value\", {\n\t\t\tget: function() { return this.valueLow + \",\" + this.valueHigh; },\n\t\t\tset: function(v) {\n\t\t\t\tvar values = v.split(\",\");\n\t\t\t\tthis.valueLow = values[0];\n\t\t\t\tthis.valueHigh = values[1];\n\t\t\t\tupdate();\n\t\t\t},\n\t\t\tenumerable: true\n\t\t});\n\t}\n\n\tif (typeof input.oninput === \"function\") {\n\t\tghost.oninput = input.oninput.bind(input);\n\t}\n\n\tfunction update() {\n\t\tghost.style.setProperty(\"--low\", 100 * ((input.valueLow - min) / (max - min)) + 1 + \"%\");\n\t\tghost.style.setProperty(\"--high\", 100 * ((input.valueHigh - min) / (max - min)) - 1 + \"%\");\n\t}\n\n\tinput.addEventListener(\"input\", update);\n\tghost.addEventListener(\"input\", update);\n\n\tupdate();\n}\n\nmultirange.init = function() {\n\t[].slice.call(document.querySelectorAll(\"input[type=range][multiple]:not(.multirange)\")).forEach(multirange);\n}\n\nif (typeof module === \"undefined\") {\n\tself.multirange = multirange;\n\tif (document.readyState == \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", multirange.init);\n\t}\n\telse {\n\t\tmultirange.init();\n\t}\n} else {\n\tmodule.exports = multirange;\n}\n\n})();\n","module.exports = __webpack_public_path__ + \"36401cddde65b9c1f686.worklet.js\";","import assert from 'assert';\n\nimport { inf } from '../constants';\nimport { Vector } from '../data';\n\nexport interface Fn {\n  readonly d: number;\n  readonly domain: number;\n  fn(x: Vector, y?: Vector): Vector;\n  sample(n: number, offset: number, limit: number): Generator<Vector>;\n}\n\nexport class CompositeFn implements Fn {\n  private readonly x: Vector;\n  private readonly y: Vector;\n  constructor(readonly fns: Fn[]) {\n    assert(fns.length, 'fns cannot be empty');\n\n    const length = Math.max(this.domainMax, this.dMax);\n    this.x = new Float32Array(length);\n    this.y = new Float32Array(length);\n  }\n\n  get first() {\n    return this.fns[0];\n  }\n\n  get last() {\n    return this.fns[this.fns.length - 1];\n  }\n\n  get domain() {\n    return this.first.domain;\n  }\n\n  get d() {\n    return this.last.d;\n  }\n\n  get domainMax() {\n    return this.fns.reduce((max, f) => Math.max(f.domain, max), 0);\n  }\n\n  get dMax() {\n    return this.fns.reduce((max, f) => Math.max(f.d, max), 0);\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const { fns, d } = this;\n    const [first, ...rest] = fns;\n    if (fns.length == 0) return [];\n\n    for (const x of first.sample(n, offset, limit)) {\n      this.x.set(x);\n      if (rest.length) {\n        CompositeFn.apply(rest, this.x, this.y);\n      } else {\n        this.y.set(x);\n      }\n      yield this.y.subarray(0, d);\n    }\n  };\n\n  fn = (x: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { fns, domain, d } = this;\n    assert.equal(x.length, domain);\n    assert.equal(y.length, d);\n\n    this.x.set(x);\n    CompositeFn.apply(fns, this.x, this.y);\n    y.set(this.y.subarray(0, d));\n    return y;\n  };\n\n  private static apply = (fns: Fn[], x: Vector, y: Vector) => {\n    assert.equal(x.length, y.length);\n    for (const f of fns) {\n      f.fn(x.subarray(0, f.domain), y.subarray(0, f.d));\n      for (let i = 0; i < y.length; i++) {\n        if (!isFinite(y[i])) y[i] = Math.sign(y[i]) * inf;\n      }\n      x.set(y);\n    }\n  };\n\n  static Builder = class {\n    private readonly fns: Fn[] = [];\n\n    get d() {\n      return this.last.d;\n    }\n\n    get last() {\n      return this.fns[this.fns.length - 1];\n    }\n\n    add = (fn: Fn) => {\n      const { fns, last } = this;\n      if (last && fn.domain !== last.d) {\n        throw new Error(\n          `Cannot add ${fn} to composite, because its domain is not ${last.d}`\n        );\n      }\n      fns.push(fn);\n      return this;\n    };\n\n    build = () => {\n      return new CompositeFn(this.fns);\n    };\n  };\n}\n","import { Vector } from '../data';\nimport Interval from './interval';\nimport { Fn } from '.';\n\nexport default class Cube implements Fn {\n  private readonly interval: Interval;\n\n  constructor(readonly d: number, readonly l: number) {\n    this.interval = new Interval(\n      d,\n      new Array(d).fill(-l / 2),\n      new Array(d).fill(l / 2)\n    );\n  }\n\n  get domain() {\n    return this.d;\n  }\n\n  fn = (x: Vector, y?: Vector) => this.interval.fn(x, y);\n\n  sample = (n: number, offset: number, limit: number) =>\n    this.interval.sample(n, offset, limit);\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport { Fn } from '.';\n\nexport default class Rotator implements Fn {\n  readonly r0: number;\n  readonly r1: number;\n\n  constructor(\n    readonly d: number,\n    readonly theta: number,\n    readonly d0: number,\n    readonly d1: number,\n    readonly f0: (theta: number) => number = Math.cos,\n    readonly f1: (theta: number) => number = Math.sin\n  ) {\n    this.r0 = f0(theta);\n    this.r1 = f1(theta);\n  }\n\n  get domain() {\n    return this.d;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 2);\n    for (const p of cube.sample(n, offset, limit)) {\n      yield this.fn(p);\n    }\n  };\n\n  fn = (x: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { d, d0, d1, r0, r1 } = this;\n    assert.equal(x.length, d);\n    assert.equal(y.length, d);\n    y.set(x);\n\n    const a = x[d0],\n      b = x[d1];\n    y[d0] = a * r0 - b * r1;\n    y[d1] = a * r1 + b * r0;\n    return y;\n  };\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport Rotator from './rotator';\nimport { CompositeFn, Fn } from '.';\n\nexport default class Sphere implements Fn {\n  private readonly root: Float32Array;\n\n  constructor(readonly d: number, r: number) {\n    this.root = new Float32Array(d);\n    this.root[0] = r;\n  }\n\n  get domain() {\n    return this.d - 1;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 2 * Math.PI);\n    for (const phi of cube.sample(n, offset, limit)) {\n      yield this.fn(phi);\n    }\n  };\n\n  fn = (phi: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { d, root } = this;\n    assert.equal(phi.length, d - 1);\n    assert.equal(y.length, d);\n\n    const r = new CompositeFn(\n      Array.from(new Array(d - 1).keys()).map(\n        i => new Rotator(d, phi[i], 0, i + 1)\n      )\n    );\n    r.fn(root, y);\n    return y;\n  };\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport Sphere from './sphere';\nimport { Fn } from '.';\n\n// This shape does not implement a torus. It used to,\n// but then I changed the way Rotator works, which\n// changed the way that the points of the sphere are\n// distributed, making the translation step behave incorrectly\n// Still makes a cool shape though, so keeping it\nexport default class FuckedUpTorus implements Fn {\n  private readonly sphere: Sphere;\n  private readonly circle: Sphere;\n\n  constructor(readonly d: number, readonly r: number, readonly t: number) {\n    this.sphere = new Sphere(d, t);\n    this.circle = new Sphere(2, r);\n  }\n\n  get domain() {\n    return this.d - 1;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 2 * Math.PI);\n    for (const phi of cube.sample(n, offset, limit)) {\n      yield this.fn(phi);\n    }\n  };\n\n  fn = (phi: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { domain, d, sphere, circle } = this;\n    assert.equal(phi.length, domain);\n    assert.equal(y.length, d);\n    sphere.fn(phi, y);\n    const q = circle.fn(phi.subarray(d - 2));\n    y[0] += q[0];\n    y[d - 1] += q[1];\n    return y;\n  };\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport { Fn } from '.';\n\nexport class Identity implements Fn {\n  readonly domain: number;\n\n  constructor(readonly d: number) {\n    this.domain = d;\n  }\n\n  fn = (x: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { d } = this;\n    assert.equal(x.length, d);\n    assert.equal(y.length, d);\n    y.set(x);\n    return y;\n  };\n\n  sample = function*(n: number, offset: number, limit: number) {\n    throw new Error('identity function does not support sampling');\n  };\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport Sphere from './sphere';\nimport { Fn } from '.';\n\nexport default class Spiral implements Fn {\n  private readonly sphere: Sphere;\n\n  constructor(readonly d: number, readonly a: number[], readonly k: number[]) {\n    this.sphere = new Sphere(d, 1);\n  }\n\n  get domain() {\n    return this.d - 1;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 4 * Math.PI);\n    for (const phi of cube.sample(n, offset, limit)) {\n      yield this.fn(phi);\n    }\n  };\n\n  fn = (phi: Float32Array, y: Vector = new Float32Array(this.d)) => {\n    const { a, k, domain, d } = this;\n    assert.equal(phi.length, d - 1);\n    assert.equal(y.length, d);\n\n    this.sphere.fn(phi, y);\n    let x = 0;\n    for (let i = 0; i < domain; i++) {\n      x += k[i] * phi[i];\n    }\n    const r = Math.exp(x);\n    for (let i = 0; i < d; i++) {\n      y[i] = y[i] * a[i] * r;\n    }\n    return y;\n  };\n}\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport { Fn } from '.';\n\nexport default class Stereo implements Fn {\n  private readonly fromTemp: Vector;\n  private readonly toTemp: Vector;\n\n  constructor(private readonly from: number, private readonly to: number) {\n    this.fromTemp = new Float32Array(Math.max(from, to));\n    this.toTemp = new Float32Array(Math.max(from, to));\n  }\n\n  get domain() {\n    return this.from;\n  }\n\n  get d() {\n    return this.to;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 2);\n    for (const phi of cube.sample(n, offset, limit)) {\n      yield this.fn(phi);\n    }\n  };\n\n  fn = (x: Vector, y: Vector = new Float32Array(this.to)) => {\n    let { from, to, fromTemp, toTemp } = this;\n    assert.equal(x.length, from);\n    assert.equal(y.length, to);\n\n    if (from === to) {\n      y.set(x);\n      return y;\n    }\n\n    fromTemp.set(x);\n\n    while (from < to) {\n      Stereo.up(fromTemp.subarray(0, from), toTemp.subarray(0, ++from));\n      fromTemp.set(toTemp);\n    }\n\n    while (from > to) {\n      Stereo.down(fromTemp.subarray(0, from), toTemp.subarray(0, --from));\n      fromTemp.set(toTemp);\n    }\n\n    y.set(toTemp.subarray(0, to));\n    return y;\n  };\n\n  static up = (x: Vector, temp: Vector) => {\n    assert.equal(temp.length, x.length + 1);\n    const n2 = norm2(x);\n    const divisor = n2 + 1;\n    temp[0] = (n2 - 1) / divisor;\n    for (let i = 1; i <= x.length; i++) {\n      temp[i] = (2 * x[i - 1]) / divisor;\n    }\n  };\n\n  static down = (x: Vector, temp: Vector) => {\n    assert.equal(temp.length, x.length - 1);\n    for (let i = 0; i < temp.length; i++) {\n      temp[i] = x[i + 1] / (1 - x[0]);\n    }\n  };\n}\n\nconst norm2 = (x: Vector) => {\n  let result = 0;\n  for (let i = 0; i < x.length; i++) {\n    result += x[i] * x[i];\n  }\n  return result;\n};\n","import assert from 'assert';\n\nimport { Vector } from '../data';\nimport Cube from './cube';\nimport Rotator from './rotator';\nimport Sphere from './sphere';\nimport { Fn } from '.';\n\nexport default class Torus implements Fn {\n  private readonly cross: Sphere;\n\n  constructor(readonly d: number, readonly r: number, readonly t: number) {\n    assert(d > 2, `torus is only defined for d > 2; got ${d}`);\n    this.cross = new Sphere(d - 1, t);\n  }\n\n  get domain() {\n    return this.d - 1;\n  }\n\n  sample = function*(n: number, offset: number, limit: number) {\n    const cube = new Cube(this.domain, 2 * Math.PI);\n    for (const phi of cube.sample(n, offset, limit)) {\n      yield this.fn(phi);\n    }\n  };\n\n  fn = (theta: Vector, y: Vector = new Float32Array(this.d)) => {\n    const { cross, d, r } = this;\n    assert.equal(\n      theta.length,\n      d - 1,\n      `torus expects an input of ${d - 1}; got ${theta.length}`\n    );\n    const rotator = new Rotator(d, theta[d - 2], 0, d - 1);\n\n    cross.fn(theta.subarray(0, d - 2), y.subarray(0, d - 1));\n    y[0] += r;\n    rotator.fn(y, y);\n\n    return y;\n  };\n}\n","import assert from 'assert';\n\nimport { CompositeFn, Fn } from '../fn';\nimport Cube from '../fn/cube';\nimport FuckedUpTorus from '../fn/fucked_up_torus';\nimport { Identity } from '../fn/identity';\nimport Rotator from '../fn/rotator';\nimport Sphere from '../fn/sphere';\nimport Spiral from '../fn/spiral';\nimport Stereo from '../fn/stereo';\nimport Torus from '../fn/torus';\nimport { pp } from '../pp';\nimport {\n  AccessNode,\n  ArithNode,\n  FnNode,\n  PipeNode,\n  Scalar,\n  StepNode,\n  Value\n} from './grammar.pegjs';\nimport { Link, Scope, UnaryOperator } from './types';\n\nexport type Resolution = {\n  n: number;\n  staticFn: CompositeFn;\n  dynamicFn: CompositeFn;\n};\n\nexport class Resolver {\n  constructor(private readonly scope: Scope) {}\n\n  resolve(node: PipeNode): Resolution;\n  resolve(node: Scalar, hint: 'number'): number;\n  resolve(node: Scalar, hint: 'function'): Function;\n  resolve(node: Scalar): Value;\n  resolve(node: any, hint?: any): any {\n    let value;\n    switch (node.kind) {\n      case 'pipe':\n        value = this.resolvePipe(node);\n        break;\n      case 'number':\n        value = node.value;\n        break;\n      case 'fn':\n        value = this.resolveFn(node);\n        break;\n      case 'access':\n        value = this.resolveAccess(node);\n        break;\n      case 'id':\n        value = this.resolveId(node.id);\n        break;\n      case 'arith':\n        value = this.resolveArith(node);\n        break;\n    }\n\n    if (hint) {\n      const actual = typeof value;\n      assert.equal(\n        actual,\n        hint,\n        `Expected identifier ${node.id} to resolve to a ${hint}, but was ${actual} instead.`\n      );\n\n      if (hint === 'number' && isNaN(value))\n        assert.fail(\n          `Expected node ${pp(\n            node\n          )} to resolve to a valid value, but was NaN instead.`\n        );\n    }\n\n    return value;\n  }\n\n  private resolvePipe = (pipe: PipeNode): Resolution => {\n    const [head, ...tail] = pipe.steps;\n    const links: Link[] = [];\n    const link = this.resolveStep(pipe.d0, head);\n\n    links.push(link);\n\n    for (let i = 0; i < tail.length; i++) {\n      links.push(this.resolveStep(links[i].fn.d, tail[i]));\n    }\n\n    const [staticFn, dynamicFn] = this.buildComposites(links);\n    return { n: pipe.n, staticFn, dynamicFn };\n  };\n\n  private buildComposites = (links: Link[]) => {\n    let builder = new CompositeFn.Builder();\n    while (links.length && !links[0].isDynamic) {\n      builder.add(links.shift().fn);\n    }\n\n    const init = builder.build();\n    builder = new CompositeFn.Builder().add(new Identity(init.d));\n\n    while (links.length) {\n      builder.add(links.shift().fn);\n    }\n\n    const iter = builder.build();\n    return [init, iter];\n  };\n\n  private resolveStep = (d0: number, { type, args }: StepNode): Link => {\n    const d = ranges[type](d0);\n    const fn = funs[type](d, ...args.map(a => this.resolve(a)));\n    const isDynamic = args.some(this.isNodeDynamic);\n\n    return { fn, isDynamic };\n  };\n\n  private resolveFn = ({ name, args }: FnNode): number => {\n    const fn = Math[name];\n    assert(\n      typeof fn === 'function',\n      `Expected ${name} to be a Math function in ${pp({ name, args })}`\n    );\n    return fn(...args.map(a => this.resolve(a)));\n  };\n\n  private resolveAccess = ({ id, index }: AccessNode): number => {\n    const scope = this.scope;\n    const target = scope[id];\n    assert(target, `Unable to resolve ${id} in scope ${pp(scope, 2)}`);\n    return target[this.resolve(index, 'number')];\n  };\n\n  private resolveId = (id: string): Value => {\n    if (id in this.scope) {\n      return this.scope[id];\n    } else if (id in Math) {\n      return Math[id];\n    } else {\n      const idu = id.toUpperCase();\n      if (idu in Math) return Math[idu];\n    }\n\n    assert.fail(`unable to resolve id ${id} in scope ${pp(this.scope, 2)}`);\n  };\n\n  private resolveArith = ({ op, operands }: ArithNode) => {\n    const [a, b] = operands.map(a => this.resolve(a, 'number'));\n    return ops[op](a, b);\n  };\n\n  private isNodeDynamic = (node: Scalar): boolean => {\n    switch (node.kind) {\n      case 'fn':\n        return node.args.some(this.isNodeDynamic);\n      case 'id':\n        return typeof this.resolve(node) === 'number';\n      case 'arith':\n        return node.operands.some(this.isNodeDynamic);\n      default:\n        return false;\n    }\n  };\n}\n\nconst ops: { [op: string]: (a: number, b: number) => number } = {\n  '+': (a, b) => a + b,\n  '-': (a, b) => (b == null ? -a : a - b),\n  '*': (a, b) => a * b,\n  '/': (a, b) => a / b,\n  '**': (a, b) => a ** b,\n  '^': (a, b) => a ** b\n};\n\nconst funs: { [op: string]: (d: number, ...rest) => Fn } = {\n  cube: (d, l) => new Cube(d, l),\n  sphere: (d, r: number) => new Sphere(d, r),\n  spiral: (d, a: number, k: number) =>\n    new Spiral(d, new Array(d).fill(a), new Array(d - 1).fill(k)),\n  torus: (d, r: number, t: number) => new Torus(d, r, t),\n  fucked_up_torus: (d, r: number, t: number) => new FuckedUpTorus(d, r, t),\n  rotate: (\n    d: number,\n    theta: number,\n    d0: number,\n    d1: number,\n    f0: UnaryOperator = Math.cos,\n    f1: UnaryOperator = Math.sin\n  ) => {\n    assert(0 <= d0 && d0 < d, `rotate: Expected 0 <= d0 = ${d0} < d = ${d}`);\n    assert(0 <= d1 && d1 < d, `rotate: Expected 0 <= d1 = ${d1} < d = ${d}`);\n    return new Rotator(d, theta, d0, d1, f0, f1);\n  },\n  stereo: (d, to) => new Stereo(d, to)\n};\n\ntype Funs = typeof funs;\n\ntype Ranges = {\n  [P in keyof Funs]: (domain: number) => number;\n};\n\nconst ranges: Ranges = {\n  cube: domain => domain,\n  sphere: domain => domain + 1,\n  spiral: domain => domain + 1,\n  torus: domain => domain + 1,\n  fucked_up_torus: domain => domain + 1,\n  rotate: domain => domain,\n  r: domain => domain,\n  stereo: domain => domain\n};\n","var api = require(\"!../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../css-loader/dist/cjs.js!./multirange.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@supports (--css: variables) {\\n\\tinput[type=\\\"range\\\"].multirange {\\n\\t\\tpadding: 0;\\n\\t\\tmargin: 0;\\n\\t\\tdisplay: inline-block;\\n\\t\\tvertical-align: top;\\n\\t}\\n\\n\\tinput[type=\\\"range\\\"].multirange.original {\\n\\t\\tposition: absolute;\\n\\t}\\n\\n\\t\\tinput[type=\\\"range\\\"].multirange.original::-webkit-slider-thumb {\\n\\t\\t\\tposition: relative;\\n\\t\\t\\tz-index: 2;\\n\\t\\t}\\n\\n\\t\\tinput[type=\\\"range\\\"].multirange.original::-moz-range-thumb {\\n\\t\\t\\ttransform: scale(1); /* FF doesn't apply position it seems */\\n\\t\\t\\tz-index: 1;\\n\\t\\t}\\n\\n\\t\\tinput[type=\\\"range\\\"].multirange::-moz-range-track {\\n\\t\\t\\tborder-color: transparent; /* needed to switch FF to \\\"styleable\\\" control */\\n\\t\\t}\\n\\n\\tinput[type=\\\"range\\\"].multirange.ghost {\\n\\t\\tposition: relative;\\n\\t\\tbackground: var(--track-background);\\n\\t\\t--track-background: linear-gradient(to right,\\n\\t\\t\\t\\ttransparent var(--low), var(--range-color) 0,\\n\\t\\t\\t\\tvar(--range-color) var(--high), transparent 0\\n\\t\\t\\t) no-repeat 0 45% / 100% 40%;\\n\\t\\t--range-color: hsl(190, 80%, 40%);\\n\\t}\\n\\n\\t\\tinput[type=\\\"range\\\"].multirange.ghost::-webkit-slider-runnable-track {\\n\\t\\t\\tbackground: var(--track-background);\\n\\t\\t}\\n\\n\\t\\tinput[type=\\\"range\\\"].multirange.ghost::-moz-range-track {\\n\\t\\t\\tbackground: var(--track-background);\\n\\t\\t}\\n\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./global.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body{color:white;cursor:wait;font-family:\\\"FiraCode Nerd Font\\\",FiraCode,Roboto,Helvetica;font-size:16px;margin:auto;overflow:hidden}body h1{left:0;margin:8px;position:absolute;top:0}body.data{cursor:auto}body.data.cursor-inactive{cursor:none}input,textarea{font-family:\\\"FiraCode Nerd Font\\\",FiraCode,Roboto,Helvetica;font-size:16px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = __webpack_public_path__ + \"1.c8cd9f473cafc54f667b.worker.js\"","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nvar pool_1 = require(\"./pool\");\nexports.Pool = pool_1.Pool;\nvar spawn_1 = require(\"./spawn\");\nexports.spawn = spawn_1.spawn;\nvar thread_1 = require(\"./thread\");\nexports.Thread = thread_1.Thread;\n/** Worker implementation. Either web worker or a node.js Worker class. */\nexports.Worker = implementation_1.default.selectWorkerImplementation();\n","\"use strict\";\n// Source: <https://github.com/parcel-bundler/parcel/blob/master/packages/core/parcel-bundler/src/builtins/bundle-url.js>\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet bundleURL;\nfunction getBundleURLCached() {\n    if (!bundleURL) {\n        bundleURL = getBundleURL();\n    }\n    return bundleURL;\n}\nexports.getBundleURL = getBundleURLCached;\nfunction getBundleURL() {\n    // Attempt to find the URL of the current script and use that as the base URL\n    try {\n        throw new Error;\n    }\n    catch (err) {\n        const matches = (\"\" + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n        if (matches) {\n            return getBaseURL(matches[0]);\n        }\n    }\n    return \"/\";\n}\nfunction getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\nexports.getBaseURL = getBaseURL;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst observable_promise_1 = require(\"../observable-promise\");\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nconst thread_1 = require(\"./thread\");\nexports.Thread = thread_1.Thread;\nlet nextPoolID = 1;\nconst hasSymbols = () => typeof Symbol === 'function';\nconst hasSymbol = (name) => hasSymbols() && Boolean(Symbol[name]);\nfunction flatMap(array, mapper) {\n    return array.reduce((flattened, element) => [...flattened, ...mapper(element)], []);\n}\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction slugify(text) {\n    return text.replace(/\\W/g, \" \").trim().replace(/\\s+/g, \"-\");\n}\n/** Pool event type. Specifies the type of each `PoolEvent`. */\nvar PoolEventType;\n(function (PoolEventType) {\n    PoolEventType[\"initialized\"] = \"initialized\";\n    PoolEventType[\"taskCanceled\"] = \"taskCanceled\";\n    PoolEventType[\"taskCompleted\"] = \"taskCompleted\";\n    PoolEventType[\"taskFailed\"] = \"taskFailed\";\n    PoolEventType[\"taskQueued\"] = \"taskQueued\";\n    PoolEventType[\"taskQueueDrained\"] = \"taskQueueDrained\";\n    PoolEventType[\"taskStart\"] = \"taskStart\";\n    PoolEventType[\"terminated\"] = \"terminated\";\n})(PoolEventType = exports.PoolEventType || (exports.PoolEventType = {}));\nfunction createArray(size) {\n    const array = [];\n    for (let index = 0; index < size; index++) {\n        array.push(index);\n    }\n    return array;\n}\nfunction findIdlingWorker(workers, maxConcurrency) {\n    return workers.find(worker => worker.runningTasks.length < maxConcurrency);\n}\nfunction runPoolTask(task, availableWorker, workerID, eventSubject, debug) {\n    return __awaiter(this, void 0, void 0, function* () {\n        debug(`Running task #${task.id} on worker #${workerID}...`);\n        eventSubject.next({\n            type: PoolEventType.taskStart,\n            taskID: task.id,\n            workerID\n        });\n        try {\n            const returnValue = yield task.run(yield availableWorker.init);\n            debug(`Task #${task.id} completed successfully`);\n            eventSubject.next({\n                type: PoolEventType.taskCompleted,\n                returnValue,\n                taskID: task.id,\n                workerID\n            });\n        }\n        catch (error) {\n            debug(`Task #${task.id} failed`);\n            eventSubject.next({\n                type: PoolEventType.taskFailed,\n                taskID: task.id,\n                error,\n                workerID\n            });\n        }\n    });\n}\nfunction spawnWorkers(spawnWorker, count) {\n    return createArray(count).map(() => ({\n        init: spawnWorker(),\n        runningTasks: []\n    }));\n}\nfunction PoolConstructor(spawnWorker, optionsOrSize) {\n    const options = typeof optionsOrSize === \"number\"\n        ? { size: optionsOrSize }\n        : optionsOrSize || {};\n    const debug = debug_1.default(`threads:pool:${slugify(options.name || String(nextPoolID++))}`);\n    const { concurrency = 1, size = implementation_1.default.defaultPoolSize } = options;\n    let isClosing = false;\n    let nextTaskID = 1;\n    let taskQueue = [];\n    const initErrors = [];\n    const workers = spawnWorkers(spawnWorker, size);\n    let eventSubject;\n    const eventObservable = observable_promise_1.makeHot(new observable_fns_1.Observable(subscriber => {\n        eventSubject = subscriber;\n    }));\n    Promise.all(workers.map(worker => worker.init)).then(() => eventSubject.next({\n        type: PoolEventType.initialized,\n        size: workers.length\n    }), error => {\n        debug(\"Error while initializing pool worker:\", error);\n        eventSubject.error(error);\n        initErrors.push(error);\n    });\n    const scheduleWork = () => {\n        debug(`Attempt de-queueing a task in order to run it...`);\n        const availableWorker = findIdlingWorker(workers, concurrency);\n        if (!availableWorker)\n            return;\n        const nextTask = taskQueue.shift();\n        if (!nextTask) {\n            debug(`Task queue is empty`);\n            eventSubject.next({ type: PoolEventType.taskQueueDrained });\n            return;\n        }\n        const workerID = workers.indexOf(availableWorker) + 1;\n        const run = (worker, task) => __awaiter(this, void 0, void 0, function* () {\n            const removeTaskFromWorkersRunningTasks = () => {\n                worker.runningTasks = worker.runningTasks.filter(someRunPromise => someRunPromise !== runPromise);\n            };\n            // Defer task execution by one tick to give handlers time to subscribe\n            yield sleep(0);\n            try {\n                yield runPoolTask(task, availableWorker, workerID, eventSubject, debug);\n            }\n            finally {\n                removeTaskFromWorkersRunningTasks();\n                if (!isClosing) {\n                    scheduleWork();\n                }\n            }\n        });\n        const runPromise = run(availableWorker, nextTask);\n        availableWorker.runningTasks.push(runPromise);\n    };\n    const pool = {\n        completed(allowResolvingImmediately = false) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const getCurrentlyRunningTasks = () => flatMap(workers, worker => worker.runningTasks);\n                if (initErrors.length > 0) {\n                    return Promise.reject(initErrors[0]);\n                }\n                if (allowResolvingImmediately && taskQueue.length === 0) {\n                    return Promise.all(getCurrentlyRunningTasks());\n                }\n                const poolEventPromise = new Promise((resolve, reject) => {\n                    const subscription = eventObservable.subscribe(event => {\n                        if (event.type === PoolEventType.taskQueueDrained) {\n                            subscription.unsubscribe();\n                            resolve();\n                        }\n                        else if (event.type === PoolEventType.taskFailed) {\n                            subscription.unsubscribe();\n                            reject(event.error);\n                        }\n                    });\n                });\n                yield Promise.race([\n                    poolEventPromise,\n                    eventObservable // make a pool-wide error reject the completed() result promise\n                ]);\n                yield Promise.all(getCurrentlyRunningTasks());\n            });\n        },\n        events() {\n            return eventObservable;\n        },\n        queue(taskFunction) {\n            if (isClosing) {\n                throw Error(`Cannot schedule pool tasks after terminate() has been called.`);\n            }\n            if (initErrors.length > 0) {\n                throw initErrors[0];\n            }\n            let resultPromiseThen;\n            const createResultPromise = () => new Promise((resolve, reject) => {\n                const eventSubscription = pool.events().subscribe(event => {\n                    if (event.type === PoolEventType.taskCompleted && event.taskID === task.id) {\n                        eventSubscription.unsubscribe();\n                        resolve(event.returnValue);\n                    }\n                    else if (event.type === PoolEventType.taskFailed && event.taskID === task.id) {\n                        eventSubscription.unsubscribe();\n                        reject(event.error);\n                    }\n                    else if (event.type === PoolEventType.terminated) {\n                        eventSubscription.unsubscribe();\n                        reject(Error(\"Pool has been terminated before task was run.\"));\n                    }\n                });\n            });\n            const task = {\n                id: nextTaskID++,\n                run: taskFunction,\n                cancel() {\n                    if (taskQueue.indexOf(task) === -1)\n                        return;\n                    taskQueue = taskQueue.filter(someTask => someTask !== task);\n                    eventSubject.next({\n                        type: PoolEventType.taskCanceled,\n                        taskID: task.id\n                    });\n                },\n                get then() {\n                    if (!resultPromiseThen) {\n                        const resultPromise = createResultPromise();\n                        resultPromiseThen = resultPromise.then.bind(resultPromise);\n                    }\n                    return resultPromiseThen;\n                }\n            };\n            debug(`Queueing task #${task.id}...`);\n            taskQueue.push(task);\n            eventSubject.next({\n                type: PoolEventType.taskQueued,\n                taskID: task.id\n            });\n            scheduleWork();\n            return task;\n        },\n        terminate(force) {\n            return __awaiter(this, void 0, void 0, function* () {\n                isClosing = true;\n                if (!force) {\n                    yield pool.completed(true);\n                }\n                eventSubject.next({\n                    type: PoolEventType.terminated,\n                    remainingQueue: [...taskQueue]\n                });\n                eventSubject.complete();\n                yield Promise.all(workers.map((worker) => __awaiter(this, void 0, void 0, function* () { return thread_1.Thread.terminate(yield worker.init); })));\n            });\n        }\n    };\n    if (hasSymbols() && hasSymbol(\"toStringTag\")) {\n        pool[Symbol.toStringTag] = () => `[object Pool]`;\n    }\n    return pool;\n}\nPoolConstructor.EventType = PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\nexports.Pool = PoolConstructor;\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\t\t// Debug.formatArgs = formatArgs;\n\t\t// debug.rawLog = rawLog;\n\n\t\t// env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst promise_1 = require(\"../promise\");\nconst symbols_1 = require(\"../symbols\");\nconst master_1 = require(\"../types/master\");\nconst invocation_proxy_1 = require(\"./invocation-proxy\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nconst debugSpawn = debug_1.default(\"threads:master:spawn\");\nconst debugThreadUtils = debug_1.default(\"threads:master:thread-utils\");\nconst isInitMessage = (data) => data && data.type === \"init\";\nconst isUncaughtErrorMessage = (data) => data && data.type === \"uncaughtError\";\nconst initMessageTimeout = typeof process !== \"undefined\" && process.env.THREADS_WORKER_INIT_TIMEOUT\n    ? Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT, 10)\n    : 10000;\nfunction withTimeout(promise, timeoutInMs, errorMessage) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let timeoutHandle;\n        const timeout = new Promise((resolve, reject) => {\n            timeoutHandle = setTimeout(() => reject(Error(errorMessage)), timeoutInMs);\n        });\n        const result = yield Promise.race([\n            promise,\n            timeout\n        ]);\n        clearTimeout(timeoutHandle);\n        return result;\n    });\n}\nfunction receiveInitMessage(worker) {\n    return new Promise((resolve, reject) => {\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker before finishing initialization:\", event.data);\n            if (isInitMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                resolve(event.data);\n            }\n            else if (isUncaughtErrorMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                reject(common_1.rehydrateError(event.data.error));\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n    });\n}\nfunction createEventObservable(worker, workerTermination) {\n    return new observable_fns_1.Observable(observer => {\n        const messageHandler = ((messageEvent) => {\n            const workerEvent = {\n                type: master_1.WorkerEventType.message,\n                data: messageEvent.data\n            };\n            observer.next(workerEvent);\n        });\n        const rejectionHandler = ((errorEvent) => {\n            debugThreadUtils(\"Unhandled promise rejection event in thread:\", errorEvent);\n            const workerEvent = {\n                type: master_1.WorkerEventType.internalError,\n                error: Error(errorEvent.reason)\n            };\n            observer.next(workerEvent);\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        worker.addEventListener(\"unhandledrejection\", rejectionHandler);\n        workerTermination.then(() => {\n            const terminationEvent = {\n                type: master_1.WorkerEventType.termination\n            };\n            worker.removeEventListener(\"message\", messageHandler);\n            worker.removeEventListener(\"unhandledrejection\", rejectionHandler);\n            observer.next(terminationEvent);\n            observer.complete();\n        });\n    });\n}\nfunction createTerminator(worker) {\n    const [termination, resolver] = promise_1.createPromiseWithResolver();\n    const terminate = () => __awaiter(this, void 0, void 0, function* () {\n        debugThreadUtils(\"Terminating worker\");\n        // Newer versions of worker_threads workers return a promise\n        yield worker.terminate();\n        resolver();\n    });\n    return { terminate, termination };\n}\nfunction setPrivateThreadProps(raw, worker, workerEvents, terminate) {\n    const workerErrors = workerEvents\n        .filter(event => event.type === master_1.WorkerEventType.internalError)\n        .map(errorEvent => errorEvent.error);\n    // tslint:disable-next-line prefer-object-spread\n    return Object.assign(raw, {\n        [symbols_1.$errors]: workerErrors,\n        [symbols_1.$events]: workerEvents,\n        [symbols_1.$terminate]: terminate,\n        [symbols_1.$worker]: worker\n    });\n}\n/**\n * Spawn a new thread. Takes a fresh worker instance, wraps it in a thin\n * abstraction layer to provide the transparent API and verifies that\n * the worker has initialized successfully.\n *\n * @param worker Instance of `Worker`. Either a web worker, `worker_threads` worker or `tiny-worker` worker.\n */\nfunction spawn(worker) {\n    return __awaiter(this, void 0, void 0, function* () {\n        debugSpawn(\"Initializing new thread\");\n        const initMessage = yield withTimeout(receiveInitMessage(worker), initMessageTimeout, `Timeout: Did not receive an init message from worker after ${initMessageTimeout}ms. Make sure the worker calls expose().`);\n        const exposed = initMessage.exposed;\n        const { termination, terminate } = createTerminator(worker);\n        const events = createEventObservable(worker, termination);\n        if (exposed.type === \"function\") {\n            const proxy = invocation_proxy_1.createProxyFunction(worker);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else if (exposed.type === \"module\") {\n            const proxy = invocation_proxy_1.createProxyModule(worker, exposed.methods);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else {\n            const type = exposed.type;\n            throw Error(`Worker init message states unexpected type of expose(): ${type}`);\n        }\n    });\n}\nexports.spawn = spawn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst doNothing = () => undefined;\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\nfunction createPromiseWithResolver() {\n    let alreadyResolved = false;\n    let resolvedTo;\n    let resolver = doNothing;\n    const promise = new Promise(resolve => {\n        if (alreadyResolved) {\n            resolve(resolvedTo);\n        }\n        else {\n            resolver = resolve;\n        }\n    });\n    const exposedResolver = (value) => {\n        alreadyResolved = true;\n        resolvedTo = value;\n        resolver();\n    };\n    return [promise, exposedResolver];\n}\nexports.createPromiseWithResolver = createPromiseWithResolver;\n","\"use strict\";\n/// <reference lib=\"dom\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst symbols_1 = require(\"../symbols\");\n/** Event as emitted by worker thread. Subscribe to using `Thread.events(thread)`. */\nvar WorkerEventType;\n(function (WorkerEventType) {\n    WorkerEventType[\"internalError\"] = \"internalError\";\n    WorkerEventType[\"message\"] = \"message\";\n    WorkerEventType[\"termination\"] = \"termination\";\n})(WorkerEventType = exports.WorkerEventType || (exports.WorkerEventType = {}));\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst debug_1 = __importDefault(require(\"debug\"));\nconst common_1 = require(\"../common\");\nconst observable_promise_1 = require(\"../observable-promise\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nlet nextJobUID = 1;\nconst dedupe = (array) => Array.from(new Set(array));\nconst isJobErrorMessage = (data) => data && data.type === messages_1.WorkerMessageType.error;\nconst isJobResultMessage = (data) => data && data.type === messages_1.WorkerMessageType.result;\nconst isJobStartMessage = (data) => data && data.type === messages_1.WorkerMessageType.running;\nfunction createObservablePromiseForJob(worker, jobUID) {\n    let asyncType;\n    return observable_promise_1.ObservablePromise((resolve, reject, observer) => {\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker:\", event.data);\n            if (!event.data || event.data.uid !== jobUID)\n                return;\n            if (isJobStartMessage(event.data)) {\n                asyncType = event.data.resultType;\n            }\n            else if (isJobResultMessage(event.data)) {\n                if (asyncType === \"promise\") {\n                    resolve(event.data.payload);\n                    worker.removeEventListener(\"message\", messageHandler);\n                }\n                else {\n                    if (event.data.payload) {\n                        observer.next(event.data.payload);\n                    }\n                    if (event.data.complete) {\n                        observer.complete();\n                        worker.removeEventListener(\"message\", messageHandler);\n                    }\n                }\n            }\n            else if (isJobErrorMessage(event.data)) {\n                const error = common_1.rehydrateError(event.data.error);\n                if (asyncType === \"promise\" || !asyncType) {\n                    reject(error);\n                }\n                else {\n                    observer.error(error);\n                }\n                worker.removeEventListener(\"message\", messageHandler);\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        return () => worker.removeEventListener(\"message\", messageHandler);\n    });\n}\nfunction prepareArguments(rawArgs) {\n    const args = [];\n    const transferables = [];\n    for (const arg of rawArgs) {\n        if (transferable_1.isTransferDescriptor(arg)) {\n            args.push(arg.send);\n            transferables.push(...arg.transferables);\n        }\n        else {\n            args.push(arg);\n        }\n    }\n    return {\n        args,\n        transferables: dedupe(transferables)\n    };\n}\nfunction createProxyFunction(worker, method) {\n    return ((...rawArgs) => {\n        const uid = nextJobUID++;\n        const { args, transferables } = prepareArguments(rawArgs);\n        const runMessage = {\n            type: messages_1.MasterMessageType.run,\n            uid,\n            method,\n            args\n        };\n        debugMessages(\"Sending command to run function to worker:\", runMessage);\n        worker.postMessage(runMessage, transferables);\n        return observable_promise_1.makeHot(createObservablePromiseForJob(worker, uid));\n    });\n}\nexports.createProxyFunction = createProxyFunction;\nfunction createProxyModule(worker, methodNames) {\n    const proxy = {};\n    for (const methodName of methodNames) {\n        proxy[methodName] = createProxyFunction(worker, methodName);\n    }\n    return proxy;\n}\nexports.createProxyModule = createProxyModule;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is_observable_1 = __importDefault(require(\"is-observable\"));\nconst common_1 = require(\"../common\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nvar transferable_2 = require(\"../transferable\");\nexports.Transfer = transferable_2.Transfer;\nlet exposeCalled = false;\nconst isMasterJobRunMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.run;\n/** There are issues with `is-observable` not recognizing zen-observable's instances */\nconst isObservable = (thing) => is_observable_1.default(thing) || isZenObservable(thing);\nfunction isZenObservable(thing) {\n    return thing && typeof thing === \"object\" && typeof thing.subscribe === \"function\";\n}\nfunction deconstructTransfer(thing) {\n    return transferable_1.isTransferDescriptor(thing)\n        ? { payload: thing.send, transferables: thing.transferables }\n        : { payload: thing, transferables: undefined };\n}\nfunction postFunctionInitMessage() {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"function\"\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postModuleInitMessage(methodNames) {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"module\",\n            methods: methodNames\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postJobErrorMessage(uid, rawError) {\n    const { payload: error, transferables } = deconstructTransfer(rawError);\n    const errorMessage = {\n        type: messages_1.WorkerMessageType.error,\n        uid,\n        error: common_1.serializeError(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage, transferables);\n}\nfunction postJobResultMessage(uid, completed, resultValue) {\n    const { payload, transferables } = deconstructTransfer(resultValue);\n    const resultMessage = {\n        type: messages_1.WorkerMessageType.result,\n        uid,\n        complete: completed ? true : undefined,\n        payload\n    };\n    implementation_1.default.postMessageToMaster(resultMessage, transferables);\n}\nfunction postJobStartMessage(uid, resultType) {\n    const startMessage = {\n        type: messages_1.WorkerMessageType.running,\n        uid,\n        resultType\n    };\n    implementation_1.default.postMessageToMaster(startMessage);\n}\nfunction postUncaughtErrorMessage(error) {\n    const errorMessage = {\n        type: messages_1.WorkerMessageType.uncaughtError,\n        error: common_1.serializeError(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage);\n}\nfunction runFunction(jobUID, fn, args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let syncResult;\n        try {\n            syncResult = fn(...args);\n        }\n        catch (error) {\n            return postJobErrorMessage(jobUID, error);\n        }\n        const resultType = isObservable(syncResult) ? \"observable\" : \"promise\";\n        postJobStartMessage(jobUID, resultType);\n        if (isObservable(syncResult)) {\n            syncResult.subscribe(value => postJobResultMessage(jobUID, false, value), error => postJobErrorMessage(jobUID, error), () => postJobResultMessage(jobUID, true));\n        }\n        else {\n            try {\n                const result = yield syncResult;\n                postJobResultMessage(jobUID, true, result);\n            }\n            catch (error) {\n                postJobErrorMessage(jobUID, error);\n            }\n        }\n    });\n}\n/**\n * Expose a function or a module (an object whose values are functions)\n * to the main thread. Must be called exactly once in every worker thread\n * to signal its API to the main thread.\n *\n * @param exposed Function or object whose values are functions\n */\nfunction expose(exposed) {\n    if (!implementation_1.default.isWorkerRuntime()) {\n        throw Error(\"expose() called in the master thread.\");\n    }\n    if (exposeCalled) {\n        throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");\n    }\n    exposeCalled = true;\n    if (typeof exposed === \"function\") {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && !messageData.method) {\n                runFunction(messageData.uid, exposed, messageData.args);\n            }\n        });\n        postFunctionInitMessage();\n    }\n    else if (typeof exposed === \"object\" && exposed) {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && messageData.method) {\n                runFunction(messageData.uid, exposed[messageData.method], messageData.args);\n            }\n        });\n        const methodNames = Object.keys(exposed).filter(key => typeof exposed[key] === \"function\");\n        postModuleInitMessage(methodNames);\n    }\n    else {\n        throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${exposed}`);\n    }\n}\nexports.expose = expose;\nif (typeof self !== \"undefined\" && typeof self.addEventListener === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    self.addEventListener(\"error\", event => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(event.error || event), 250);\n    });\n    self.addEventListener(\"unhandledrejection\", event => {\n        const error = event.reason;\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\nif (typeof process !== \"undefined\" && typeof process.on === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    process.on(\"uncaughtException\", (error) => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(error), 250);\n    });\n    process.on(\"unhandledRejection\", (error) => {\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\n","'use strict';\nconst symbolObservable = require('symbol-observable').default;\n\nmodule.exports = value => Boolean(value && value[symbolObservable] && value === value[symbolObservable]());\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable no-shadowed-variable\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isWorkerRuntime = function isWorkerRuntime() {\n    return typeof self !== \"undefined\" && self.postMessage ? true : false;\n};\nconst postMessageToMaster = function postMessageToMaster(data, transferList) {\n    self.postMessage(data, transferList);\n};\nconst subscribeToMasterMessages = function subscribeToMasterMessages(onMessage) {\n    const messageHandler = (messageEvent) => {\n        onMessage(messageEvent.data);\n    };\n    const unsubscribe = () => {\n        self.removeEventListener(\"message\", messageHandler);\n    };\n    self.addEventListener(\"message\", messageHandler);\n    return unsubscribe;\n};\nexports.default = {\n    isWorkerRuntime,\n    postMessageToMaster,\n    subscribeToMasterMessages\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./overlay.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/icon?family=Material+Icons);\"]);\n// Module\nexports.push([module.id, \"@media print{#overlay{display:none}@page{margin:0;size:landscape}}#overlay{opacity:0}#overlay [title]{cursor:help}#overlay .disabled{cursor:not-allowed}#overlay .disabled i.material-icons{color:gray;cursor:not-allowed}#overlay input:disabled,#overlay textarea:disabled{cursor:not-allowed}#inputs{align-items:flex-end;box-sizing:border-box;display:flex;flex-flow:column wrap;justify-content:flex-start;padding:0px 16px;position:absolute;right:0;top:0}#inputs span,#inputs i{padding-bottom:8px}#inputs section{align-items:flex-end;display:flex;flex-flow:column wrap;justify-content:flex-start}#inputs #pipe{resize:none}#media{bottom:0;box-sizing:border-box;display:flex;flex-flow:row wrap;padding:32px;position:absolute;width:100%}#media i.material-icons{cursor:pointer;display:'none';font-size:36px;margin:0 8px}#allowed_db_range{align-items:center;display:flex;flex-flow:row}#allowed_db_range_input{align-items:center;display:flex;flex-flow:row;margin:0 8px}.spacer{flex:1}a.help{font-size:small;vertical-align:super}a.help::before{content:'?'}a.help:link,a.help:visited,a.help:hover,a.help:active{color:white}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","module.exports = __webpack_public_path__ + \"renderer.a81565eef27e026f88b1.worker.js\"","export default (key: string, value: any) => {\n  // replace the whole object so that old references\n  // to it in the console are not mutated.\n  window._debug = {\n    ...window._debug,\n    [key]: value\n  };\n};\n","import * as log from 'loglevel';\n\nimport { pp } from '../pp';\n\nexport const error = (err: any): void => {\n  if (err instanceof Error) {\n    log.error(err);\n  } else {\n    log.error(pp(err));\n  }\n};\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, destination) {\n    if (destination === void 0) {\n        destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (destination.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(destination);\n    }\n    return subscribeTo(result)(destination);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/ (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\nexport { CombineLatestSubscriber };\n//# sourceMappingURL=combineLatest.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var async = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period, scheduler) {\n    if (period === void 0) {\n        period = 0;\n    }\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber: subscriber, counter: 0, period: period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, counter = state.counter, period = state.period;\n    subscriber.next(counter);\n    this.schedule({ subscriber: subscriber, counter: counter + 1, period: period }, period);\n}\n//# sourceMappingURL=interval.js.map\n","/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */\nimport { isArray } from './isArray';\nexport function isNumeric(val) {\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n//# sourceMappingURL=isNumeric.js.map\n","import {\n  AccessNode,\n  ArithNode,\n  FnNode,\n  IdNode,\n  PipeNode,\n  Scalar,\n  StepNode\n} from './ast';\nimport { Defs } from './types';\n\nexport type Substitutions = {\n  [id in keyof Defs]: Scalar;\n};\n\nexport class Simplifier {\n  constructor(private readonly substitutions: Substitutions) {}\n  simplify = (pipe: PipeNode): PipeNode => {\n    const { n, d0, steps } = pipe;\n    return {\n      kind: pipe.kind,\n      n,\n      d0,\n      steps: steps.map(this.simplifyStepNode)\n    };\n  };\n  simplifyScalar = (node: Scalar): Scalar => {\n    switch (node.kind) {\n      case 'number':\n        return node;\n      case 'fn':\n        return this.simplifyFnNode(node);\n      case 'access':\n        return this.simplifyAccessNode(node);\n      case 'id':\n        return this.simplifyIdNode(node);\n      case 'arith':\n        return this.simplifyArithNode(node);\n    }\n  };\n  private simplifyStepNode = ({ kind, type: fn, args }: StepNode): StepNode => {\n    return {\n      kind,\n      type: fn,\n      args: args.map(this.simplifyScalar)\n    };\n  };\n  private simplifyArithNode = ({\n    kind,\n    op,\n    operands\n  }: ArithNode): ArithNode => {\n    const [a, b] = operands.map(this.simplifyScalar);\n    return { kind, op, operands: [a, b] };\n  };\n  private simplifyFnNode = ({ kind, name, args }: FnNode): FnNode => {\n    return {\n      kind,\n      name,\n      args: args.map(this.simplifyIdNode)\n    };\n  };\n  private simplifyAccessNode = ({\n    kind,\n    id,\n    index\n  }: AccessNode): AccessNode => {\n    return { kind, id, index: this.simplifyScalar(index) };\n  };\n  private simplifyIdNode = (node: IdNode): Scalar => {\n    const { id } = node;\n    if (id in this.substitutions) {\n      return this.simplifyScalar(this.substitutions[id]);\n    } else {\n      return node;\n    }\n  };\n}\n","/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nvar BehaviorSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map\n","import {\n  AccessNode,\n  ArithNode,\n  FnNode,\n  IdNode,\n  NumberNode,\n  PipeNode,\n  Scalar,\n  StepNode\n} from '*.pegjs';\n\nexport type Value = number | Function;\n\nexport function print(node: PipeNode): string;\nexport function print(node: StepNode): string;\nexport function print(node: Scalar): string;\nexport function print(node: any) {\n  switch (node.kind) {\n    case 'pipe':\n      return printPipe(node);\n    case 'step':\n      return printStep(node);\n    case 'arith':\n      return printArith(node);\n    case 'number':\n      return printNumber(node);\n    case 'fn':\n      return printFn(node);\n    case 'access':\n      return printAccess(node);\n    case 'id':\n      return printId(node);\n  }\n}\n\nfunction printPipe(node: PipeNode): string {\n  return [node.n, node.d0, ...node.steps.map(print)].join('\\n  =>');\n}\n\nfunction printStep(node: StepNode): string {\n  return `${node.type}(${node.args.map(print).join(', ')})`;\n}\n\nfunction printArith(node: ArithNode): string {\n  const [a, b] = node.operands;\n  const expr =\n    b == null ? `-${print(a)}` : `${print(a)} ${node.op} ${print(b)}`;\n  return node.parens ? `(${expr})` : expr;\n}\n\nfunction printNumber(node: NumberNode): string {\n  return node.value.toString();\n}\n\nfunction printFn(node: FnNode): string {\n  return `${node.name}(${node.args.map(print).join(', ')})`;\n}\n\nfunction printAccess(node: AccessNode): string {\n  return `${node.id}[${print(node.index)}]`;\n}\n\nfunction printId(node: IdNode): string {\n  return node.id;\n}\n","import { PipeNode, Scalar } from './ast';\nimport { parse } from './grammar.pegjs';\n\nexport class Parser {\n  static parsePipe = (pipe: string): PipeNode => parse(pipe);\n\n  static parseScalar = (expr: string): Scalar =>\n    parse(expr, { startRule: 'scalar' });\n}\n","import './overlay.scss';\n\nimport assert from 'assert';\n\nimport { inputs } from '../inputs';\n\nexport const overlayElement = document.getElementById('overlay');\n\nexport class Overlay {\n  readonly domElement = overlayElement;\n  private hasHover = false;\n\n  constructor() {\n    this.setupInputs();\n    this.setupKeyboardShortcuts();\n\n    this.domElement\n      .querySelectorAll<HTMLElement>(\n        'input, textarea, label, i, h2, h1, #allowed_db_range'\n      )\n      .forEach(el => {\n        el.onmouseover = () => (this.hasHover = true);\n        el.onmouseout = () => (this.hasHover = false);\n      });\n  }\n\n  hasAttention = () => this.hasHover || this.contains(document.activeElement);\n\n  show = () => (this.domElement.style.opacity = '1');\n\n  hide = () => (this.domElement.style.opacity = '0');\n\n  private contains = (node: Node) => this.domElement.contains(node);\n\n  private setupInputs = () => {\n    for (const input of Object.values(inputs)) {\n      const el = this.querySelector<HTMLInputElement>(`#${input.id}`);\n      assert(el, `Did not find element for input #${input.id}`);\n      input.setup(el);\n    }\n\n    if (!inputs.fullscreen.disabled) {\n      inputs.fullscreen.stream.subscribe(({ newValue }) => {\n        if (newValue) document.body.requestFullscreen();\n        else if (document.fullscreenElement) document.exitFullscreen();\n      });\n    }\n  };\n\n  querySelector = <E extends Element = HTMLElement>(selector: string) =>\n    this.domElement.querySelector<E>(selector);\n\n  private setupKeyboardShortcuts = () => {\n    document.onkeydown = (event: KeyboardEvent) => {\n      if (event.repeat) return;\n      if (this.domElement.contains(event.target as Node)) return;\n\n      switch (event.key) {\n        case ' ':\n          inputs.animate.value = !inputs.animate.value;\n          break;\n        case 'm':\n        case 'M':\n          inputs.mic.value = !inputs.mic.value;\n          break;\n        case 'Enter':\n          inputs.fullscreen.value = !inputs.fullscreen.value;\n          break;\n      }\n    };\n  };\n}\n","const query = new URLSearchParams(window.location.search);\n\nexport const persistenceEnabled = query.get('p') != '0';\n\nexport const hash = (() => {\n  const temp = window.location.hash.substr(1);\n  return new URLSearchParams(temp ? atob(temp) : '');\n})();\n","import { BehaviorSubject, Subject } from 'rxjs';\n\nimport { Change } from './change';\nimport { hash, persistenceEnabled } from './constants';\nimport { Options } from './options';\n\nexport abstract class Input<T, E extends HTMLElement = HTMLElement> {\n  readonly disabled: boolean;\n\n  protected readonly parse: (s: string) => T;\n  protected readonly stringify: (t: T) => string;\n  protected el?: E;\n\n  private readonly subject: Subject<Change<T>>;\n  private readonly persistent: boolean;\n  private _value: T;\n\n  constructor(\n    readonly id: string,\n    defaultText: string,\n    {\n      persistent = false,\n      disabled = false,\n      parse = () => {\n        throw new Error('parse unsupported');\n      },\n      stringify = () => {\n        throw new Error('stringify unsupported');\n      }\n    }: Options<T> = {}\n  ) {\n    this.persistent = persistent;\n    this.disabled = disabled;\n    this.parse = parse;\n    this.stringify = stringify;\n\n    if (!persistenceEnabled) {\n      this.persistent = false;\n    }\n    let text = defaultText;\n    if (this.persistent && hash.has(this.id)) {\n      text = hash.get(this.id);\n    }\n\n    this._value = this.parse(text);\n    this.subject = this.newSubject();\n  }\n\n  newSubject = () => new BehaviorSubject<Change<T>>({ newValue: this._value });\n\n  setup = (el: E) => {\n    this.el = el;\n    if (this.disabled) this.el.classList.add('disabled');\n    this._setup();\n  };\n\n  protected abstract _setup(): void;\n\n  get stream() {\n    return this.subject.asObservable();\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(newValue: T) {\n    const oldValue = this.value;\n    this._value = newValue;\n    this.subject.next({ newValue, oldValue, event: window.event });\n    if (this.persistent) this.updateHash();\n  }\n\n  private updateHash = () => {\n    const str = this.stringify(this.value);\n    hash.set(this.id, str);\n    document.location.hash = btoa(hash.toString());\n  };\n}\n","import { Input } from './input';\nimport { Options } from './options';\n\nexport class TextInput<T = string> extends Input<\n  T,\n  HTMLInputElement | HTMLTextAreaElement\n> {\n  constructor(\n    readonly id: string,\n    defaultText: string,\n    {\n      parse,\n      persistent = true,\n      disabled = false,\n      stringify = (t: T) => t.toString()\n    }: Options<T> = {}\n  ) {\n    super(id, defaultText, { persistent, disabled, parse, stringify });\n  }\n\n  protected _setup = () => {\n    this.el.disabled = this.disabled;\n\n    this.el.onchange = () => {\n      const value = this.parse(this.el.value);\n      this.el.value = this.stringify(value);\n      this.value = value;\n    };\n\n    this.el.oninput = () => this.setSize();\n\n    this.stream.subscribe(({ newValue }) => {\n      this.el.value = this.stringify(newValue);\n      this.setSize();\n    });\n  };\n\n  private setSize() {\n    if (this.el instanceof HTMLInputElement)\n      this.el.size = this.el.value.length;\n    else {\n      const lines = this.el.value.split('\\n');\n      this.el.rows = Math.min(10, lines.length);\n      this.el.cols = Math.min(\n        50,\n        lines.reduce((max, line) => Math.max(max, line.length), 0)\n      );\n    }\n  }\n}\n","import { Input } from './input';\n\nexport class ToggleInput extends Input<boolean> {\n  constructor(\n    readonly id: string,\n    defaultText: string,\n    { disabled = false, persistent = false } = {}\n  ) {\n    super(id, defaultText, {\n      persistent,\n      disabled,\n      parse: text => {\n        switch (text.trim()) {\n          default:\n          case '0':\n          case 'false':\n            return false;\n          case '1':\n          case 'true':\n            return true;\n        }\n      },\n      stringify: (bool: boolean) => {\n        return bool ? '1' : '0';\n      }\n    });\n  }\n\n  protected _setup = () => {\n    const on = this.el.querySelector<HTMLInputElement>('.on');\n    if (!this.disabled) on.onclick = () => (this.value = true);\n\n    const off = this.el.querySelector<HTMLInputElement>('.off');\n    if (!this.disabled) off.onclick = () => (this.value = false);\n\n    this.stream.subscribe(({ newValue }) => {\n      if (newValue) {\n        on.style.display = 'none';\n        off.style.display = 'inline';\n      } else {\n        on.style.display = 'inline';\n        off.style.display = 'none';\n      }\n    });\n  };\n\n  protected parse(str: string) {\n    if (/1|true/i.test(str)) return true;\n    else if (/0|false/i.test(str)) return false;\n    else throw new Error(`invalid boolean value for input ${this.id}: ${str}`);\n  }\n}\n","import { print } from '../../pipe/ast';\nimport { Compiler } from '../../pipe/compiler';\nimport { PipeNode } from '../../pipe/grammar.pegjs';\nimport { poolSize } from '../../pipe/pool';\nimport debug from '../debug';\nimport { overlayElement } from '../overlay';\nimport { render } from '../renderer';\nimport { ActionInput } from './action';\nimport { RangeInput } from './range';\nimport { TextInput } from './text';\nimport { ToggleInput } from './toggle';\n\n// Points generation is done in parallel, so pick n such\n// that each chunk is size 2000\nconst n = 2000 * poolSize;\nconst minDbs = parseInt(\n  overlayElement.querySelector<HTMLInputElement>(\n    '#allowed_db_range_input input'\n  ).min\n);\n\nconst compiler = new Compiler();\nexport const inputs = {\n  pipe: new TextInput<PipeNode>(\n    'pipe',\n    `${n}\n      =>3\n      =>torus(1, 1)\n      =>R(theta, 0, 1, cos, tan)\n      =>R(theta, 0, 2)\n      =>R(theta, 0, 3)\n      =>stereo(3)`,\n    {\n      persistent: true,\n      parse: text => compiler.compile(text),\n      stringify: print\n    }\n  ),\n\n  theta: new TextInput('theta', 'pi * power + pi * t / 20', {\n    parse: s => compiler.compile(s, 'scalar'),\n    stringify: print\n  }),\n\n  h: new TextInput('h', 'min(1, abs(p[0]) / extent[0])', {\n    parse: s => compiler.compile(s, 'scalar'),\n    stringify: print\n  }),\n\n  v: new TextInput('v', '(power + onset) / 2', {\n    parse: s => compiler.compile(s, 'scalar'),\n    stringify: print\n  }),\n\n  animate: new ToggleInput('animate', '1', { persistent: true }),\n\n  mic: new ToggleInput('mic', '0', {\n    disabled: !new AudioContext().audioWorklet\n  }),\n\n  fullscreen: new ToggleInput('fullscreen', '0', {\n    disabled: !document.fullscreenEnabled\n  }),\n\n  allowedDbs: new RangeInput('allowed_db_range', `${minDbs / 2}, -30`, {\n    disabled: !new AudioContext().audioWorklet\n  }),\n\n  save: new ActionInput('save', async () => {\n    await render();\n    const blob = await new Promise(resolve =>\n      document.querySelector('canvas').toBlob(resolve)\n    );\n    const url = URL.createObjectURL(blob);\n    try {\n      const a = document.createElement('a');\n      a.download = `stereo${document.location.hash}`;\n      a.href = url;\n      a.click();\n    } finally {\n      URL.revokeObjectURL(url);\n    }\n  })\n};\n\nexport type Inputs = typeof inputs;\n\ndebug('inputs', inputs);\n","import Interval from '../fn/interval';\nimport { PipeNode, Scalar } from './ast';\nimport { Parser } from './parser';\n\nexport class Compiler {\n  constructor() {}\n\n  compile(expr: string): PipeNode;\n  compile(expr: string, startRule: 'scalar'): Scalar;\n  compile(expr: string, startRule?: string): any {\n    switch (startRule) {\n      default:\n        return this.compilePipe(expr);\n      case 'scalar':\n        return this.compileScalar(expr);\n    }\n  }\n\n  private compilePipe = (expr: string): PipeNode => {\n    const ast = Parser.parsePipe(expr);\n    // Due to the way that sampling is implemented, the actual\n    // number of points generated will not be exactly the n specified\n    // by the user, unless n happens to be the dth power of some number.\n    // The below expression computes the exact number of points that will\n    // be generated.\n    ast.n = Interval.nPerLevel(ast.d0, ast.n) ** ast.d0;\n    return ast;\n  };\n\n  private compileScalar = (expr: string): Scalar => {\n    return Parser.parseScalar(expr);\n  };\n}\n","import multirange from 'multirange';\n\nimport { Input } from './input';\n\nexport class RangeInput extends Input<[number, number]> {\n  constructor(\n    readonly id: string,\n    defaultText: string,\n    { disabled = false, persistent = true } = {}\n  ) {\n    super(id, defaultText, {\n      disabled,\n      persistent,\n      parse: str => {\n        const [min, max] = str.split(/\\s*,\\s*/);\n        return [parseInt(min), parseInt(max)];\n      },\n      stringify: ([min, max]) => {\n        return `${min},${max}`;\n      }\n    });\n  }\n\n  protected _setup = () => {\n    const input = this.el.querySelector<MultirangeHTMLInputElement>('input');\n    input.disabled = this.disabled;\n    multirange(input);\n    const minEl = this.el.querySelector<HTMLElement>('.min');\n    const maxEl = this.el.querySelector<HTMLElement>('.max');\n\n    input.onchange = () => {\n      this.value = [+input.valueLow, +input.valueHigh];\n    };\n\n    this.el.querySelector<HTMLInputElement>(\n      'input.ghost'\n    ).oninput = input.oninput = () => {\n      minEl.innerText = input.valueLow.toString();\n      maxEl.innerText = input.valueHigh.toString();\n    };\n\n    this.stream.subscribe(({ newValue }) => {\n      input.value = this.stringify(newValue);\n      minEl.innerText = input.valueLow.toString();\n      maxEl.innerText = input.valueHigh.toString();\n    });\n  };\n}\n","import { Input } from './input';\n\nexport class ActionInput extends Input<void> {\n  constructor(id: string, private readonly action: (ev: MouseEvent) => void) {\n    super(id, '', { parse: () => {} });\n  }\n\n  protected _setup = () => {\n    if (!this.disabled) this.el.onclick = ev => this.action(ev);\n  };\n}\n","import { Audio } from './types';\n\n/**\n * This defines the placeholder used for power and chroma when audio is not enabled.\n */\nexport const AUDIO_PLACEHOLDER: Audio = {\n  power: 1,\n  chroma: 0.5,\n  tempo: 0.5,\n  onset: 1\n};\n\nexport const chromaCount = 12;\nexport const octaveMin = 0;\nexport const octaveMax = 8;\nexport const octaveCount = octaveMax - octaveMin;\nexport const quantumSize = 128;\nexport const binCount = octaveCount * chromaCount;\n","import { chromaCount } from './constants';\n\nexport class Spectrum {\n  constructor(public dbMin: number, public dbMax: number) {}\n\n  static octave = (k: number) => Math.floor(k / chromaCount);\n\n  static chroma = (k: number) => k % chromaCount;\n\n  static f = (k: number): number => {\n    const octave = Spectrum.octave(k);\n    const chroma = Spectrum.chroma(k);\n    const c0 = 16.35; // c0 per https://pages.mtu.edu/~suits/notefreqs.html\n\n    return c0 * 2 ** octave * Math.pow(2, 1 / chromaCount) ** chroma;\n  };\n}\n","import { Subject } from 'rxjs';\n\nimport { error } from '../error';\nimport { inputs } from '../inputs';\nimport { AUDIO_PLACEHOLDER, binCount } from './constants';\nimport processorUrl from './power.worklet';\nimport { Spectrum } from './spectrum';\nimport { Audio } from './types';\n\nexport class AudioGraph {\n  static create = async (mediaStream: MediaStream, subject: Subject<Audio>) => {\n    const ctx = new AudioContext();\n    await ctx.audioWorklet.addModule(processorUrl);\n    const source = new MediaStreamAudioSourceNode(ctx, { mediaStream });\n    return new AudioGraph(ctx, source, subject);\n  };\n\n  constructor(\n    private readonly ctx: AudioContext,\n    source: AudioNode,\n    subject: Subject<Audio>\n  ) {\n    const power = new AudioWorkletNode(ctx, 'power', {\n      numberOfInputs: binCount,\n      channelCountMode: 'explicit',\n      channelCount: 1\n    });\n    power.port.onmessage = msg => {\n      if (inputs.mic.value) {\n        subject.next(msg.data as Audio);\n      } else {\n        subject.next(AUDIO_PLACEHOLDER);\n      }\n    };\n\n    power.onprocessorerror = err => {\n      error(err);\n      // processor dies after an error, so close the graph\n      inputs.mic.value = false;\n    };\n\n    power.connect(ctx.destination);\n\n    inputs.allowedDbs.stream.subscribe(({ newValue: [min, max] }) => {\n      power.parameters.get('dbMin').setValueAtTime(min, ctx.currentTime);\n      power.parameters.get('dbMax').setValueAtTime(max, ctx.currentTime);\n    });\n\n    for (let k = 0; k < binCount; k++) {\n      const f = Spectrum.f(k);\n      const filter = new BiquadFilterNode(ctx, {\n        type: 'bandpass',\n        frequency: f,\n        Q: f / 2\n      });\n      source.connect(filter).connect(power, 0, k);\n    }\n  }\n\n  close = () => this.ctx.close();\n}\n","import { getLogger } from 'loglevel';\nimport { BehaviorSubject, Observable, interval } from 'rxjs';\n\nimport { inputs } from '../inputs';\nimport { AUDIO_PLACEHOLDER } from './constants';\nimport { AudioGraph } from './graph';\nimport { Audio } from './types';\n\nconst logger = getLogger('Audio');\n\nconst subject = new BehaviorSubject<Audio>(AUDIO_PLACEHOLDER);\nexport const audioStream = subject.asObservable();\nlet graph: AudioGraph;\n\ninputs.mic.stream.subscribe(async ({ newValue, event }) => {\n  if (newValue) {\n    logger.info('getting user media');\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    logger.info('starting new audio graph');\n    graph = await AudioGraph.create(stream, subject);\n  } else {\n    logger.info('closing audio graph');\n    if (graph) await graph.close();\n    subject.next(AUDIO_PLACEHOLDER);\n  }\n});\n","// TODO make these inputs :D\nexport const fps = 60;\nexport const dataSampleRate = fps / 1000;\nexport const audioSampleRate = 2 * dataSampleRate;\nexport const fftSize = 1024;\nexport const psdSize = Math.floor(fftSize / 2) + 1;\n","import { Subject, combineLatest, interval } from 'rxjs';\n\nimport { inf } from '../../constants';\nimport { Simplifier } from '../../pipe/simplifier';\nimport { Params, Scope } from '../../pipe/types';\nimport { audioStream } from '../audio';\nimport { AUDIO_PLACEHOLDER } from '../audio/constants';\nimport { Audio } from '../audio/types';\nimport { fps } from '../constants';\nimport { error } from '../error';\nimport { inputs } from '../inputs';\nimport { extentStream } from '../renderer';\n\nconst subject = new Subject<Params>();\nexport const paramsStream = subject.asObservable();\n\n(async () => {\n  let count = 0;\n\n  const emit = async (audio: Audio, extent: [number, number, number]) => {\n    try {\n      const simplifier = new Simplifier({\n        theta: inputs.theta.value\n      });\n      const pipe = simplifier.simplify(inputs.pipe.value);\n      const scope: Scope = {\n        t: count++ / fps,\n        inf,\n        n: pipe.n,\n        extent,\n        ...audio\n      };\n      const params = {\n        pipe,\n        scope,\n        hv: {\n          h: inputs.h.value,\n          v: inputs.v.value\n        }\n      };\n      subject.next(params);\n    } catch (err) {\n      error(err);\n    }\n  };\n\n  await emit(AUDIO_PLACEHOLDER, [0, 0, 0]);\n\n  const maybeEmit = async (audio: Audio, extent: [number, number, number]) => {\n    if (inputs.animate.value) {\n      await emit(audio, extent);\n    }\n  };\n\n  combineLatest(audioStream, extentStream, interval(1000 / fps)).subscribe(\n    ([a, e]) => maybeEmit(a, e),\n    error\n  );\n})();\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","import { getLogger } from 'loglevel';\nimport { EMPTY, Observable, Subject, interval, timer } from 'rxjs';\nimport { delayWhen, repeatWhen, retryWhen, tap } from 'rxjs/operators';\n\nimport { Data } from '../data';\nimport { runPipeline, startPool } from '../pipe/pool';\nimport { Params } from '../pipe/types';\nimport { pp } from '../pp';\nimport debug from './debug';\nimport { error } from './error';\nimport * as params from './params';\n\nconst logger = getLogger('Data');\nlogger.setDefaultLevel('info');\nconst subject = new Subject<Data>();\n\nexport const dataStream = subject.asObservable();\n\ntype Source = {\n  getData(params: Params): Promise<Data>;\n};\n\nconst webWorkerSource = async (): Promise<Source> => {\n  console.info('starting web worker data source');\n  await startPool();\n\n  const getData = (params: Params) => runPipeline(params).then(Data.fromBuffer);\n\n  return { getData };\n};\n\n(async () => {\n  const { getData } = await webWorkerSource();\n  let inFlight: Promise<Data> | null;\n  let logged = 0;\n\n  params.paramsStream.subscribe(\n    async params => {\n      if (inFlight) return;\n      debug('params', params);\n      logger.debug('requesting data with params', params);\n      if (Date.now() - logged >= 1000) {\n        logger.debug(`sending request for data with params ${pp(params)}`);\n        logged = Date.now();\n      }\n      // TODO i feel like there's a more rx-y way to do this\n      inFlight = getData(params);\n      try {\n        subject.next(await inFlight);\n      } catch (err) {\n        error(err);\n      } finally {\n        inFlight = null;\n      }\n    },\n    err => error(err)\n  );\n})();\n","import 'multirange/multirange.css';\n\nimport './global.scss';\n\nimport { dataStream } from './data';\nimport debug from './debug';\nimport { Overlay } from './overlay';\nimport { initRenderer, updateRenderer } from './renderer';\n\nconst cursorInactiveTimeout = 1000;\nconst overlay = new Overlay();\nlet lastMouseMove = 0;\n\nconst maybeSetCursorInactive = (event?) => {\n  if (Date.now() < lastMouseMove + cursorInactiveTimeout) return;\n  if (overlay.hasAttention()) return;\n\n  document.body.classList.add('cursor-inactive');\n  overlay.hide();\n};\n\ndocument.body.onmousemove = event => {\n  overlay.show();\n\n  if (document.body.classList.contains('cursor-inactive')) {\n    document.body.classList.remove('cursor-inactive');\n  }\n\n  lastMouseMove = Date.now();\n  setTimeout(() => maybeSetCursorInactive(event), cursorInactiveTimeout);\n};\n\ndocument.onreadystatechange = async () => {\n  if (document.readyState === 'complete') {\n    document.body.appendChild(overlay.domElement);\n\n    await initRenderer(\n      document.querySelector('canvas').transferControlToOffscreen()\n    );\n\n    dataStream.subscribe(\n      async data => {\n        await updateRenderer(data);\n        debug('data', data);\n        document.body.classList.add('data');\n        maybeSetCursorInactive();\n      },\n      (err: Error) => alert(`${err.message}\\n${err.stack}`)\n    );\n  }\n};\n"],"sourceRoot":""}